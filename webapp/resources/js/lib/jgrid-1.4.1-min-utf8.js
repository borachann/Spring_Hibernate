/**
 * JexGrid Build 115
 * Date: Fri May 18 17:59:55 KST 2012
 */
/*
AUTHOR

	The JexGrid was written and is maintained by:
		Joon Ho Cho <joonho1101@gmail.com>

COPYRIGHT

	Copyright (c) 2010-2011, WebCash Inc. All rights reserved.

LICENSE

	- JexGrid License Policy -

	JexGrid 는 상업적 용도로 사용될 경우와 개인 용도로 사용될 경우의 두가지 다른 라이센스 정책을 가집니다.
	상업적 용도로 사용될 경우 라이센스를 구매하여야 하고, 개인 용도로 사용될 경우에는 GNU GPL License Version 3 정책을 따릅니다.

	1. 상업용: Commercial Software License
		- 도메인 당 1억원의 라이센스 가격이 청구됩니다. (List Price 기준)
		- 웹케시 내부 개발 프로젝트에 사용될 경우는 다음의 정책을 따릅니다.
			- 개발 기간 기술지원 비용: 프로젝트 개발 인력 * 100만원 / 1년
			- 상품에 포함되어 외부로 판매되는 경우: 프로젝트 도메인 당 1000만원의 솔루션 가격이 청구됩니다.

	2. 개인용: Open Source License

		- GNU GPL License Version 3 라이센스의 원칙을 따릅니다.

		JexGrid - A Fast, Comprehensive, and Flexible JavaScript Grid Library
		Copyright (C) 2011  Joon Ho Cho

		This program is free software: you can redistribute it and/or modify
		it under the terms of the GNU General Public License as published by
		the Free Software Foundation, either version 3 of the License, or
		(at your option) any later version.

		This program is distributed in the hope that it will be useful,
		but WITHOUT ANY WARRANTY; without even the implied warranty of
		MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
		GNU General Public License for more details.

		You should have received a copy of the GNU General Public License
		along with this program.  If not, see <http://www.gnu.org/licenses/>.

		- 중요 내용 요약:
			- 상용 이용 가능
			- 결합 소스 공개의 의무
			- 특허 허용 제한
			- 라이센스 전파의 의무
			- JexGrid 작성자는 사용자 요청에 의한 버그 패치의 의무가 없습니다.

	어떠한 경우에도 사용자는 위의 라이센스 정책을 수정하거나 삭제할 수 없습니다.


// Copyright 2006 The Closure Library Authors. All Rights Reserved.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//      http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS-IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
*/

(function(){var COMPILED=!0,goog=goog||{};goog.global=window;window.goog=goog;goog.DEBUG=!0;goog.LOCALE="en";goog.provide=function(f){if(!COMPILED){if(goog.isProvided_(f))throw Error('Namespace "'+f+'" already declared.');delete goog.implicitNamespaces_[f];for(var i=f;i=i.substring(0,i.lastIndexOf("."));){if(goog.getObjectByName(i))break;goog.implicitNamespaces_[i]=!0}}goog.exportSymbol_(f)};
goog.setTestOnly=function(f){if(COMPILED&&!goog.DEBUG)throw f=f||"",Error("Importing test-only code into non-debug environment"+f?": "+f:".");};if(!COMPILED)goog.isProvided_=function(f){return!goog.implicitNamespaces_[f]&&!!goog.getObjectByName(f)},goog.implicitNamespaces_={};goog.exportSymbol_=function(f,i,h){f=f.split(".");h=h||goog.global;!(f[0]in h)&&h.execScript&&h.execScript("var "+f[0]);for(var e;f.length&&(e=f.shift());)!f.length&&goog.isDef(i)?h[e]=i:h=h[e]?h[e]:h[e]={}};
goog.getObjectByName=function(f,i){for(var h=f.split("."),e=i||goog.global,b;b=h.shift();)if(goog.isDefAndNotNull(e[b]))e=e[b];else return null;return e};goog.globalize=function(f,i){var h=i||goog.global,e;for(e in f)h[e]=f[e]};
goog.addDependency=function(f,i,h){if(!COMPILED){for(var e,f=f.replace(/\\/g,"/"),b=goog.dependencies_,a=0;e=i[a];a++)b.nameToPath[e]=f,f in b.pathToNames||(b.pathToNames[f]={}),b.pathToNames[f][e]=!0;for(e=0;i=h[e];e++)f in b.requires||(b.requires[f]={}),b.requires[f][i]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(f){if(!COMPILED&&!goog.isProvided_(f)){if(goog.ENABLE_DEBUG_LOADER){var i=goog.getPathFromDeps_(f);if(i){goog.included_[i]=!0;goog.writeScripts_();return}}f="goog.require could not find: "+f;goog.global.console&&goog.global.console.error(f);throw Error(f);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(f){return f};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(f){f.getInstance=function(){return f.instance_||(f.instance_=new f)}};
if(!COMPILED&&goog.ENABLE_DEBUG_LOADER)goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var f=goog.global.document;return typeof f!="undefined"&&"write"in f},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var f=goog.global.document.getElementsByTagName("script"),i=f.length-1;i>=0;--i){var h=f[i].src,e=h.lastIndexOf("?"),
e=e==-1?h.length:e;if(h.substr(e-7,7)=="base.js"){goog.basePath=h.substr(0,e-7);break}}},goog.importScript_=function(f){var i=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[f]&&i(f)&&(goog.dependencies_.written[f]=!0)},goog.writeScriptTag_=function(f){return goog.inHtmlDocument_()?(goog.global.document.write('<script type="text/javascript" src="'+f+'"><\/script>'),!0):!1},goog.writeScripts_=function(){function f(a){if(!(a in e.written)){if(!(a in e.visited)&&(e.visited[a]=
!0,a in e.requires))for(var d in e.requires[a])if(!goog.isProvided_(d))if(d in e.nameToPath)f(e.nameToPath[d]);else throw Error("Undefined nameToPath for "+d);a in h||(h[a]=!0,i.push(a))}}var i=[],h={},e=goog.dependencies_,b;for(b in goog.included_)e.written[b]||f(b);for(b=0;b<i.length;b++)if(i[b])goog.importScript_(goog.basePath+i[b]);else throw Error("Undefined script input");},goog.getPathFromDeps_=function(f){return f in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[f]:null},goog.findBasePath_();
goog.typeOf=function(f){var i=typeof f;if(i=="object")if(f){if(f instanceof Array)return"array";else if(f instanceof Object)return i;var h=Object.prototype.toString.call(f);if(h=="[object Window]")return"object";if(h=="[object Array]"||typeof f.length=="number"&&typeof f.splice!="undefined"&&typeof f.propertyIsEnumerable!="undefined"&&!f.propertyIsEnumerable("splice"))return"array";if(h=="[object Function]"||typeof f.call!="undefined"&&typeof f.propertyIsEnumerable!="undefined"&&!f.propertyIsEnumerable("call"))return"function"}else return"null";
else if(i=="function"&&typeof f.call=="undefined")return"object";return i};goog.propertyIsEnumerableCustom_=function(f,i){if(i in f)for(var h in f)if(h==i&&Object.prototype.hasOwnProperty.call(f,i))return!0;return!1};goog.propertyIsEnumerable_=function(f,i){return f instanceof Object?Object.prototype.propertyIsEnumerable.call(f,i):goog.propertyIsEnumerableCustom_(f,i)};goog.isDef=function(f){return f!==void 0};goog.isNull=function(f){return f===null};goog.isDefAndNotNull=function(f){return f!=null};
goog.isArray=function(f){return goog.typeOf(f)=="array"};goog.isArrayLike=function(f){var i=goog.typeOf(f);return i=="array"||i=="object"&&typeof f.length=="number"};goog.isDateLike=function(f){return goog.isObject(f)&&typeof f.getFullYear=="function"};goog.isString=function(f){return typeof f=="string"};goog.isBoolean=function(f){return typeof f=="boolean"};goog.isNumber=function(f){return typeof f=="number"};goog.isFunction=function(f){return goog.typeOf(f)=="function"};
goog.isObject=function(f){f=goog.typeOf(f);return f=="object"||f=="array"||f=="function"};goog.getUid=function(f){return f[goog.UID_PROPERTY_]||(f[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(f){"removeAttribute"in f&&f.removeAttribute(goog.UID_PROPERTY_);try{delete f[goog.UID_PROPERTY_]}catch(i){}};goog.UID_PROPERTY_="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;
goog.cloneObject=function(f){var i=goog.typeOf(f);if(i=="object"||i=="array"){if(f.clone)return f.clone();var i=i=="array"?[]:{},h;for(h in f)i[h]=goog.cloneObject(f[h]);return i}return f};goog.bindNative_=function(f,i,h){return f.call.apply(f.bind,arguments)};
goog.bindJs_=function(f,i,h){if(!f)throw Error();if(arguments.length>2){var e=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,e);return f.apply(i,b)}}else return function(){return f.apply(i,arguments)}};goog.bind=function(f,i,h){goog.bind=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bindNative_:goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(f,i){var h=Array.prototype.slice.call(arguments,1);return function(){var e=Array.prototype.slice.call(arguments);e.unshift.apply(e,h);return f.apply(this,e)}};goog.mixin=function(f,i){for(var h in i)f[h]=i[h]};goog.now=Date.now||function(){return+new Date};
goog.globalEval=function(f){if(goog.global.execScript)goog.global.execScript(f,"JavaScript");else if(goog.global.eval){if(goog.evalWorksForGlobals_==null)goog.global.eval("var _et_ = 1;"),typeof goog.global._et_!="undefined"?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1;if(goog.evalWorksForGlobals_)goog.global.eval(f);else{var i=goog.global.document,h=i.createElement("script");h.type="text/javascript";h.defer=!1;h.appendChild(i.createTextNode(f));i.body.appendChild(h);
i.body.removeChild(h)}}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(f,i){var h=function(b){return goog.cssNameMapping_[b]||b},e;e=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?h:function(b){for(var b=b.split("-"),a=[],d=0;d<b.length;d++)a.push(h(b[d]));return a.join("-")}:function(b){return b};return i?f+"-"+e(i):e(f)};goog.setCssNameMapping=function(f,i){goog.cssNameMapping_=f;goog.cssNameMappingStyle_=i};
goog.getMsg=function(f,i){var h=i||{},e;for(e in h)var b=(""+h[e]).replace(/\$/g,"$$$$"),f=f.replace(RegExp("\\{\\$"+e+"\\}","gi"),b);return f};goog.exportSymbol=function(f,i,h){goog.exportSymbol_(f,i,h)};goog.exportProperty=function(f,i,h){f[i]=h};goog.inherits=function(f,i){function h(){}h.prototype=i.prototype;f.superClass_=i.prototype;f.prototype=new h;f.prototype.constructor=f};
goog.base=function(f,i,h){var e=arguments.callee.caller;if(e.superClass_)return e.superClass_.constructor.apply(f,Array.prototype.slice.call(arguments,1));for(var b=Array.prototype.slice.call(arguments,2),a=!1,d=f.constructor;d;d=d.superClass_&&d.superClass_.constructor)if(d.prototype[i]===e)a=!0;else if(a)return d.prototype[i].apply(f,b);if(f[i]===e)return f.constructor.prototype[i].apply(f,b);else throw Error("goog.base called from a method of one name to a method of a different name");};
goog.scope=function(f){f.call(goog.global)};var array_extension={};
(function(){var f=Array.prototype;if(!f.indexOf)f.indexOf=function(f){if(this===void 0||this===null)throw new TypeError;var h=Object(this),e=h.length>>>0;if(e===0)return-1;var b=0;arguments.length>0&&(b=Number(arguments[1]),b!==b?b=0:b!==0&&b!==1/0&&b!==-(1/0)&&(b=(b>0||-1)*Math.floor(Math.abs(b))));if(b>=e)return-1;for(b=b>=0?b:Math.max(e-Math.abs(b),0);b<e;b++)if(b in h&&h[b]===f)return b;return-1};if(!f.lastIndexOf)f.lastIndexOf=function(f){if(this===void 0||this===null)throw new TypeError;var h=
Object(this),e=h.length>>>0;if(e===0)return-1;var b=e;arguments.length>1&&(b=Number(arguments[1]),b!==b?b=0:b!==0&&b!==1/0&&b!==-(1/0)&&(b=(b>0||-1)*Math.floor(Math.abs(b))));for(e=b>=0?Math.min(b,e-1):e-Math.abs(b);e>=0;e--)if(e in h&&h[e]===f)return e;return-1};if(!f.filter)f.filter=function(f,h){if(this===void 0||this===null)throw new TypeError;var e=Object(this),b=e.length>>>0;if(typeof f!=="function")throw new TypeError;for(var a=[],d=0;d<b;d++)if(d in e){var c=e[d];f.call(h,c,d,e)&&a.push(c)}return a};
if(!f.forEach)f.forEach=function(f,h){var e,b=Object(this),a=b.length>>>0,d=0;if(!f||!f.call)throw new TypeError;for(h&&(e=h);d<a;){var c=String(d);b.hasOwnProperty(c)&&(c=b[c],f.call(e,c,d,b));d++}};if(!f.every)f.every=function(f,h){if(this===void 0||this===null)throw new TypeError;var e=Object(this),b=e.length>>>0;if(typeof f!=="function")throw new TypeError;for(var a=0;a<b;a++)if(a in e&&!f.call(h,e[a],a,e))return!1;return!0};if(!f.map)f.map=function(f,h){if(this===void 0||this===null)throw new TypeError;
var e=Object(this),b=e.length>>>0;if(typeof f!=="function")throw new TypeError;for(var a=Array(b),d=0;d<b;d++)d in e&&(a[d]=f.call(h,e[d],d,e));return a};if(!f.some)f.some=function(f,h){if(this===void 0||this===null)throw new TypeError;var e=Object(this),b=e.length>>>0;if(typeof f!=="function")throw new TypeError;for(var a=0;a<b;a++)if(a in e&&f.call(h,e[a],a,e))return!0;return!1};if(!f.reduce)f.reduce=function(f){var h,e=this.length,b;if(typeof f!=="function")throw new TypeError("First argument is not callable");
if((e==0||e===null)&&arguments.length<=1)throw new TypeError("Array length is 0 and no second argument");arguments.length<=1?(b=this[0],h=1):b=arguments[1];for(h=h||0;h<e;++h)h in this&&(b=f.call(void 0,b,this[h],h,this));return b};if(!f.reduceRight)f.reduceRight=function(f){if(this===void 0||this===null)throw new TypeError;var h=Object(this),e=h.length>>>0;if(typeof f!=="function")throw new TypeError;if(e===0&&arguments.length===1)throw new TypeError;e-=1;var b;if(arguments.length>=2)b=arguments[1];
else{do{if(e in this){b=this[e--];break}if(--e<0)throw new TypeError;}while(1)}for(;e>=0;)e in h&&(b=f.call(void 0,b,h[e],e,h)),e--;return b}})();var engine_extension={};
(function(){var f=Number.prototype,i=String.prototype,h=Array.prototype;if(!f.toFixedFloat)f.toFixedFloat=function(e){return parseFloat(this.toFixed(e))};if(!i.toInt)i.toInt=function(){var e;if(this.replace(/[^\d\.\-]/g,"").length===0)return NaN;e=parseInt(this,10);if(e===e)return e;for(var b,a=0,d=0,c=e.length,g=0,k=!1;g<c;g++)if(b=e.charAt(g),b==="."){if(++a===2){k=!0;break}}else if(b==="-"&&++d===2){k=!0;break}return k===!0&&(e=e.replace(/[\.\-]/g,"")).length===0?NaN:/^-*0*\./.test(e)||(e=e.replace(/^-0+/,
"-")).length===0||(e=e.replace(/^0+/,"")).length===0?0:parseInt(e,10)};if(!i.toFloat)i.toFloat=function(){var e;if((e=this.replace(/[^-\d\.]/g,"")).length===0)return NaN;for(var b=0,a=e.length,d,c=0,g=0;b<a;b++)if(d=e.charAt(b),d===".")if(c!==0)return NaN;else c++;else if(d==="-")if(g!==0)return NaN;else g++;return parseFloat(e)};if(!h.remove)h.remove=function(e){if(this.length===0)return-1;e=this.indexOf(e);e!==-1&&this.splice(e,1);return e};if(!h.removeAll)h.removeAll=function(e){if(this.length===
0)return this;for(var b=this.length;(b=this.lastIndexOf(e,b-1))!==-1;)if(this.splice(b,1),b===0)break;return this};if(!h.removeList)h.removeList=function(e){if(this.length===0||e.length===0)return this;for(var b=e.length,a=0,d;a<b;a++)(d=this.indexOf(e[a]))!==-1&&this.splice(d,1);return this};if(!h.removeAt)h.removeAt=function(e){if(this.length!==0&&(e<0&&(e=this.length+e),e<0&&(e=0),this.hasOwnProperty(e)&&e<this.length))return this.splice(e,1)[0]};if(!h.addAt)h.addAt=function(e,b){this.splice(e,
0,b);return b};if(!h.pushList)h.pushList=function(e){return e.length===0?this.length:h.push.apply(this,e)};if(!h.pushListAt)h.pushListAt=function(e,b){if(b.length===0)return this.length;var a=[e,0];h.push.apply(a,b);h.splice.apply(this,a);return this.length}})();var jx={util:{}},Util={},echo={};
(function(){function f(a){for(var d,b="",a=a.firstChild;a!=null;a=a.nextSibling)d=a.nodeType,d===3||d===4?b+=a.nodeValue:d===1&&(b+=f(a));return b}function i(a,d){for(;a&&d!==0;)if(d>0){if(a.nextElementSibling)a=a.nextElementSibling;else for(a=a.nextSibling;a&&a.nodeType!==1;a=a.nextSibling);d--}else{if(a.previousElementSibing)a=a.previousElementSibling;else for(a=a.previousSibling;a&&a.nodeType!==1;a=a.previousSibling);d++}return a}function h(a,d){if(a){var b={},c,g;if(d)for(c in a){if(a.hasOwnProperty(c)&&
(g=a[c])!==void 0)b[c]=g}else for(c in a)if(a.hasOwnProperty(c))switch(g=a[c],typeof g){case "undefined":break;case "object":b[c]=h(g);break;default:b[c]=g}return b}return null}function e(a,d,b){if(d){if(a){var c,g,j;if(b)for(c in d){if(d.hasOwnProperty(c)&&(j=d[c])!==void 0)a[c]=j}else for(c in d)if(d.hasOwnProperty(c))switch(j=d[c],typeof j){case "undefined":break;case "object":j&&a.hasOwnProperty(c)&&(g=a[c])&&typeof g=="object"?e(g,j):a[c]=j;break;default:a[c]=j}return a}return d}return a}function b(d,
b,c,j){if(l.hasOwnProperty(d)){if(c!=null)throw Error("empty element, "+d+", cannot have content!");return q&j?"<"+d+a(b,!0)+"/>":"<"+g(d)+a(b,!1)+"/>"}q&j?(b="<"+d+a(b,!0)+">",c!=null&&(b+=c)):(d=g(d),b="<"+d+a(b,!1)+">",c!=null&&(b+=g(c)));return s&j?b:b+"</"+d+">"}function a(a,b){if(a){var c="",j,k,e;if(a.style)j=a.style,delete a.style;if(b)for(k in a)a.hasOwnProperty(k)&&(p.hasOwnProperty(k)?a[k]&&(c+=" "+k+'="'+k+'"'):(e=a[k],e!=null&&(c+=" "+k+'="'+e+'"')));else for(k in a)a.hasOwnProperty(k)&&
(p.hasOwnProperty(k)?a[k]&&(c+=" "+k+'="'+k+'"'):(e=a[k],e!=null&&(c+=" "+g(k)+'="'+g(e)+'"')));if(j)c+=d(j,b),a.style=j;return c}return""}function d(a,d){if(a){if(typeof a=="string")return' style="'+(d?a:g(a))+'"';var b=' style="',c,j;if(d)for(c in a)a.hasOwnProperty(c)&&(j=a[c],j!=null&&(b+=c+":"+j+";"));else for(c in a)a.hasOwnProperty(c)&&(j=a[c],j!=null&&(b+=g(c)+":"+g(j)+";"));return b+'"'}return""}function c(a){switch(a){case "&":return"&amp;";case "<":return"&lt;";case ">":return"&gt;";case '"':return"&quot;";
case "'":return"&#x27;";case "/":return"&#x2F;";default:return a}}function g(a){return a!=null?(typeof a!="string"&&(a=a.toString()),a.replace(/[&<>"'\/]/g,c)):""}function k(a,d){if(!(a.length<=1)){d||(d=function(a,d){return a-d});var b=a.length/2|0,c=a.slice(0,b),b=a.slice(b);k(c,d);k(b,d);for(var g=0,j=0,e=0,r=c.length,f=b.length;g<r&&j<f;)d(c[g],b[j])>0?a[e++]=b[j++]:a[e++]=c[g++];for(;g<r;)a[e++]=c[g++];for(;j<f;)a[e++]=b[j++]}}function j(){var a=arguments;return function(d,b){for(var c=0;c<a.length;c++){var g=
a[c](d,b);if(g)return g}return 0}}var r=window.console,n=[],o;o=r&&r.log?function(a){for(var d=0,b=arguments.length;d<b;d++)r.log(arguments[d])}:function(a){n.push.apply(n,arguments)};goog.exportSymbol("jx.util",Util);goog.exportSymbol("Util",Util);goog.exportSymbol("echo",o);Util.isNull=function(a){return a==null};Util.isNotNull=function(a){return a!=null};Util.isNullAnd=function(){for(var a=0,d=arguments.length;a<d;a++)if(arguments[a]!=null)return!1;return!0};Util.isNullOr=function(){for(var a=
0,d=arguments.length;a<d;a++)if(arguments[a]==null)return!0;return!1};Util.isNotNullAnd=function(){for(var a=0,d=arguments.length;a<d;a++)if(arguments[a]==null)return!1;return!0};Util.isNotNullOr=function(){for(var a=0,d=arguments.length;a<d;a++)if(arguments[a]!=null)return!0;return!1};Util.ifNull=function(a,d,b){return a==null?d:b===void 0?a:b};Util.ifTrue=function(a,d,b){return a===!0?d:b===void 0?a:b};Util.isFunction=function(a){return typeof a=="function"};Util.isString=function(a){return typeof a==
"string"};Util.isNumber=function(a){return typeof a=="number"};Util.isObject=function(a){return typeof a=="object"};Util.isArray=function(a){var d=Array.isArray;return a&&typeof a=="object"&&(d&&d(a)||typeof a.length=="number"&&a.hasOwnProperty("length")&&!a.propertyIsEnumerable("length"))};Util.split=function(a,d,b,c){if(typeof a!=="string")return[];d=d===void 0?/\s+/:d;b=b===void 0?function(a){return!!a}:b;c=c===void 0?function(a){return $.trim(a)}:c;a=a.split(d);c&&(a=a.map(c));b&&(a=a.filter(b));
return a};Util.isEmpty=function(a){if(!a)return!0;if(typeof a!="object")return!1;for(var d in a)if(a.hasOwnProperty(d))return!1;return!0};Util.isEmptyObj=function(a){if(a==null)return!0;if(typeof a!="object")return!1;for(var d in a)if(a.hasOwnProperty(d))return!1;return!0};Util.isNotEmptyObj=function(a){if(a==null||typeof a!="object")return!1;for(var d in a)if(a.hasOwnProperty(d))return!0;return!1};Util.isEmptyString=function(a){return a==null||a===""};Util.isEmptyArray=function(a){if(a==null)return!0;
if(!Util.isArray(a))return!1;for(var d=0,b=a.length;d<b;d++)if(a.hasOwnProperty(d))return!1;return!0};Util.emptyObject=function(a){if(!a||typeof a!="object")return a;if(Util.isArray(a))return a.length=0,a;for(var d in a)a.hasOwnProperty(d)&&delete a[d];return a};Util.deleteUndefined=function(a){if(!a||typeof a!="object")return a;var d;if(Util.isArray(a)){for(d=a.length-1;d>-1;d--)a.hasOwnProperty(d)&&a[d]===void 0&&a.splice(d,1);return a}for(d in a)a.hasOwnProperty(d)&&a[d]===void 0&&delete a[d];
return a};Util.deepClone=function(a){if(!a)return a;switch(typeof a){case "boolean":case "number":case "string":case "function":return a}if(Util.isArray(a)){for(var d=[],b=0,c=a.length;b<c;b++)b in a&&(d[b]=Util.deepClone(a[b]));return d}d={};for(b in a)a.hasOwnProperty(b)&&(d[b]=Util.deepClone(a[b]));return d};Util.clone=function(a,d,b){if(!a)return a;switch(typeof a){case "boolean":case "number":case "string":case "function":return a}if(Util.isArray(a)){if(b===1)return Array.prototype.slice.call(a);
for(var c=[],g=a.length,j=0,b=b!==void 0?b-1:void 0;j<g;j++)j in a&&(c[j]=Util.clone(a[j],d,b));return c}c={};g=Util.isEmptyObj(d);if(b===1)if(g)for(j in a)a.hasOwnProperty(j)&&(c[j]=a[j]);else for(j in d)d.hasOwnProperty(j)&&a.hasOwnProperty(j)&&(c[j]=a[j]);else if(b=b!==void 0?b-1:void 0,g)for(j in a)a.hasOwnProperty(j)&&(c[j]=Util.clone(a[j],void 0,b));else for(j in d)d.hasOwnProperty(j)&&a.hasOwnProperty(j)&&(c[j]=Util.clone(a[j],void 0,b));return c};Util.setTextContent=function(a,d){var b=a.textContent;
if(d===void 0)return b!==void 0?b:a.innerText;else b!==void 0?a.textContent=d:a.innerText=d};Util.getTextContent=f;Util.getHTMLText=function(a){var d=document.createElement("div"),a=document.createTextNode(a);d.appendChild(a);return d.innerHTML};Util.toArray=function(a){var d=[],b;for(b in a)a.hasOwnProperty(b)&&d.push(a[b]);return d};Util.toArrayWithKey=function(a){var d=[],b;for(b in a)a.hasOwnProperty(b)&&d.push({key:b,val:a[b]});return d};Util.random=function(a){return Math.floor(a*Math.random())};
Util.bound=function(a,d,b){isNaN(b)||(a=Math.min(a,b));isNaN(d)||(a=Math.max(a,d));return a};Util.callFn=function(){return arguments.length<=3?arguments[1].call(arguments[0],arguments[2]):arguments[1].apply(arguments[0],Array.prototype.slice.call(arguments,2))};Util.formatNumber=function(a,d,b,c,g){var b=b===void 0?"&#8361; ":b,d=isNaN(d)?0:d,c=c===void 0?".":c,g=g===void 0?",":g,j=a<0?"-":"",k=parseInt(a=Math.abs(+a||0).toFixed(d),10)+"",e=k.length,e=e>3?e%3:0;return b+j+(e?k.substr(0,e)+g:"")+k.substr(e).replace(/(\d{3})(?=\d)/g,
"$1"+g)+(d?c+Math.abs(a-k).toFixed(d).slice(2):"")};Util.getBodyScroll=function(){var a=0,d=0;if(typeof window.pageYOffset==="number")d=window.pageYOffset,a=window.pageXOffset;else if(document.body&&(document.body.scrollLeft||document.body.scrollTop))d=document.body.scrollTop,a=document.body.scrollLeft;else if(document.documentElement&&(document.documentElement.scrollLeft||document.documentElement.scrollTop))d=document.documentElement.scrollTop,a=document.documentElement.scrollLeft;return[a,d]};Util.hasClass=
function(a,d){if(a&&d){var b=a.className;if(b===d)return!0;if(b&&b.length>=d.length)for(var b=a.classList||Util.split(b),c=0,g=b.length;c<g;c++)if(b[c]===d)return!0}return!1};Util.hasTagAndClass=function(a,d,b){if(a&&d&&b&&a.tagName===d){d=a.className;if(d===b)return!0;if(d&&d.length>=b.length)for(var a=a.classList||Util.split(d),d=0,c=a.length;d<c;d++)if(a[d]===b)return!0}return!1};Util.closest=function(a,d,b){if(b){for(var c=a,g=!1;c;){if(c===b){g=!0;break}c=c.parentNode}if(!g)return null}if(Util.hasClass(a,
d))return a;for(a=a.parentNode;a&&a!==b;a=a.parentNode)if(Util.hasClass(a,d))return a;return null};Util.closestWithTag=function(a,d,b,c){if(c){for(var g=a,j=!1;g;){if(g===c){j=!0;break}g=g.parentNode}if(!j)return null}if(Util.hasTagAndClass(a,d,b))return a;for(a=a.parentNode;a&&a!==c;a=a.parentNode)if(Util.hasTagAndClass(a,d,b))return a;return null};Util.findFirstByClass=function(a,d){if(a){if(Util.hasClass(a,d))return a;for(var b=0,c=a.childNodes,g=c.length,j,k;b<g;b++)if((j=c[b])&&(k=Util.findFirstByClass(j,
d))!==void 0)return k}return null};Util.findFirstByTagAndClass=function(a,d,b){if(a){if(Util.hasTagAndClass(a,d,b))return a;for(var c=0,a=a.childNodes,g=a.length,j;c<g;c++)if(Util.isNotNull(a[c])&&(j=Util.findFirstByTagAndClass(a[c],d,b))!==void 0)return j}return null};Util.findByClass=function(a,d,b){b=b||[];if(a){Util.hasClass(a,d)&&b.push(a);for(var c=0,a=a.childNodes,g=a.length;c<g;c++)Util.isNotNull(a[c])&&Util.findByClass(a[c],d,b)}return b};Util.findByTagAndClass=function(a,d,b,c){c=c||[];
if(a){Util.hasTagAndClass(a,d,b)&&c.push(a);for(var g=0,a=a.childNodes,j=a.length;g<j;g++)Util.isNotNull(a[g])&&Util.findByTagAndClass(a[g],d,b,c)}return c};Util.parent=function(a,d){for(d===void 0&&(d=1);d--&&a;)a=a.parentNode;return!a||a.nodeType!==1?null:a};Util.sibling=i;Util.child=function(a,d){if(a.children)return d<0&&(d+=a.children.length),d<0?null:a.children[d];if(d>=0){if(a.firstElementChild)a=a.firstElementChild;else for(a=a.firstChild;a&&a.nodeType!==1;a=a.nextSibling);return i(a,d)}else{if(a.lastElementChild)a=
a.lastElementChild;else for(a=a.lastChild;a&&a.nodeType!==1;a=a.previousSibling);return i(a,d+1)}};Util.getHead=function(){return document.head?document.head:document.getElementsByTagName("head")[0]};Util.appendTag=function(a,d){return a.appendChild(document.createElement(d))};Util.appendHTML=function(a,d){var b=document.createElement("div"),c,g=0,j=[];b.innerHTML=d;for(c=b.childNodes.length;g<c;g++)j.push(a.appendChild(b.firstChild));return j};Util.createStyle=function(a){a==null&&(a="");var d=document.createElement("style");
d.type="text/css";d.rel="stylesheet";Util.getHead().appendChild(d);d.styleSheet?d.styleSheet.cssText=a:d.appendChild(document.createTextNode(a));return d};Util.removeStyle=function(a){a!=null&&a.parentNode!=null&&Util.getHead().removeChild(a)};Util.setStyle=function(a,d){return a==null?"":a.styleSheet?a.styleSheet.cssText=d:a.childNodes[0].nodeValue=d};Util.appendStyle=function(a,d){return a==null?"":a.styleSheet?a.styleSheet.cssText+=d:a.childNodes[0].nodeValue+=d};Util.getStyle=function(a){return a==
null?"":a.styleSheet?a.styleSheet.cssText:a.childNodes[0].nodeValue};Util.appendScript=function(a){var d=document.createElement("script");d.type="text/javascript";Util.getHead().appendChild(d);d.text?d.text=a:d.innerHTML=a;return d};Util.appendScriptFile=function(a){document.write('<script type="text/javascript" src="'+a+'"><\/script>')};Util.outerHTML=function(a){if(a.outerHTML===void 0){var d=document.createElement("div");d.appendChild(a.cloneNode(!0));return d.innerHTML}return a.outerHTML};Util.index=
function(a){for(var d=0;(a=a.previousSibling)!=null;)++d;return d};Util.contains=function(a,d,b){for(;d!=null;){if(d===a)return!0;if(d===b)break;d=d.parentNode}return!1};Util.areEqualArrays=function(a,d){if(a==null||d==null)return!1;if(a===d)return!0;if(a.length!==d.length)return!1;for(var b=0,c=a.length;b<c;b++)if(a.hasOwnProperty(b)&&!d.hasOwnProperty(b)||d.hasOwnProperty(b)&&!a.hasOwnProperty(b)||a[b]!==d[b])return!1;return!0};Util.areEqualObjects=function(a,d){if(a==null||d==null)return!1;if(a===
d)return!0;if(typeof a!=="object"||typeof d!=="object")return!1;for(var b in a)if(a.hasOwnProperty(b)&&(!d.hasOwnProperty(b)||a[b]!==d[b]))return!1;for(b in d)if(d.hasOwnProperty(b)&&(!a.hasOwnProperty(b)||a[b]!==d[b]))return!1;return!0};Util.areEqualComplex=function(a,d,b){if(a==null||d==null)return!1;if(a===d)return!0;var c=b.length,g=b[0];if(c===1)return g==="array"?Util.areEqualArrays(a,d):Util.areEqualObjects(a,d);if(c>1){b=b.slice(1);c=0;if(g==="array"){if(a.length!==d.length)return!1;for(g=
a.length;c<g;c++)if(!d.hasOwnProperty(c)||!Util.areEqualComplex(a[c],d[c],b))return!1}else{for(c in a)if(a.hasOwnProperty(c)&&(!d.hasOwnProperty(c)||!Util.areEqualComplex(a[c],d[c],b)))return!1;for(c in d)if(d.hasOwnProperty(c)&&(!a.hasOwnProperty(c)||!Util.areEqualComplex(a[c],d[c],b)))return!1}return!0}};Util.typeCheck=function(a,d,b,c,g){if(b&&d===void 0||c&&d===null)return!0;switch(typeof a){case "string":if(typeof d===a)return!0;break;case "function":if(d instanceof a)return!0}if(g)return!1;
throw new TypeError("object is not a "+a+", but is a "+typeof d);};Util.sprint=function(a,d,b,c){Util.typeCheck("string",a);Util.typeCheck("object",d);Util.typeCheck("string",b,!0);Util.typeCheck("string",c,!0);var g;b===void 0&&(b="%");c===void 0&&(c="%");for(g in d)d.hasOwnProperty(g)&&(a=a.replace(RegExp(b+g+c,"gm"),d[g]));return a};Util.tagReplaces={"&":"&amp;","<":"&lt;",">":"&gt;"};Util.replaceTag=function(a){return Util.tagReplaces[a]||a};Util.escapeHtmlTags=function(a){return a.replace(/[&<>]/g,
Util.replaceTag)};Util.escapeRegExp=function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};Util.strReplace=function(a,d){var b,c=[];for(b in d)d.hasOwnProperty(b)&&c.push(Util.escapeRegExp(b));return a.replace(RegExp("("+c.join("|")+")","gm"),function(a){return d[a]})};Util.calCheckSize=function(){var a={},d=document.createElement("div");document.body.appendChild(d);d.innerHTML="<input type='checkbox' style='margin:0;padding:0;overflow:hidden'/>";a.checkboxW=d.childNodes[0].offsetWidth;
a.checkboxH=d.childNodes[0].offsetHeight;d.innerHTML="<input type='radio' style='margin:0;padding:0;overflow:hidden'/>";a.radioW=d.childNodes[0].offsetWidth;a.radioH=d.childNodes[0].offsetHeight;document.body.removeChild(d);return a};Util.which=function(a){for(var d={},b=0,c;b<a.length;b++)if(c=a[b].toLowerCase(),c==="number"){for(c=48;c<=57;c++)d[c]=!0;for(c=96;c<=105;c++)d[c]=!0}else if(c==="alphabet")for(c=65;c<=90;c++)d[c]=!0;else if(c==="arrow")for(c=37;c<=40;c++)d[c]=!0;else c.length>1&&(c=
c.replace(/\s/g,"")),c.length>=3&&(c=c.replace(/numpad|num/g,"n").replace(/korean|kor/g,"kr")),d[Util.keyMapKeydown[c]]=!0;return d};Util.keyMapKeydown={backspace:8,tab:9,enter:13,shift:16,control:17,ctrl:17,alt:18,pause:19,"break":19,capslock:20,escape:27,esc:27,space:32," ":32,pageup:33,pgup:33,pagedown:34,pgdown:34,pgdn:34,end:35,home:36,leftarrow:37,left:37,uparrow:38,up:38,rightarrow:39,right:39,downarrow:40,down:40,insert:45,ins:45,"delete":46,del:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,
"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,n0:96,n1:97,n2:98,n3:99,n4:100,n5:101,n6:102,n7:103,n8:104,n9:105,"n*":106,"n+":107,"n-":109,"n.":110,"n/":111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,numlock:144,scrolllock:145,mute:173,volumedown:174,volumeup:175,":":186,";":186,"=":187,"+":187,
",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,kr:229};Util.printEventPos=function(a){Util.print("client: ("+a.clientX+", "+a.clientY+"), layer: ("+a.layerX+", "+a.layerY+"), offset: ("+a.offsetX+", "+a.offsetY+"), page: ("+a.pageX+", "+a.pageY+"), screen: ("+a.screenX+", "+a.screenY+"), xy: ("+a.x+", "+a.y+")")};Util.print=function(a){if(o)if(arguments.length===1)o(arguments[0]);else for(var d=0,b=arguments.length;d<
b;d++)o(arguments[d])};Util.open=function(a){var d={url:"about:blank",name:"_blank",channelmode:"no",directories:"yes",fullscreen:"no",height:void 0,left:void 0,location:"yes",menubar:"yes",resizable:"yes",scrollbars:"yes",status:"yes",titlebar:"yes",toolbar:"yes",top:void 0,width:void 0,replace:void 0},b;if(Util.isNotNull(a))for(b in d)d.hasOwnProperty(b)&&(d[b]=a[b]);a=Util.ifNull(d.height,"","height="+d.height+", ")+Util.ifNull(d.left,"","left="+d.left+", ")+Util.ifNull(d.top,"","top="+d.top+", ")+
Util.ifNull(d.width,"","width="+d.width+", ")+"channelmode="+d.channelmode+", directories="+d.directories+", fullscreen="+d.fullscreen+", location="+d.location+", menubar="+d.menubar+", resizable="+d.resizable+", scrollbars="+d.scrollbars+", status="+d.status+", titlebar="+d.titlebar+", toolbar="+d.toolbar;return d.replace==null?window.open(d.url,d.name,a):window.open(d.url,d.name,a,d.replace)};Util.cloneObject=h;Util.extendObject=e;Util.extendOrClone=function(a,d){return d?a?e(a,d):h(d):a};Util.lcfirst=
function(a){return a?a.charAt(0).toLowerCase()+a.substring(1):""};Util.ucfirst=function(a){return a?a.charAt(0).toUpperCase()+a.substring(1):""};var p={checked:!0,compact:!0,declare:!0,defer:!0,disabled:!0,ismap:!0,multiple:!0,nohref:!0,noresize:!0,noshade:!0,nowrap:!0,readonly:!0,selected:!0},l={area:!0,base:!0,basefont:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,isindex:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},m={hidden:!0,text:!0,search:!0,tel:!0,
url:!0,email:!0,password:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,number:!0,range:!0,color:!0,checkbox:!0,radio:!0,file:!0,submit:!0,image:!0,reset:!0,button:!0};Util.emptyElements=l;Util.element=b;Util.input=function(a,d,c){if(m.hasOwnProperty(a))return d.type=a,b("input",d,null,c);else throw Error("invalid input type, "+a+"!");};Util.attribute=a;Util.style=d;Util.escapeChar=c;Util.encode=g;var q=1,s=2;Util.SAFE=q;Util.LEAVE_OPENED=s;Util.mergesort=k;Util.compositeSort=function(a,d){a.sort(j.apply(null,
d))}})();jx.lang={};jx.lang.Disposable={};
(function(){function f(){}function i(a,b,g){if(typeof a!="object")return!1;var k,j,e;if(b)for(var g=0,f=b.length;g<f;g++)if(k=b[g],this.hasOwnProperty(k))if(a.hasOwnProperty(k)){if(j=this[k],e=a[k],j!==a&&!(j===j||e===e))return!1}else return!1;else{if(a.hasOwnProperty(k))return!1}else{if(g)for(k in this){if(this.hasOwnProperty(k)){if(!a.hasOwnProperty(k))return!1;j=this[k];e=a[k];if(j!==e)if(j){if(typeof j!="object"||typeof e!="object")return!1;if(j.equals){if(!j.equals(e,null,g-1))return!1}else if(e.equals&&
!e.equals(j,null,g-1))return!1;if(!i.call(j,e,null,g-1))return!1}else if(!(j===j||e===e))return!1}}else for(k in this)if(this.hasOwnProperty(k))if(a.hasOwnProperty(k)){if(j=this[k],e=a[k],j!==a&&!(j===j||e===e))return!1}else return!1;for(k in a)if(a.hasOwnProperty(k)&&!this.hasOwnProperty(k))return!1}return!0}function h(d,b){if(this!=goog.global){var g,k;if(d)for(g in this){if(this.hasOwnProperty(g)){if((k=this[g])&&typeof k=="object")if(k.dispose)k.dispose(d-1,b);else if(b){if(a(k))k.length=0;h.call(k,
d-1,b)}delete this[g]}}else for(g in this)this.hasOwnProperty(g)&&delete this[g]}}var e=goog.getObjectByName("jx.util");goog.exportSymbol("jx.lang.Disposable",f);goog.exportProperty(f.prototype,"dispose",h);var b=f.prototype,a=e.isArray;e.equals=Object.equals=function(a,b,g,k){return typeof a=="object"?i.call(a,b,g,k):a!==a&&b!==b};e.dispose=Object.dispose=function(a,b,g){if(typeof a=="object")return h.call(a,b,g)};b.equals=i;b.dispose=h})();jx.util$={};var Util$={};
(function(){goog.exportSymbol("jx.util$",Util$);goog.exportSymbol("Util$",Util$);Util$.is$=function(f){return f instanceof jQuery?!0:!1};Util$.safe$=function(f){return f instanceof jQuery?f:$(f)};Util$.unbindRemove=function(f){f.unbind().remove()};jQuery.fn.getBoundingRect=function(){var f=this.offset();return{left:f.left,top:f.top,width:this.outerWidth(),height:this.outerHeight()}};jQuery.fn.containsEvent=function(f){if(this.length===0)return!1;var i,h,e,b;if(this.length<=1)return i=this.getBoundingRect(),
e=f.pageX,b=f.pageY,e>=i.left&&e<=i.left+i.width&&b>=i.top&&b<=i.top+i.height;h=!1;this.each(function(){i=$(this).getBoundingRect();e=f.pageX;b=f.pageY;if(e>=i.left&&e<=i.left+i.width&&b>=i.top&&b<=i.top+i.height)return h=!0,!1});return h};Util$.baseurlOfHeadScript=function(f){var i=$(document.getElementsByTagName("head")[0]).find("script[src$='"+f+"']").attr("src");return i.substring(0,i.indexOf(f))};Util$.calScrollbarDims=function(f){if(Util.isNotNull(window._SCROLLBAR))return window._SCROLLBAR;
if(Util.isNotNull(window.opener)&&Util.isNotNull(window.opener._SCROLLBAR))return window.opener._SCROLLBAR;var f=Util$.safe$(f),i;f[0].innerHTML="<div id='scrollbardim' style='position:absolute;top:-10000px;left:-10000px;width:100px;height:100px;overflow:scroll;'></div>";i=$(document.getElementById("scrollbardim"));i={w:i.width()-i[0].clientWidth,h:i.height()-i[0].clientHeight};f[0].innerHTML="";return window._SCROLLBAR=i}})();/*
 Copyright (c) 2010-2011, WebCash Inc. All rights reserved.
 @namespace JGM
*/
jx.grid={};var JGM={};
(function(){var f=goog.getObjectByName("jx.util"),i=goog.getObjectByName("jx.util$");goog.exportSymbol("JGM",JGM);goog.exportSymbol("jx.grid",JGM);JGM.version="2.0.0";JGM._map={ArrayExtIE:{cacheModule:!1},Cache:{cacheModule:!0},Cell:{cacheModule:!1},CheckManager:{cacheModule:!0},ColumnManager:{cacheModule:!0},ColumnGroup:{cacheModule:!0},ColumnHeader:{cacheModule:!0},Collapser:{cacheModule:!0},DataManager:{cacheModule:!0},DataCreator:{cacheModule:!0},EditManager:{cacheModule:!0},Editor:{cacheModule:!0},
EngineExt:{cacheModule:!1},EventManager:{cacheModule:!0},Footer:{cacheModule:!0},HeaderTree:{cacheModule:!0},Grid:{cacheModule:!0},GridManager:{cacheModule:!1},MenuBar:{cacheModule:!0},ViewportManager:{cacheModule:!0},SelectionManager:{cacheModule:!0},SearchManager:{cacheModule:!0},TooltipManager:{cacheModule:!0},Tracer:{cacheModule:!1},Tree:{cacheModule:!0},TreeNode:{cacheModule:!1},Util:{cacheModule:!1},Util$:{cacheModule:!1}};JGM.create=function(e,b){b==null&&(b={});if(!JGM.hasOwnProperty(e))throw Error("cannot find a grid module: name="+
e);if(JGM._map.hasOwnProperty(e))if(JGM._map[e].cacheModule){var a=b.mid="JGM"+JGM.m.length++,d=new JGM[e](b);JGM.m.hasOwnProperty(e)||(JGM.m[e]={});JGM.m[e][a]=d;if(e==="Grid"){if(d.name==null)d.name=JGM.grids.length;JGM.gridMap[d.name]=d;JGM.grids.push(d)}return d}else return new JGM[e](b);else return new JGM[e](b)};JGM._destroy=function(e,b){if(e&&b){var a,d,c,g;for(d in b)if(b.hasOwnProperty(d))switch(d){case "map":a=b[d];if(typeof a=="string"){a=f.split(a);g=a.length;for(c=0;c<g;c++)JGM._deleteMap(e,
a[c])}else if(a instanceof Array){g=a.length;for(c=0;c<g;c++)f.emptyObject(a[c])}else f.emptyObject(a);break;case "array":a=b[d];if(typeof a=="string"){a=f.split(a);g=a.length;for(c=0;c<g;c++)JGM._deleteArray(e,a[c])}else a.length=0;break;case "$":a=b[d];if(typeof a=="string"){a=f.split(a);g=a.length;for(c=0;c<g;c++)JGM._delete$(e,a[c])}else if(a instanceof Array){g=a.length;for(c=0;c<g;c++)i.unbindRemove(a[c])}else i.unbindRemove(a);break;case "style":a=b[d];if(typeof a=="string"){a=f.split(a);g=
a.length;for(c=0;c<g;c++)JGM._deleteStyle(e,a[c])}else if(a instanceof Array){g=a.length;for(c=0;c<g;c++)f.removeStyle(a[c])}else f.removeStyle(a);break;case "property":a=b[d];if(typeof a=="string"){a=f.split(a);g=a.length;for(c=0;c<g;c++)delete e[a[c]]}else if(a instanceof Array){g=a.length;for(c=0;c<g;c++)delete e[a[c]]}break;case "module":a=b[d];if(typeof a=="string"){a=f.split(a);g=a.length;for(c=0;c<g;c++)JGM._deleteModule(e,a[c])}else if(a instanceof Array){g=a.length;for(c=0;c<g;c++)a[c].destroy()}else a.destroy();
break;case "name":e.hasOwnProperty("mid")&&(JGM._remove(b[d],e.mid),delete e.mid);break;case "path":e.hasOwnProperty("grid")&&e.grid.hasOwnProperty(b[d])&&(delete e.grid[b[d]],delete e.grid)}f.emptyObject(e)}};JGM._deleteMap=function(e,b){e&&e.hasOwnProperty(b)&&e[b]&&(f.emptyObject(e[b]),delete e[b])};JGM._deleteArray=function(e,b){if(e&&e.hasOwnProperty(b)&&e[b])e[b].length=0,delete e[b]};JGM._delete$=function(e,b){e&&e.hasOwnProperty(b)&&e[b]&&(i.unbindRemove(e[b]),delete e[b])};JGM._deleteStyle=
function(e,b){e&&e.hasOwnProperty(b)&&e[b]&&(f.removeStyle(e[b]),delete e[b])};JGM._deleteModule=function(e,b){e&&e.hasOwnProperty(b)&&e[b]&&(e[b].destroy(),delete e[b])};JGM._remove=function(e,b){delete JGM.m[e][b]};JGM.grid=function(e){return JGM.create("Grid",e)};JGM.gridMap={};JGM.getGrid=function(e){if(JGM.gridMap.hasOwnProperty(e))return JGM.gridMap[e]};JGM.grids=[];JGM._add=function(e,b){JGM[e]=b};JGM._extend=function(e,b){var a=f.ifNull(b,{});$.extend(!0,e,a);$.extend(!0,a,e);return a};JGM.m=
{length:0};JGM._CONST={_cssUnselectable:"-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-o-user-select:none;user-select:none;",_checkboxWidth:void 0,_checkboxHeight:void 0,_radioWidth:void 0,_radioHeight:void 0};JGM._globalEventsBound=!1;JGM._globalEvents={_mousemove:function(e){var b,a=JGM.m.Grid;for(b in a)a.hasOwnProperty(b)&&a[b]._mousemove(e)},_mouseup:function(e){var b,a=JGM.m.Grid;for(b in a)a.hasOwnProperty(b)&&a[b]._mouseup(e)},_resize:function(e){var b,a=JGM.m.Grid;
for(b in a)a.hasOwnProperty(b)&&a[b]._resize(e)}};JGM._bindGlobalEvents=function(){if(!JGM._globalEventsBound)$(document).bind({mousemove:JGM._globalEvents._mousemove,mouseup:JGM._globalEvents._mouseup}),$(window).resize(JGM._globalEvents._resize),JGM._globalEventsBound=!0};JGM._unbindGlobalEvents=function(){if(JGM._globalEventsBound)$(document).unbind({mousemove:JGM._globalEvents._mousemove,mouseup:JGM._globalEvents._mouseup}),$(window).unbind("resize",JGM._globalEvents._resize),JGM._globalEventsBound=
!1};JGM.error={LENGTH_NOT_EQUAL:"Lengths are not equal",NOT_MODIFIABLE:"Cannot modify value for '%0'.",KEY_UNDEFINED:"Column '%0' is undefined.",BAD_NULL:"Column '%0' cannot be null.",DUP_KEY:"Duplicate column key '%0'.",DUP_ENTRY:"Duplicate entry '%0' for '%1'.",KEY_NOT_FOUND:"'%0' for '%1' doesn't exist in table.",PARSE_ERROR:"Cannot parse '%0' for '%1'.",INVALID_DEFAULT:"Invalid default value '%0' for '%1'.",MULTIPLE_PRI_KEY:"Multiple primary key defined.",DATA_TOO_LONG:"Data '%0' too long for column '%1'. Maximum is %2.",
DATA_TOO_SHORT:"Data '%0' too short for column '%1'. Minimum is %2.",WRONG_LENGTH:"Length of data '%0' is not '%1' characters long for column '%2'.",BIGGER_THAN:"Data '%0' too big for column '%1'. Maximum is %2.",SMALLER_THAN:"Data '%0' too small for column '%1'. Minimum is %2.",WRONG_VALUE:"Incorrect value: '%0' for '%1'."};JGM.chart=function(e,b,a,d,c){var g,b=b.toLowerCase();switch(b){case "area":b="corechart";g="AreaChart";break;case "bar":b="corechart";g="BarChart";break;case "candle":b="corechart";
g="CandlestickChart";break;case "column":b="corechart";g="ColumnChart";break;case "combo":b="corechart";g="ComboChart";break;case "gauge":b="gauge";g="Gauge";break;case "geo":b="geochart";g="GeoChart";break;case "line":b="corechart";g="LineChart";break;case "pie":b="corechart";g="PieChart";break;case "scatter":b="corechart";g="ScatterChart";break;case "table":b="table";g="Table";break;case "treemap":b="treemap";g="TreeMap";break;default:throw Error("unknown chart type: "+b);}google.load("visualization",
"1",{packages:[b]});var k=JGM.exportToArray(c,a.map(function(a){return a.key}));google.setOnLoadCallback(function(){for(var b=new google.visualization.DataTable,c=0,f=a.length,h,i;c<f;c++){h=a[c];i=h.type;switch(i){case "boolean":i="boolean";break;case "int":case "integer":case "long":case "float":case "double":i="number";break;case "string":case "text":i="string"}b.addColumn(i||typeof k[0][c]||c===0&&"string"||"number",h.name)}b.addRows(k);(new google.visualization[g](document.getElementById(e))).draw(b,
d)})};JGM.exportToArray=function(e,b){for(var a,d=[],c,g,k=0,j=e.length,r,f=b.length;k<j;k++){c=e[k];r=0;for(a=[];r<f;r++)g=b[r],a.push(g in c?c[g]:null);d.push(a)}return d};var h={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(e){for(var b=0;b<e.length;b++){var a=
e[b].string,d=e[b].prop;this.versionSearchString=e[b].versionSearch||e[b].identity;if(a){if(a.indexOf(e[b].subString)!=-1)return e[b].identity}else if(d)return e[b].identity}},searchVersion:function(e){var b=e.indexOf(this.versionSearchString);return b==-1?void 0:parseFloat(e.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,
subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:window.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",
versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};h.init();JGM.browser=h;JGM.IE6=JGM.browser.browser==
"Explorer"&&JGM.browser.version<7;JGM.quirk=JGM.browser.browser=="Explorer"&&document.documentMode<7;JGM.getGridByElementId=function(e){for(var b=JGM.grids,a=0,d=b.length,c;a<d;a++)if(c=b[a],c.getElementId()==e)return c;return null}})();jx.grid.Cell={};
(function(){function f(a){this.grid=a.grid;this._datarow=a.datarow;this._colDef=a.colDef;this.__init(a)}goog.getObjectByName("jx.grid");var i=goog.getObjectByName("jx.util"),h=goog.getObjectByName("jx.lang.Disposable");goog.exportSymbol("jx.grid.Cell",f);goog.inherits(f,h);f.getInstance=function(a){return new f(a)};var e=f.prototype,b=h.prototype.dispose;e.dispose=function(){b.call(this)};e.__init=function(a){if(i.isNull(this._datarow))if(i.isNotNull(a.row))this._datarow=this.grid.dataMgr.getByIdx(a.row);else if(i.isNotNull(a.node))this._datarow=
this.grid.dataMgr.getByNode(a.node.parentNode);else if(i.isNotNull(a.$))this._datarow=this.grid.dataMgr.getByNode(a.$[0].parentNode);if(i.isNull(this._colDef))if(i.isNotNull(a.col))this._colDef=this.grid.colDefMgr.get(a.col);else if(i.isNotNull(a.node))this._colDef=this.grid.colDefMgr.get(i.index(a.node));else if(i.isNotNull(a.$))this._colDef=this.grid.colDefMgr.get(i.index(a.$[0]));if(i.isNullOr(this._datarow,this._colDef)&&i.isNotNull(a.event)&&(a=this.grid.view._getClosestCell(a.event.target),
i.isNotNull(a)))this._datarow=this.grid.dataMgr.getByNode(a.parentNode),this._colDef=this.grid.colDefMgr.get(i.index(a))};e.destroy=function(){this.dispose()};e.getRowIdx=function(){if(i.isNotNull(this._datarow))return this.grid.dataMgr.getIdx(this._datarow)};e.getColIdx=function(){if(i.isNotNull(this._colDef))return this.grid.colDefMgr.getIdx(this._colDef)};e.getNode=function(){if(i.isNotNullAnd(this._datarow,this._colDef))return this.grid.view.getCellByIdAndKey(this.grid.dataMgr.getId(this._datarow),
this._colDef.key)};e.getRowNode=function(){return this.grid.view.getRow(this._datarow)};e.get$=function(){var a=this.getNode();return a!==void 0?$(a):$([])};e.getDatarow=function(){return this._datarow};e.getColDef=function(){return this._colDef};e.getKey=function(){if(i.isNotNull(this._colDef))return this._colDef.key};e.getId=function(){return this.grid.dataMgr.getId(this._datarow)};e.getValue=function(){if(i.isNotNullAnd(this._datarow,this._colDef))return this._datarow[this._colDef.key]};e.isValid=
function(){return i.isNotNull(this.getNode())};e.isInvalid=function(){return i.isNull(this.getNode())};e.isEmpty$=function(){return this.get$().length===0};e.has$=function(){return this.get$().length!==0};e.equals=function(a){return a&&this._datarow&&this._datarow===a._datarow&&this._colDef&&this._colDef===a.__colDef}})();var Tracer={};
(function(){function f(){this.stack="";this.timers={}}var i=goog.getObjectByName("jx.util");goog.exportSymbol("Tracer",f);var h=f.prototype;h.print=function(e,b,a){e===void 0&&(e="");b===void 0&&(b="timer");a===void 0&&(a=!0);var d=this.timers[b],c=(new Date).getTime(),d=i.isNull(d)?0:c-d;i.print((this.stack.length>0?this.stack+" :: ":"")+e+", Time elapsed since last update: "+d+"ms");a&&(this.timers[b]=c)};h.addStack=function(e){this.stack=this.stack+" > "+e};h.removeStack=function(){this.stack=this.stack.substring(0,
this.stack.lastIndexOf(" > "))};h.clearStack=function(){this.stack=""}})();jx.grid.renderer={};
(function(){var f=goog.getObjectByName("jx.grid");goog.getObjectByName("jx.util");f=f.renderer={};goog.exportSymbol("jx.grid.renderer",f);f.selectBox=function(f){var h=f.mapping,e=f.attr,b=f["default"],a=f.style,d=f.callback,c,g,k,j=0,r=[],n=[],o="<select";if(e)for(k in e)e.hasOwnProperty(k)&&(o+=" "+k+'="'+e[k]+'"');if(a){o+=' style="';for(k in a)a.hasOwnProperty(k)&&(o+=k+":"+a[k]+";");o+='"'}o+=">";for(c in h)h.hasOwnProperty(c)&&(f=h[c],r.push(c),n.push(f),b==f&&(g=j),j++);return function(a){var b,
c,k=o;for(c=0;c<j;c++)if(a==n[c]){b=c;break}b===void 0&&(b=g);for(c=0;c<j;c++)k+='<option value="'+n[c]+'"',c===b&&(k+=' selected="selected"'),k+=">"+r[c]+"</option>";k+="</select>";d&&(b=[],b.push(k),Array.prototype.push.apply(b,arguments),k=d.apply(this,b));return k}}})();jx.events={};jx.events.EventDispatcher={};
(function(){function f(){}goog.getObjectByName("jx.grid");goog.getObjectByName("jx.util");var i=goog.getObjectByName("jx.lang.Disposable");goog.exportSymbol("jx.events.EventDispatcher",f);goog.inherits(f,i);var h=f.prototype,e=i.prototype.dispose;h.dispose=function(){e.call(this._handlers,-1,!0);e.call(this)};h.addEventListener=function(b,a){if(!b)throw Error("Invalid event type: "+b);if(typeof a!="function")throw Error("Event listener must be a function");if(!this._handlers)this._handlers={};var d=
this._handlers,b=(b+"").toLowerCase();d.hasOwnProperty(b)||(d[b]=[]);d=d[b];d.indexOf(a)===-1&&d.push(a)};h.removeEventListener=function(b,a){if(this._handlers){var b=(b+"").toLowerCase(),d=this._handlers;if(d.hasOwnProperty(b)){for(var c=d[b],g=-1;(g=c.indexOf(a,g+1))!==-1;)c.splice(g--,1);c.length===0&&delete d[b]}}};h.dispatchEvent=function(b){if(!b||!b.type)throw Error("Invalid event");if(!this._handlers){if(b.cancelable&&b.defaultPrevented)return!1;b.defaultAction&&b.defaultAction(this);return!0}var a=
this._handlers,d=(b.type+"").toLowerCase();b.target=this;if(a.hasOwnProperty(d))for(var a=a[d].slice(),d=0,c=a.length,g;d<c&&!b.stopPropagation;d++)g=a[d],g.handleEvent?g.handleEvent(b):g.call(this,b);if(b.cancelable&&b.defaultPrevented)return!1;b.defaultAction&&b.defaultAction(this);return!0}})();jx.grid.Column={};
(function(){function f(f){if(!(f.manager&&typeof f.manager=="object"))throw Error("Column needs a valid manager!");this.manager=f.manager;this.key=f.key+"";if(!this.key)throw Error("Column needs a non-empty key!");var e="column key="+this.key;if(this.manager.hasKey(this.key))throw Error("Duplicate column key!"+e);this.name=f.name?f.name+"":"";this.title=f.title?f.title+"":"";this.noName=!!f.noName;this.noTitle=!!f.noTitle;this.type=f.type+""||null;this.defaultValue=f.defaultValue;this.inputOnCreate=
!!f.inputOnCreate;this.width=(this.width=Number(f.width))||90;this.minW=(this.minW=Number(f.minW))||30;this.maxW=Number(f.maxW)||null;this.resizable=!!f.resizable;this.hidden=!!f.hidden;this.noSearch=!!f.noSearch;this.tooltipEnabled=!!f.tooltipEnabled;this.colClass=f.colClass+""||null;this.style=f.style+""||null;this.headerStyle=f.headerStyle+""||null;if(f.parser&&typeof f.parser!="function")throw Error("Invalid parser!"+e);this.parser=f.parser||null;if(f.validator&&typeof f.validator!="function")throw Error("Invalid validator!"+
e);this.validator=f.validator||null;if(f.renderer&&typeof f.renderer!="function")throw Error("Invalid renderer!"+e);this.renderer=f.renderer||null;if(f.sumRenderer&&typeof f.sumRenderer!="function")throw Error("Invalid sum renderer!"+e);this.sumRenderer=f.sumRenderer||null;if(f.editor&&typeof f.editor!="object")throw Error("Invalid editor!"+e);this.editor=f.editor||null;this.sorter=f.sorter||null;this.filter=f.filter||null}var i=goog.getObjectByName("jx.events.EventDispatcher");goog.exportSymbol("jx.grid.Column",
f);goog.inherits(f,i);i=f.prototype;i.show=function(){return this.hidden?(this.hidden=!1,this.dispatchEvent({type:"hidden",value:!1}),!0):!1};i.hide=function(){return!this.hidden?(this.hidden=!0,this.dispatchEvent({type:"hidden",value:!0}),!0):!1};i.setHidden=function(f){return f?this.hide():this.show()};i.setWidth=function(f){return(f=Number(f))&&this.width!==f?(this.width=f,this.dispatchEvent({type:"width",value:f}),f):!1};i.setRenderer=function(f){if(this.renderer!==f){if(f&&typeof f!="function")throw Error("Invalid renderer!column key="+
this.key);this.renderer=f||null;this.dispatchEvent({type:"renderer",value:f})}}})();jx.grid.BaseModule={};
(function(){function f(e){if(e){if(e.mid!=null)this.mid=e.mid;if(e.grid)this.grid=e.grid}this._view=this._evtmgr=this._colmgr=this._datamgr=null;var b=this._defaultOptions&&this._defaultOptions(e.grid),a=e&&e.options;if(a||b)b||(b={}),a&&$.extend(!0,b,a),this._options=b,this.dispatchEvent({type:"afteroption",options:b});this._init&&(this.dispatchEvent({type:"beforeinit"}),this._init(e),this.dispatchEvent({type:"afterinit"}));var d=this,c=this.grid;c&&["Dispose","CreateCss","CreateDynamicCss","Render",
"Keydown","Keyup","Keypress","Mousein","Mouseout","Mouseenter","Mouseleave","Mousemove","Mouseover","Mousedown","Mouseup","Click","Dblclick","Resize","ResizeWidth","ResizeHeight","Scroll","ScrollH","ScrollV"].forEach(function(a){var b="before"+a,a="after"+a,j="_"+b,e="_"+a;d[j]&&c.addEventListener(b,function(a){return d[j](a)});d[e]&&c.addEventListener(a,function(a){return d[e](a)})});this._bindEvents&&(this.dispatchEvent({type:"beforebindevents"}),this._bindEvents(e),this.dispatchEvent({type:"afterbindevents"}));
this.dispatchEvent({type:"complete"})}var i=goog.getObjectByName("jx.events.EventDispatcher");goog.exportSymbol("jx.grid.BaseModule",f);goog.inherits(f,i);var i=f.prototype,h=i.dispose;i._beforeDispose=function(){this.dispose()};i.dispose=function(){delete this.grid;delete this._datamgr;delete this._colmgr;delete this._evtmgr;delete this._view;this.dispatchEvent({type:"beforedispose"});h.call(this)};i.getDataMgr=function(){return this._datamgr||(this._datamgr=this.grid.dataMgr)};i.getAllData=function(){return this.getDataMgr().all};
i.getDataList=function(){return this.getDataMgr().datalist};i.getIdKey=function(){return this.getDataMgr().idKey};i.getColMgr=function(){return this._colmgr||(this._colmgr=this.grid.colDefMgr)};i.getColumns=function(){return this.getColMgr().get()};i.getEventMgr=function(){return this._evtmgr||(this._evtmgr=this.grid.event)};i.getView=function(){return this._view||(this._view=this.grid.view)};i.getHeader=function(){return this.grid.header};i.bindGridEvent=function(){var e=this.getEventMgr();return e.bind.apply(e,
arguments)};i.triggerGridEvent=function(){var e=this.getEventMgr();return e.trigger.apply(e,arguments)};i.toCssStyle=function(e,b,a){var d=[];a||(e="#"+this.grid.mid+" "+e);if(typeof b!="string"){var c,a="";b.hasOwnProperty("_prepend")&&(b._prepend&&d.push(b._prepend),delete b._prepend);b.hasOwnProperty("_append")&&(b._append&&(a=";"+b._append),delete b._append);for(c in b)d.push(c+":"+b[c]);d=d.join(";")+a}return e+"{"+d+"}"};i.toCssStyles=function(e,b,a){var e=e||[],d;for(d in b)e.push(this.toCssStyle(d,
b[d],a));return e}})();jx.data={};jx.data.DataManager={};
(function(){function f(b){this.mid=b.mid;this.grid=b.grid;this.grid.dataMgr=this;this.all=[];this.datalist=[];this.failed=[];this._options=i._extend({idKey:void 0,idColKeys:[],uniqueKeys:[]},b.options);this._consts={_auto:0,_given:1,_composite:2,_notReal:this.mid+"@NR"+h.random(1E4),_add:0,_addList:1,_update:2,_updateList:3,_remove:4,_removeList:5,unknown:0,number:1,string:2,"boolean":3,date:4,"enum":5};this._options.idKey!=null?(this._idMode=this._consts._given,this.idKey=this._options.idKey):(this._idMode=
this._options.idColKeys.length!==0?this._consts._composite:this._consts._auto,this.idKey="J@I"+this.mid+"@"+h.random(1E4));this._increment=1;this._idToIdx={};this._idToData={};this._sorters=[];this._filters=[];this._history=[];this._redoHistory=[];this.uniqueMap=!1;this.__init(b)}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.Grid");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.data.DataManager",f);i._add("DataManager",f);f.getInstance=
function(b){return new f(b)};var e=f.prototype;e.__init=function(b){var a=this.uniqueMap={},d=0,c,g=this._options.uniqueKeys,k=!1;if(g&&g.length){k=!0;for(c=g.length;d<c;d++)a[g[d]]={}}var g=this.grid.colDefMgr.getAll(),j,d=0;for(c=g.length;d<c;d++)j=g[d],j.unique&&(k=!0,a[j.key]={});if(!k)this.uniqueMap=!1;this.bindEvents();this.set(b.datalist)};e.bindEvents=function(){this.grid.event.bind({onDestroy:this._destroy,keydownCanvas:this._keydownCanvas},this)};e._destroy=function(){this.cleanList(this.all);
i._destroy(this,{name:"DataManager",path:"dataMgr",property:"all _idMode _increment idKey",map:"_consts _idToIdx _idToData _options",array:"datalist failed _history _redoHistory _filters _sorters"})};e.addUniqueIndex=function(b,a,d){if(!d.hasOwnProperty(a))return this.grid.error("KEY_UNDEFINED",a);var c=d[a];if(c==null||c==="")return this.grid.error("BAD_NULL",a);if(b.hasOwnProperty(c))return b[c]===d?!1:this.grid.error("DUP_ENTRY",c,a);b[c]=d;return!0};e.addUniqueIndices=function(b,a,d){var c,g=
d.length,k=[],j,e;for(c=0;c<g;c++)if(e=d[c])if(j=this.addUniqueIndex(b,a,e)){if(j instanceof Error)return this.removeUniqueIndices(b,a,k),j;k.push(b[e[a]]=e)}return k.length>0};e.updateUniqueIndex=function(b,a,d,c,g){if(c.hasOwnProperty(a)){if(!g.hasOwnProperty(a)||!d.hasOwnProperty(a))return this.grid.error("KEY_UNDEFINED",a);if(!b.hasOwnProperty(g=g[a]))return this.grid.error("KEY_NOT_FOUND",g,a);c=c[a];if(c==null||c==="")return this.grid.error("BAD_NULL",a);if(b.hasOwnProperty(c))return b[c]===
d?!1:this.grid.error("DUP_ENTRY",c,a);b[c]=d;delete b[g];return g}return!1};e.updateUniqueIndices=function(b,a,d,c,g,k){if(k!==!0){if(h.isEmptyObj(b)||h.isEmptyString(a)||h.isEmptyArray(d)||h.isEmptyArray(c)||h.isEmptyArray(g))return!1;if(d.length!==c.length||d.length!==g.length)return this.grid.error("LENGTH_NOT_EQUAL")}for(var k=0,j=d.length,e,f,i,p=[],l=[],m=[],q,s;k<j;k++)if(!h.isNull(e=d[k]))if((i=c[k]).hasOwnProperty(a)){f=g[k];if(!f.hasOwnProperty(a)||!e.hasOwnProperty(a))return this.updateUniqueIndices(b,
a,p,m,l),this.grid.error("KEY_UNDEFINED",a);if(!b.hasOwnProperty(s=f[a]))return this.updateUniqueIndices(b,a,p,m,l),this.grid.error("KEY_NOT_FOUND",s,a);if(h.isEmptyString(q=i[a]))return this.updateUniqueIndices(b,a,p,m,l),this.grid.error("BAD_NULL",a);if(b.hasOwnProperty(q)){if(b[q]===e)continue;this.updateUniqueIndices(b,a,p,m,l);return this.grid.error("DUP_ENTRY",q,a)}b[q]=e;delete b[s];p.push(e);l.push(i);m.push(f)}return!p.length?!1:{datalist:p,changes:l,befores:m}};e.removeUniqueIndex=function(b,
a,d){var c;d.hasOwnProperty(a)&&b.hasOwnProperty(c=d[a])&&delete b[c]};e.removeUniqueIndices=function(b,a,d,c){if(!(c!==!0&&(h.isEmptyObj(b)||h.isEmptyString(a)||h.isEmptyArray(d))))for(var g=d.length,k,j,c=0;c<g;c++)j=d[c],j.hasOwnProperty(a)&&b.hasOwnProperty(k=j[a])&&delete b[k]};e.addToUniqueMap=function(b){if(this.uniqueMap){var a=[],d,c=this.uniqueMap,g;for(d in c)if(c.hasOwnProperty(d)&&(g=this.addUniqueIndex(c[d],d,b))){if(g instanceof Error){d=0;for(var k=a.length;d<k;d++)this.removeUniqueIndex(c[a[d]],
a[d],b);return g}a.push(d)}return a.length>0}return!1};e.addListToUniqueMap=function(b){if(this.uniqueMap){var a=this.uniqueMap,d=[],c,g;for(c in a)if(a.hasOwnProperty(c)&&(g=this.addUniqueIndices(a[c],c,b))){if(g instanceof Error){c=0;for(var k=d.length;c<k;c++)this.removeUniqueIndices(a[d[c]],d[c],b);return g}d.push(c)}return d.length>0}return!1};e.updateUniqueMap=function(b,a,d){if(this.uniqueMap){var c,g=this.uniqueMap,k=[],j;for(c in g)if(g.hasOwnProperty(c)&&(j=this.updateUniqueIndex(g[c],c,
b,a,d))){if(j instanceof Error){c=0;for(var e=k.length;c<e;c++)this.updateUniqueIndex(g[k[c]],k[c],b,d,a);return j}k.push(c)}return k.length>0}return!1};e.updateListUniqueMap=function(b,a,d){if(this.uniqueMap){var c,g=this.uniqueMap,k=[],j;for(c in g)if(g.hasOwnProperty(c)&&(j=this.updateUniqueIndices(g[c],c,b,a,d))){if(j instanceof Error){c=0;for(var e=k.length;c<e;c++)this.updateUniqueIndices(g[k[c]],k[c],b,d,a);return j}k.push(c)}return k.length>0}return!1};e.removeFromUniqueMap=function(b){if(this.uniqueMap){var a,
d=this.uniqueMap;for(a in d)d.hasOwnProperty(a)&&this.removeUniqueIndex(d[a],a,b)}};e.removeListFromUniqueMap=function(b){if(this.uniqueMap){var a,d=this.uniqueMap;for(a in d)d.hasOwnProperty(a)&&this.removeUniqueIndices(d[a],a,b)}};e.addToIdMap=function(b){var a=this.idKey;switch(this._idMode){case this._consts._auto:b.hasOwnProperty(a)||(b[a]=this._increment++);case this._consts._given:case this._consts._composite:return this.addUniqueIndex(this._idToData,a,b)}return!1};e.addListToIdMap=function(b){var a=
this.idKey;switch(this._idMode){case this._consts._auto:for(var d=0,c,g=b.length;d<g;d++)if(!(c=b[d]).hasOwnProperty(a))c[a]=this._increment++;case this._consts._given:case this._consts._composite:return this.addUniqueIndices(this._idToData,a,b)}return!1};e.updateIdMap=function(b,a,d){if(h.isNullOr(b,d)||h.isEmptyObj(a))return!1;var c=this.idKey;switch(this._idMode){case this._consts._auto:if(a.hasOwnProperty(c))return this.grid.error("NOT_MODIFIABLE",c);case this._consts._given:return this.updateUniqueIndex(this._idToData,
c,b,a,d);case this._consts._composite:if(a.hasOwnProperty(c))return this.grid.error("NOT_MODIFIABLE",c);for(var d=this._options.idColKeys,g=d.length,k=0;k<g;k++)if(a.hasOwnProperty(d[k])){for(var j="",e=0,f,i,p={},l={},k=l[c]=b[c];e<g;e++)if(f=d[e],a.hasOwnProperty(f)){if(h.isEmptyString(i=a[f]))return this.grid.error("BAD_NULL",f);j+="&"+i}else j+="&"+b[f];b[c]=p[c]=j;if(k===j)break;a=this.updateUniqueIndex(this._idToData,c,b,p,l);a instanceof Error&&(b[c]=k);return a}}return!1};e.updateListIdMap=
function(b,a,d){if(h.isEmptyArray(b)||h.isEmptyArray(a)||h.isEmptyArray(d))return!1;var c=this.idKey,g=b.length,k=0;switch(this._idMode){case this._consts._auto:for(;k<g;k++)if(a[k].hasOwnProperty(c))return this.grid.error("NOT_MODIFIABLE",c);case this._consts._given:return this.updateUniqueIndices(this._idToData,c,b,a,d);case this._consts._composite:for(var j=this._idToData,e,f,i=this._options.idColKeys,p=i.length,l,d=[],m=[],q=[],s=[],t,u,w,v;k<g;k++){e=b[k];f=a[k];if(f.hasOwnProperty(c)){t=0;for(g=
d.length;t<g;t++)m[t][c]=d[t];return this.grid.error("NOT_MODIFIABLE",c)}for(t=0;t<p;t++)if(f.hasOwnProperty(i[t])){l="";for(u=0;u<p;u++)if(w=i[u],f.hasOwnProperty(w)){if(h.isEmptyString(v=f[w])){t=0;for(g=d.length;t<g;t++)m[t][c]=d[t];return this.grid.error("BAD_NULL",w)}l+="&"+v}else l+="&"+e[w];e[c]!==l&&(m.push(e),q.push({}),s.push({}),d.push(e[c]),e[c]=l)}}if(!m.length)break;b=this.updateUniqueIndices(j,c,m,q,s);if(b instanceof Error){t=0;for(g=d.length;t<g;t++)m[t][c]=d[t]}return b}return!1};
e.removeFromIdMap=function(b){var a=this.idKey,d=this._idToData,c;h.isNotNull(b)&&b.hasOwnProperty(a)&&d.hasOwnProperty(c=b[a])&&delete d[c]};e.removeListFromIdMap=function(b){if(!h.isEmptyArray(b))for(var a=this.idKey,d=b.length,c=this._idToData,g,k,j=0;j<d;j++)k=b[j],k.hasOwnProperty(a)&&c.hasOwnProperty(g=k[a])&&delete c[g]};e.fillTemp=function(b,a){var d=this.grid.colDefMgr.getAll(),c=d.length,g,k,j=0;if(a&&a.isNew)for(;j<c;j++)k=d[j],g=k.key,k.nullOnCreate&&b[g]==null&&(b[g]="J@H"+this._increment++)};
e.fillTempList=function(b,a){var d=this.grid.colDefMgr.getAll(),c=d.length,g=b.length,k,j,e=0;if(a&&a.isNew)for(;e<c;e++)if(j=d[e],k=j.key,j.nullOnCreate)for(j=0;g;j++)b[j][k]="J@H"+this._increment++};e.query=function(b){if(typeof b==="string"&&(b=$.trim(b),b.length)){var a,d,c,g,k;a=b.toLowerCase();d=b.indexOf(" ");if(d!==-1&&(c=a.substring(0,d),a=a.indexOf(" where "),g=a>-1,d=$.trim(g?b.substring(d+1,a):b.substring(d+1)),d.length))switch(g&&(k=$.trim(b.substring(a+7))),c){case "select":return this.executeSelect(d,
k);case "insert":return this.executeInsert(d,k);case "update":return this.executeUpdate(d,k);case "delete":return this.executeDelete(d,k)}}};e.parseWhere=function(b){typeof b==="string"&&$.trim(b)};e.executeSelect=function(b){var b=h.split(b,/[\s,]+/),a=b.length,d=0,c={},g=this.all,k=[];if(!a)return k;for(;d<a;d++){if(b[d]==="*")break;c[b[d]]=!0}d=0;for(a=g.length;d<a;d++)k.push(h.clone(g[d],c));return k};e.parse=function(b,a){var d=this.grid.colDefMgr,c=d.getParser(),d=d.getNullOnCreate(),g,k=a&&
a.isNew;try{for(g in c)if(c.hasOwnProperty(g)&&(!k||!d.hasOwnProperty(g)))b[g]=c[g](b[g],b)}catch(j){return this.grid.error("PARSE_ERROR",b[g],g)}return!0};e.parseList=function(b,a){var d=this.grid.colDefMgr,c=d.getParser(),d=d.getNullOnCreate(),g,k,j=a&&a.isNew,e,f=b.length,h;try{for(g in c)if(c.hasOwnProperty(g)&&(!j||!d.hasOwnProperty(g))){k=c[g];for(e=0;e<f;e++)h=b[e],h[g]=k(h[g],h)}}catch(i){return this.grid.error("PARSE_ERROR",h[g],g)}return!0};e.validate=function(b,a){var d=this.grid.colDefMgr,
c=d.getValidator(),d=d.getNullOnCreate(),g,k,j,e,f,h=a&&a.isNew;try{for(g in c)if(c.hasOwnProperty(g)&&(!h||!d.hasOwnProperty(g)))if(b.hasOwnProperty(g)&&(k=b[g])!=null?(e=!1,j=typeof k=="string"?k:k.toString(),f=!j):(k=null,f=e=!0,j=""),!c[g](k,b,j,e,f))return this.grid.error("WRONG_VALUE",j,g)}catch(i){return this.grid.error("WRONG_VALUE",j,g)}return!0};e.validateList=function(b,a){var d=this.grid.colDefMgr,c=d.getValidator(),d=d.getNullOnCreate(),g,k,j=a&&a.isNew,e,f=b.length,h,i,l,m,q;try{for(g in c)if(c.hasOwnProperty(g)&&
(!j||!d.hasOwnProperty(g))){k=c[g];for(e=0;e<f;e++)if(q=b[e],q.hasOwnProperty(g)&&(h=q[g])!=null?(l=!1,i=typeof h=="string"?h:h.toString(),m=!i):(h=null,m=l=!0,i=""),!k(h,q,i,l,m))return this.grid.error("WRONG_VALUE",i,g)}}catch(s){return this.grid.error("WRONG_VALUE",i,g)}return!0};e.makeCompositeKey=function(b,a){if(this._idMode===this._consts._composite&&(a||!b.hasOwnProperty(this.idKey))){for(var d=this._options.idColKeys,c=d.length,g=0,k="";g<c;g++)k+="&"+b[d[g]];b[this.idKey]=k}};e.makeCompositeKeyList=
function(b,a){if(this._idMode===this._consts._composite){var d=this.idKey,c=b.length,g=this._options.idColKeys,k=g.length,j,e=0,f,h;if(a)for(;e<c;e++){j=b[e];h="";for(f=0;f<k;f++)h+="&"+j[g[f]];j[d]=h}else for(;e<c;e++)if(!(j=b[e]).hasOwnProperty(d)){h="";for(f=0;f<k;f++)h+="&"+j[g[f]];j[d]=h}}};e.map=function(b){if(b){var a=this._idToData,d=this.idKey,c;this.makeCompositeKey(b);if(b.hasOwnProperty(d)&&a.hasOwnProperty(c=b[d]))return a[c]}return null};e.mapList=function(b){if(b&&b.length){this.makeCompositeKeyList(b);
for(var a=[],d=[],c=this.idKey,g=this._idToData,k=b.length,j=0,e,f;j<k;j++)(e=b[j]).hasOwnProperty(c)&&g.hasOwnProperty(f=e[c])?a.push(g[f]):d.push(e);return{mapped:a,unmapped:d}}return{mapped:[],unmapped:[]}};e.getById=function(b){return b!=null&&this._idToData.hasOwnProperty(b)?this._idToData[b]:null};e.getByIdx=function(b){return b!=null&&this.datalist.hasOwnProperty(b)?this.datalist[b]:null};e.getByNode=function(b){return this.getById(this.getIdByNode(b))};e.getIdx=function(b){return this.getIdxById(this.getId(b))};
e.getIdxById=function(b){return b!=null&&this._idToIdx.hasOwnProperty(b)?this._idToIdx[b]:-1};e.getIdxByNode=function(b){return this.getIdxById(this.getIdByNode(b))};e.getId=function(b){return b&&b.hasOwnProperty(this.idKey)?b[this.idKey]:null};e.getIdByIdx=function(b){return this.getId(this.getByIdx(b))};e.getIdByNode=function(b){return b?b.getAttribute("i"):null};e._reidxFrom=function(b){for(var a=this.datalist,d=a.length,c=this.idKey,g=this._idToIdx,b=b||0;b<d;b++)g[a[b][c]]=b};e._reidx=function(){this._idToIdx=
{};this._reidxFrom()};e.has=function(b){return this.hasById(this.getId(b))};e.hasById=function(b){return b==null?!1:this._idToIdx.hasOwnProperty(b)};e.contains=function(b){return this.containsById(this.getId(b))};e.containsById=function(b){return b==null?!1:this._idToData.hasOwnProperty(b)};e.set=function(b){var a=this.all;if(a===b||!a.length&&(!b||!b.length))return!1;var b=b||[],d=this.grid.event;d.trigger("onBeforeDataChange",!1,!0);d.trigger("onBeforeSetDatalist",[a,b],!0);this.cleanList(a);if(this.uniqueMap){var c,
a=this.uniqueMap;for(c in a)a.hasOwnProperty(c)&&(a[c]={})}this._idToData={};this._history.length=0;this._redoHistory.length=0;if(b.length){if((c=this.parseList(b))instanceof Error)return c;if((c=this.validateList(b))instanceof Error)return c;if((c=this.addListToUniqueMap(b))instanceof Error)return c;this.makeCompositeKeyList(b,!0);if((c=this.addListToIdMap(b))instanceof Error)return c}this.all=b;d.trigger("onAfterSetDatalist",[b],!0);d.trigger("onDataChange",!1,!0);this.refresh();return!0};e.add=
function(b,a){if(!b||this.map(b))return!1;var d=this.grid.event;d.trigger("onBeforeDataChange",!1,!0);this.fillTemp(b,a);var c;if((c=this.parse(b,a))instanceof Error)return c;if((c=this.validate(b,a))instanceof Error)return c;if((c=this.addToUniqueMap(b))instanceof Error)return c;if((c=this.addToIdMap(b))instanceof Error)return c;this.all.push(b);if(!a||a.undo!==!0)this._history.push({_action:this._consts._add,_target:b}),this._redoHistory.length=0;d.trigger("onAddDatarow",[b,a],!0);d.trigger("onDataChange",
!1,!0);(!a||a.noRefresh!==!0)&&this.refresh(a);return!0};e.addList=function(b,a){if(b&&b.length){var d=this.mapList(b).unmapped;if(!d.length)return!1;this.grid.event.trigger("onBeforeDataChange",!1,!0);this.fillTempList(b,a);var c;if((c=this.parseList(d,a))instanceof Error)return c;if((c=this.validateList(d,a))instanceof Error)return c;if((c=this.addListToUniqueMap(d))instanceof Error)return c;if((c=this.addListToIdMap(d))instanceof Error)return c;this.all.pushList(d);if(!a||a.undo!==!0)this._history.push({_action:this._consts._addList,
_target:d}),this._redoHistory.length=0;this.grid.event.trigger("onAddDatalist",[d,a],!0);this.grid.event.trigger("onDataChange",!1,!0);(!a||a.noRefresh!==!0)&&this.refresh(a);return!0}return!1};e.updateByKey=function(b,a,d,c){var g={};g[a]=d;return this.update(b,g,c)};e.update=function(b,a,d){if(!b||!a)return!1;this.grid.event.trigger("onBeforeDataChange",!1,!0);this.grid.event.trigger("onBeforeUpdateDatarow",[b,a],!0);var c={},g;for(g in a)a.hasOwnProperty(g)&&(b[g]===a[g]?delete a[g]:(c[g]=b[g],
b[g]=a[g]));if(h.isEmptyObj(c))return!1;if((g=this.parse(b,d))instanceof Error)return this._rollback(b,c),g;if((g=this.validate(b,d))instanceof Error)return this._rollback(b,c),g;if((g=this.updateUniqueMap(b,a,c))instanceof Error)return this._rollback(b,c),g;if((g=this.updateIdMap(b,a,c))instanceof Error)return this._rollback(b,c),g;g!==!1&&this.grid.event.trigger("onIdChange",[b,g,b[this.idKey]],!0);if(!d||d.undo!==!0)this._history.push({_action:this._consts._update,_target:b,_before:c,_change:a}),
this._redoHistory.length=0;this.grid.event.trigger("onUpdateDatarow",[b,a,c,d],!0);this.grid.event.trigger("onDataChange",!1,!0);(!d||d.noRefresh!==!0)&&this.refresh(d);return!0};e.updateList=function(b,a){if(!b||!b.length)return!1;var d=this.grid.event;d.trigger("onBeforeDataChange",!1,!0);d.trigger("onBeforeUpdateDatalist",[b],!0);for(var c=[],g=[],k=[],j,e,f,i=b.length,p=0,l;p<i;p++){e={};j=b[p].datarow;f=b[p].change;for(l in f)f.hasOwnProperty(l)&&(j[l]===f[l]?delete f[l]:(e[l]=j[l],j[l]=f[l]));
h.isNotEmptyObj(e)&&(c.push(j),g.push(e),k.push(f))}if(!c.length)return!1;if((j=this.parseList(c,a))instanceof Error)return this._rollbackList(c,g),j;if((j=this.validateList(c,a))instanceof Error)return this._rollbackList(c,g),j;if((j=this.updateListUniqueMap(c,k,g))instanceof Error)return this._rollbackList(c,g),j;if((j=this.updateListIdMap(c,k,g))instanceof Error)return this._rollbackList(c,g),j;j!==!1&&d.trigger("onIdListChange",[j.list,j.befores,this.idKey],!0);if(!a||a.undo!==!0)this._history.push({_action:this._consts._updateList,
_target:c,_before:g,_change:k}),this._redoHistory.length=0;d.trigger("onUpdateDatalist",[c,k,g,a],!0);d.trigger("onDataChange",!1,!0);(!a||a.noRefresh!==!0)&&this.refresh(a);return!0};e._rollback=function(b,a){for(var d in a)a.hasOwnProperty(d)&&(b[d]=a[d])};e._rollbackList=function(b,a){for(var d=b.length,c=0,g,k,j;c<d;c++)for(j in g=b[c],k=a[c],k)k.hasOwnProperty(j)&&(g[j]=k[j])};e.remove=function(b,a){var d=this.map(b);if(d){this.grid.event.trigger("onBeforeDataChange",!1,!0);this.removeFromIdMap(d);
this.removeFromUniqueMap(d);this.all.remove(d);if(!a||a.undo!==!0)this._history.push({_action:this._consts._remove,_target:d}),this._redoHistory.length=0;this.grid.event.trigger("onRemoveDatarow",[d,a],!0);this.grid.event.trigger("onDataChange",!1,!0);(!a||a.noRefresh!==!0)&&this.refresh(a);this.removeId(d);return!0}return!1};e.removeList=function(b,a){if(b&&b.length){var d=this.mapList(b).mapped;if(d.length){this.grid.event.trigger("onBeforeDataChange",!1,!0);this.removeListFromIdMap(d);this.removeListFromUniqueMap(d);
this.all.removeList(d);if(!a||a.undo!==!0)this._history.push({_action:this._consts._removeList,_target:d}),this._redoHistory.length=0;this.grid.event.trigger("onRemoveDatalist",[d,a],!0);this.grid.event.trigger("onDataChange",!1,!0);(!a||a.noRefresh!==!0)&&this.refresh(a);this.cleanList(d);return!0}}return!1};e._keydownCanvas=function(b){if(b.ctrlKey)switch(b.which){case "Z".charCodeAt(0):this.undo();break;case "Y".charCodeAt(0):this.redo()}};e.undo=function(){if(!this._history.length)return!1;var b=
this._history.pop();this._redoHistory.push(b);var a=b._target,d=b._before;switch(b._action){case this._consts._add:return this.remove(a,{undo:!0});case this._consts._addList:return this.removeList(a,{undo:!0});case this._consts._update:return this.update(a,d,{undo:!0});case this._consts._updateList:for(var b=[],c=0,g=a.length;c<g;c++)b.push({datarow:a[c],change:d[c]});return this.updateList(b,{undo:!0});case this._consts._remove:return this.add(a,{undo:!0});case this._consts._removeList:return this.addList(a,
{undo:!0})}};e.redo=function(){if(!this._redoHistory.length)return!1;var b=this._redoHistory.pop();this._history.push(b);var a=b._target,d=b._change;switch(b._action){case this._consts._add:return this.add(a,{undo:!0});case this._consts._addList:return this.addList(a,{undo:!0});case this._consts._update:return this.update(a,d,{undo:!0});case this._consts._updateList:for(var b=[],c=0,g=a.length;c<g;c++)b.push({datarow:a[c],change:d[c]});return this.updateList(b,{undo:!0});case this._consts._remove:return this.remove(a,
{undo:!0});case this._consts._removeList:return this.removeList(a,{undo:!0})}};e.equals=function(b,a){if(b&&a){if(b===a)return!0;this._idMode===this._consts._composite&&(this.makeCompositeKey(b),this.makeCompositeKey(a));var d=this.idKey,c=b[d];return c==null?!1:c===a[d]}return!1};e.getReal=function(){var b=this._consts._notReal;return this.all.filter(function(a){return!a.hasOwnProperty(b)})};e.filterReal=function(b){var a=this._consts._notReal;return b.filter(function(d){return!d.hasOwnProperty(a)})};
e.isReal=function(b){return b&&!b.hasOwnProperty(this._consts._notReal)};e.dropNonReal=function(b){if(b&&b.length)for(var a=this._consts._notReal,d=b.length-1;d>=0;d--)b[d].hasOwnProperty(a)&&(delete b[d][a],b.removeAt(d))};e.removeIdCol=function(b){if(!(this._idMode===this._consts._given||!b||!b.length))for(var a=this.idKey,d=0,c=b.length;d<c;d++)b[d].hasOwnProperty(a)&&delete b[d][a]};e.removeId=function(b){b&&this._idMode!==this._consts._given&&b.hasOwnProperty(this.idKey)&&delete b[this.idKey]};
e.cleanList=function(b){b&&b.length&&(this.removeIdCol(b),this.dropNonReal(b))};e.setSorters=function(b){this.grid.event.trigger("onChangeSorter",[this._sorters,b],!0);this._sorters=b};e.setSorter=function(b){this.setSorters([b])};e._sort=function(b){var a=function(a){return a.comparator?a.desc?function(d,b){return-a.comparator(d,b)}:a.comparator:a.lexi?a.desc?function(d,b){return-(d[a.key]+"").localeCompare(b[a.key])}:function(d,b){return(d[a.key]+"").localeCompare(b[a.key])}:function(a,d){return a-
d}};b?this.setSorters(b):b=this._sorters;if(b){var d=this.all,c=this.grid.event,g=[d],k=[],j=b.length,e;c.trigger("onBeforeSort",g,!0);if(j>0){for(e=0;e<j;e++)k.push(a(b[e]));h.compositeSort.call(null,d,k)}c.trigger("onAfterSort",g,!0)}};e.addFilter=function(b){this._filters.push(b);this.refresh()};e.removeFilter=function(b){var a=this._filters.length;this._filters.remove(b);a!==this._filters.length&&this.refresh()};e._filter=function(){var b=this.datalist,a=this.failed,d=0,c=this._filters.length,
g,k;this.grid.event.trigger("onBeforeFilter",[b,a],!0);b.length=0;b.pushList(this.all);for(a.length=0;d<c;d++){g=this._filters[d];for(k=b.length-1;k>=0;k--)g(b[k])||(a.push(b[k]),b.removeAt(k))}this.grid.event.trigger("onFilter",[b,a],!0);this.grid.event.trigger("onAfterFilter",[b,a],!0)};e._finish=function(b){this._reidx();this.grid.event.trigger("onAfterRefresh",[b],!0)};e.refresh=function(b){this.grid.event.trigger("onBeforeRefresh",!1,!0);b?b.noSort||(b.sorter?this._sort([b.sorter]):this._sort(b.sorters)):
this._sort();(!b||!b.noFilter)&&this._filter();this._finish(b)};e.exportRowToArray=function(b,a){if(!(b in this.datalist))return null;a||(a=this.grid.colDefMgr.getKeys());for(var d=this.datalist[b],c=[],g,k=0,j=a.length;k<j;k++)g=a[k],c.push(g in d?d[g]:null);return c};e.exportToArray=function(b,a,d,c){for(var b=b||this.grid.colDefMgr.getKeys(),c=c||this.datalist.slice(a,d),d=[],g,k,j=0,e=c.length,f,h=b.length;j<e;j++){g=c[j];f=0;for(a=[];f<h;f++)k=b[f],a.push(k in g?g[k]:null);d.push(a)}return d};
e.select=function(b,a,d,c){for(var b=b||this.grid.colDefMgr.getKeys(),c=c||this.datalist.slice(a,d),d=[],g,k,j=0,e=c.length,f,h=b.length;j<e;j++){g=c[j];f=0;for(a={};f<h;f++)k=b[f],a[k]=g.hasOwnProperty(k)&&g[k]!=null?g[k]:null;d.push(a)}return d};e.slice=function(b,a){return this.select(null,b,a)};f._lexi=function(b,a,d){var c=Object.prototype.toString;Object.prototype.toString=typeof a=="function"?a:function(){return this[a]};b.sort();Object.prototype.toString=c;d&&b.reverse()}})();var TimeWatch={};
(function(){function f(f){var e=this.laps=[];this._stopped=!1;e.push(f||null,(new Date).getTime())}goog.exportSymbol("TimeWatch",f);var i=f.prototype;i.lap=function(f){if(this._stopped)throw Error("TimeWatch was stopped, thus cannot lap. Please reset!");this.laps.push(f||null,(new Date).getTime())};i.stop=function(f){this._stopped=!0;this.laps.push(f||null,(new Date).getTime())};i.reset=function(f){var e=this.laps;e.length=0;this._stopped=!1;e.push(f||null,(new Date).getTime())};i.toString=function(){var f=
this.laps,e=f.length,b=2,a=e-(this._stopped?2:0),d=f[0],c=f[1],g=c,e=e>2?[]:null,k=0,j="TimeWatch\n";for(j+="start"+(d?": "+d:"")+" @"+c+"\n";b<a;b+=2)d=(d=f[b])?": "+d:"",c=f[b+1],e.push(g=c-g),k+=g,j+="lap "+b/2+d+" @"+c+" +"+g+"ms\n",g=c;a>=2&&this._stopped&&(d=(d=f[a])?": "+d:"",c=f[a+1],e.push(g=c-g),k+=g,j+="stop"+d+" @"+c+" +"+g+"ms\n");if(e){var f=e.length,r=k/f,n=0;j+="total number of laps: "+f+"\n";j+="total elapsed time: "+k+"ms\n";j+="average lap time: "+r.toFixed(2)+"ms\n";e.forEach(function(a){n+=
(a-r)*(a-r)});n=Math.sqrt(n/f);j+="standard deviation: "+n.toFixed(2)+"ms\n"}return j}})();jx.grid.EventManager={};
(function(){function f(b){this.mid=b.mid;this.grid=b.grid;b.grid.event=this;this._map={}}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.EventManager",f);f.getInstance=function(b){return new f(b)};var e=f.prototype;e.destroy=function(){var b,a=this._map;for(b in a)a.hasOwnProperty(b)&&i._deleteArray(a,b);i._destroy(this,{name:"EventManager",path:"event",map:"_map"})};e.register=function(b,a,d){if(h.isString(b))this._parseAndAdd(b,
a,d);else if(h.isNotNull(b.e))this._parseAndAdd(b.e,b.f,b.t);else for(var c,a=b.length,g;c<a;c++)h.isNotNull(g=b[c])&&this._parseAndAdd(g.e,g.f,g.t)};e.bind=function(b,a,d){if(h.isString(b))this._parseAndAdd(b,a,d);else for(var c in b)b.hasOwnProperty(c)&&this._parseAndAdd(c,b[c],a)};e._parseAndAdd=function(b,a,d){h.isNull(d)&&(d=window);var b=h.split(b),c=b.length,g=0;if(h.isFunction(a))for(;g<c;g++)this._addHandler(b[g],a,d);else if(h.isString(a))for(var a=h.split(a),k=a.length,j,e;g<c;g++){j=b[g];
for(e=0;e<k;e++)this._addHandler(j,d[a[e]],d)}else for(k=a.length;g<c;g++){j=b[g];for(e=0;e<k;e++)this._addHandler(j,a[e],d)}};e._addHandler=function(b,a,d){this._map.hasOwnProperty(b)||(this._map[b]=[]);this._map[b].push({fn:a,target:d})};e.unregister=function(b,a){var d=this._map;if(d.hasOwnProperty(b)){var c=d[b];if(h.isNull(a))c.length=0,delete d[b];else for(var g=0,k=c.length;g<k;g++)if(c[g].fn===a){c.removeAt(g);c.length===0&&delete d[b];break}}};e.trigger=function(b,a,d,c){var g=this._map;
if(g.hasOwnProperty(b)&&(b=g[b],g=b.length)){var k=0;if(d)if(a&&a.length)for(;k<g;k++)d=b[k],d.fn.apply(d.target,a);else for(;k<g;k++)d=b[k],d.fn.call(d.target);else{c=c||[];if(a&&a.length)for(;k<g;k++)d=b[k],c.push(d.fn.apply(d.target,a));else for(;k<g;k++)d=b[k],c.push(d.fn.call(d.target));return c}}};e.triggerMultiple=function(b,a,d){var b=b.split(","),c=0,g=b.length;if(d){for(d=[];c<g;c++)this.trigger(b[c],a,!1,d);return d}else for(;c<g;c++)this.trigger(b[c],a,!0)};e.triggerInvalid=function(b,
a){var d=this.trigger(b,a);return d&&d.some(function(a){return a===!1})};e.sendToBack=function(b,a){for(var d=this._map[b],c=d.length,g,k=-1,j=0;j<c;j++)if(d[j].fn===a){k=j;g=d[j];break}k>-1&&(d.removeAt(j),d.push(g))};e.sendToFront=function(b,a){for(var d=this._map[b],c=d.length,g,k=-1,j=0;j<c;j++)if(d[j].fn===a){k=j;g=d[j];break}k>-1&&(d.removeAt(j),d.unshift(g))}})();jx.grid.Grid={};
(function(){function f(a){this._origCtnr=a.container;this._origColDefs=h.deepClone(a.colDefs);this._origOpts=h.deepClone(a.options);this.mid=a.mid;e.call(this,a)}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("echo");var e=goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("TimeWatch");goog.exportSymbol("jx.grid.Grid",f);f.V_KEYDOWN=3;f.V_KEYPRESS=3;f.V_KEYUP=3;f.V_MOUSEMOVE=5;f.V_MOUSEOVER=4;f.V_MOUSEOUT=4;f.V_MOUSEIN=4;f.V_MOUSEDOWN=3;f.V_MOUSEUP=
3;f.V_MOUSEENTER=3;f.V_MOUSELEAVE=3;f.V_CLICK=2;f.V_DBLCLICK=2;f.V_RESIZE=2;f.V_INIT=1;goog.inherits(f,e);f.getInstance=function(a){return new f(a)};var b=f.prototype;b.reconstruct=function(a){a=a||{};a.datalist=a.datalist||this.dataMgr.all;a.container=a.container||this._origCtnr;a.colDefs=a.colDefs||this._origColDefs;a.options=a.options||this._origOpts;a.mid=this.mid;delete this._origCtnr;delete this._origColDefs;delete this._origOpts;this.destroy(!0);f.call(this,a)};b._defaultOptions=function(){return{classGrid:"jgrid",
border:"1px solid #868686",width:"",font:"15px Arial,Helvetica,sans-serif",style:"",borderSide:!0,imageUrl:"../images/",links:{data:"dataMgr.all",datalen:"dataMgr.all.length",shown:"dataMgr.datalist",set:"dataMgr.set",add:"dataMgr.add",addList:"dataMgr.addList",update:"dataMgr.update",updateByKey:"dataMgr.updateByKey",updateList:"dataMgr.updateList",remove:"dataMgr.remove",removeList:"dataMgr.removeList",select:"dataMgr.executeSelect",undo:"dataMgr.undo",redo:"dataMgr.redo",addFilter:"dataMgr.addFilter",
removeFilter:"dataMgr.removeFilter",check:"collapser.checkMgr.checkList checkMgr.checkList",checked:"collapser.checkMgr.getCheckList checkMgr.getCheckList",removeChecked:"collapser.checkMgr.removeChecked checkMgr.removeChecked",register:"event.register",trigger:"event.trigger",bind:"event.bind",unregister:"event.unregister",unbind:"event.unregister",commit:"editMgr.commit",cancelEdit:"editMgr.cancel",beginEdit:"editMgr.begin",collen:"colDefMgr.length"},autoWidth:!1,showMessage:!1}};b.getElementId=
function(){var a=this._origCtnr;return a.attr?a.attr("id"):a.getAttribute?a.getAttribute("id"):a.id};b._init=function(a){var d=this._ctnr=a.container,b=this._options,g;this.name=b.name;this._drag=!1;this._lastH=this._lastW=null;this._vars={scrollbarDim:void 0};if(g=b.width){if(typeof g==="number"||g.indexOf("%")===-1)g+="px"}else g="";d=this._ctnr=$("<div id='"+this.mid+"' class='"+b.classGrid+"' "+(g?"style='width:"+g+"' ":"")+"tabIndex='0'>").appendTo(Util$.safe$(d));this._vars.scrollbarDim=Util$.calScrollbarDims(d);
g=this.event=i.create("EventManager",{grid:this,options:b.EventManager});this.colDefMgr=i.create("ColumnManager",{grid:this,colDefs:a.colDefs,options:b.ColDefManager});this.dataMgr=i.create("DataManager",{grid:this,datalist:a.datalist,options:b.DataManager});b.CheckManager&&(this.checkMgr=i.create("CheckManager",{grid:this,options:b.CheckManager}));if(!b.MenuBar&&(b.columnHideEnabled||b.SearchManager))b.MenuBar={};if(b.Collapser)this.collapser=i.create("Collapser",{grid:this,options:b.Collapser}),
this.collapser.__init();b.ColGroup&&(this.colGroup=i.create("ColumnGroup",{grid:this,options:b.ColGroup}));b.SelectionManager&&(this.selMgr=i.create("SelectionManager",{grid:this,options:b.SelectionManager}));b.EditManager&&(this.editMgr=i.create("EditManager",{grid:this,options:b.EditManager}));b.ColHeader&&(this.header=i.create("ColumnHeader",{grid:this,container:d,options:b.ColHeader}));b.SearchManager&&(this.search=i.create("SearchManager",{grid:this,container:d,options:b.SearchManager}));b.MenuBar&&
(this.menubar=i.create("MenuBar",{grid:this,container:d,options:b.MenuBar}));this.view=i.create("ViewportManager",{grid:this,container:d,options:b.ViewportManager});b.TooltipManager&&(this.tooltip=i.create("TooltipManager",{grid:this,container:d,options:b.TooltipManager}));b.DataCreator&&(this.creator=i.create("DataCreator",{grid:this,container:d,options:b.DataCreator}));b.Footer&&(this.footer=i.create("Footer",{grid:this,container:d,options:b.Footer}));b.autoWidth&&g.bind("onResizeCanvasWidth",this.width,
this);this._createCss();g.trigger("onBeforeRenderModules",!1,!0);g.trigger("onRenderModules",!1,!0);g.trigger("onAfterRenderModules",!1,!0);this.msg=$("<div id='"+this.mid+"msg' class='msg' onmousedown='$(this).hide(1000)' style='position:relative;padding-left:4px;overflow:hidden;z-index:100;font-size:12px;height:21px;line-height:21px'></div>").appendTo(d).hide();this._busyShader=$('<div style="position:absolute;background:black;opacity:0.3;filter:alpha(opacity=30)"></div>').appendTo(d).hide();d=
d[0];this._lastW=d.clientWidth;this._lastH=d.clientHeight;this._registerLinks(b.links)};b._bindEvents=function(){i._bindGlobalEvents();var a=this;this._ctnr.bind({keydown:function(d){a._keydown(d)},keyup:function(d){a._keyup(d)},keypress:function(d){a._keypress(d)},mousein:function(d){a._mousein(d)},mouseout:function(d){a._mouseout(d)},mouseenter:function(d){a._mouseenter(d)},mouseleave:function(d){a._mouseleave(d)},mouseover:function(d){a._mouseover(d)},mousedown:function(d){a._mousedown(d)},click:function(d){a._click(d)},
dblclick:function(d){a._dblclick(d)}});this._charts=[]};b.destroy=function(a){try{if(!a){var d=i.grids.indexOf(this);d>-1&&i.grids.splice(d,1);this.name!=null&&delete i.gridMap[this.name]}this.dispatchEvent({type:"beforeDispose"});a||h.isEmptyObj(i.m.Grid)&&i._unbindGlobalEvents();this.event.trigger("onDestroy",!1,!0);a?i._destroy(this,{module:"event",$:"_ctnr",map:"_options",style:"_style _dynStyle"}):i._destroy(this,{name:"Grid",module:"event",$:"_ctnr",map:"_options",style:"_style _dynStyle"});
this.dispose()}catch(b){return this.log(b.stack),b}};b._registerLinks=function(a){var d,b,g,k,j,e,f,i,p,l;a:for(d in a)if(a.hasOwnProperty(d)&&!(d in this)){b=h.split(a[d]);g=b.length;k=0;b:for(;k<g;k++)if(j=b[k].split("."),e=j.length,!(e<1)){f=this;i=this;p="";for(l=0;l<e;l++)if(j[l]in f)i=f,f=f[p=j[l]];else continue b;this._registerLink(d,f,i,p);continue a}}};b._registerLink=function(a,d,b,g){if(this.hasOwnProperty(a))return!1;this[a]=h.isFunction(d)?function(){return d.apply(b,arguments)}:function(){return b[g]};
return!0};b._createCss=function(){var a={type:"beforeCreateCss",css:[]},d=this._options,b=this.event;this.dispatchEvent(a);var g=b.trigger("onCreateCss"),g=g?g.join(""):"",a=h.sprint("%selector%{overflow:hidden;height:100%;font:%font%;%border%%style%}%submodule%",{selector:"#"+this.mid,position:"relative",font:d.font,border:d.borderSide?"border:"+d.border+";":"border-top:"+d.border+";border-bottom:"+d.border+";",style:d.style,submodule:a.css.join("")+g});this._style=h.createStyle(a);a={type:"beforeCreateDynamicCss",
css:[]};this.dispatchEvent(a);g=(g=b.trigger("onCreateDynamicCss"))?g.join(""):"";this._dynStyle=h.createStyle(a.css.join("")+""+g)};b._recreateDynamicCss=function(){var a=this.event.trigger("onCreateDynamicCss");(a=a?a.join(""):"")&&h.setStyle(this._dynStyle,a)};b._keydown=function(a){var d=this.event,b=[a],a=a.which;d.triggerInvalid("onBeforeKeydown",b)||(d.trigger("keydown_"+a,b,!0),d.trigger("keydown",b,!0))};b._keyup=function(a){var d=this.event,b=[a],a=a.which;d.triggerInvalid("onBeforeKeyup",
b)||(d.trigger("keyup_"+a,b,!0),d.trigger("keyup",b,!0))};b._keypress=function(a){var d=this.event,b=[a],a=a.which;d.triggerInvalid("onBeforeKeypress",b)||(d.trigger("keypress_"+a,b,!0),d.trigger("keypress",b,!0))};b._mousein=function(a){var d=this.event,a=[a];d.triggerInvalid("onBeforeMousein",a)||(this._drag&&d.trigger("dragin",a,!0),d.trigger("mousein",a,!0))};b._mouseout=function(a){var d=this.event,a=[a];d.triggerInvalid("onBeforeMouseout",a)||(this._drag&&d.trigger("dragout",a,!0),d.trigger("mouseout",
a,!0))};b._mouseenter=function(a){var d=this.event,a=[a];d.triggerInvalid("onBeforeMouseenter",a)||(this._drag&&d.trigger("dragenter",a,!0),d.trigger("mouseenter",a,!0))};b._mouseleave=function(a){var d=this.event,a=[a];d.triggerInvalid("onBeforeMouseleave",a)||(this._drag&&d.trigger("dragleave",a,!0),d.trigger("mouseleave",a,!0))};b._mousemove=function(a){var d=this.event,a=[a];d.triggerInvalid("onBeforeMousemove",a)||(this._drag&&d.trigger("dragmove",a,!0),d.trigger("mousemove",a,!0))};b._mouseover=
function(a){var d=this.event,a=[a];d.triggerInvalid("onBeforeMouseover",a)||(this._drag&&d.trigger("dragover",a,!0),d.trigger("mouseover",a,!0))};b._mousedown=function(a){var d=this.event,a=[a];this._drag=!0;d.triggerInvalid("onBeforeMousedown",a)||d.trigger("mousedown",a,!0)};b._mouseup=function(a){var d=this.event,b=[a];this._drag=!1;d.trigger("unsetDrag",!1,!0);this.containsEvent(a)&&(d.triggerInvalid("onBeforeMouseup",b)||d.trigger("mouseup",b,!0))};b._click=function(a){var d=this.event,a=[a];
d.triggerInvalid("onBeforeClick",a)||d.trigger("click",a,!0)};b._dblclick=function(a){var d=this.event,a=[a];d.triggerInvalid("onBeforeDblclick",a)||d.trigger("dblclick",a,!0)};b._resize=function(a){var d=this.event,b=!1,g=this._ctnr,k=g[0],j=this._lastW,e=this._lastH,f=k.clientWidth||g.width(),g=k.clientHeight||g.height();if(f>=1&&j!==f)d.trigger("resizeWidth",[f,j],!0),this._lastW=f,b=!0;if(g>=1&&e!==g)d.trigger("resizeHeight",[g,e],!0),this._lastH=g,b=!0;b&&d.trigger("resize",[a],!0)};b.width=
function(a){var d=this._ctnr[0],b=d.clientWidth,g=this.event;if(!a)return b;typeof a!="number"&&(a=parseInt(a,10));if(a<1||a===b||!isFinite(a))return b;d.style.width=a+"px";g.trigger("resizeWidth",[a,this._lastW],!0);this._lastW=a;g.trigger("resize",!1,!0);return a};b.height=function(a){var d=this._ctnr[0],b=d.clientHeight,g=this.event;if(!a)return b;typeof a!="number"&&(a=parseInt(a,10));if(a<1||a===b||!isFinite(a))return b;d.style.height=a+"px";g.trigger("resizeHeight",[a,this._lastH],!0);this._lastH=
a;g.trigger("resize",!1,!0);return a};b.syncScroll=function(){this.view._scroll()};b.getCellByIdAndKey=function(a,d){if(a==null||d==null)return null;var b=this.dataMgr.getById(a);if(!b)return null;var g=this.colDefMgr.getByKey(d);return!g?null:i.create("Cell",{grid:this,datarow:b,colDef:g})};b.getCellByIdx=function(a,d){if(a==null||d==null)return null;var b=this.dataMgr.getByIdx(a);if(!b)return null;var g=this.colDefMgr.get(d);return!g?null:i.create("Cell",{grid:this,datarow:b,colDef:g})};b.busy=
function(){if(this._busyShader&&!this._busy){var a=this._ctnr,d=a.offset(),b=a[0],a=b.clientWidth+1,b=b.clientHeight+1,g=this._busyShader,k=g[0].style;k.top=d.top+"px";k.left=d.left+"px";k.width=a+"px";k.height=b+"px";g.show()}this._busy=!0};b.idle=function(){this._busyShader&&this._busy&&this._busyShader.hide();this._busy=!1};b.error=function(a){for(var d=i.error[a],b=1,g=arguments.length;b<g;b++)d=d.replace(RegExp("%"+(b-1),"g"),arguments[b]);d=Error(d);d.code=a;this.printError(d.message);this.event.trigger("onError",
[d],!0);return d};b.printError=function(a){if(this._options.showMessage){var d=this.msg,b=d[0],g=b.style;b.innerHTML=a;g.width=this._ctnr[0].clientWidth+"px";g.background="#ffebe8";g.color="#333";d.show();clearTimeout(this.timeout);this.timeout=setTimeout(function(){d.hide(1E3)},5E3)}};b.printMessage=function(a){if(this._options.showMessage){var d=this.msg,b=d[0],g=b.style;b.innerHTML=a;g.width=this._ctnr[0].clientWidth+"px";g.background="#dfdfdf";g.color="#6f6f6f";d.show();clearTimeout(this.timeout);
this.timeout=setTimeout(function(){d.hide(1E3)},5E3)}};b.containsEvent=function(a){return h.contains(this._ctnr[0],a.target)};b.getChart=function(a){return this._charts[a]};b.getShownColumns=function(){return this.colDefMgr.get().filter(function(a){return a.width>0})};b.chart=function(a,d,b,g,k,j){var e,d=d.toLowerCase();switch(d){case "area":d="corechart";e="AreaChart";break;case "bar":d="corechart";e="BarChart";break;case "candle":d="corechart";e="CandlestickChart";break;case "column":d="corechart";
e="ColumnChart";break;case "combo":d="corechart";e="ComboChart";break;case "gauge":d="gauge";e="Gauge";break;case "geo":d="geochart";e="GeoChart";break;case "line":d="corechart";e="LineChart";break;case "pie":d="corechart";e="PieChart";break;case "scatter":d="corechart";e="ScatterChart";break;case "table":d="table";e="Table";break;case "treemap":d="treemap";e="TreeMap";break;default:throw Error("unknown chart type: "+d);}google.load("visualization","1",{packages:[d]});var f=this,h=this.colDefMgr,
i=this.dataMgr,l=b.map(function(a){if(a=h.getByKey(a))return a;throw Error("column key not found");}),m=i.exportToArray(b,k,j);google.setOnLoadCallback(function(){for(var d=new google.visualization.DataTable,h=0,t=l.length,u,o;h<t;h++){u=l[h];o=u.type;switch(o){case "boolean":o="boolean";break;case "int":case "integer":case "long":case "float":case "double":o="number";break;case "string":case "text":o="string"}d.addColumn(o||m[0]&&m[0][h]!=null&&typeof m[0][h]||h===0&&"string"||"number",u.name)}d.addRows(m);
var v=f._charts[a]=new google.visualization[e](document.getElementById(a));v.draw(d,g);f.event.bind("onAfterRefresh",function(){d.removeRows(0,d.getNumberOfRows());d.addRows(i.exportToArray(b,k,j));v.draw(d,g)});f.event.trigger("onChartLoaded",[v,d],!0)})}})();jx.grid.TooltipManager={};
(function(){function f(b){this.mid=b.mid;this.grid=b.grid;this.grid.tooltip=this;this._ctnr=b.container;this._options=i._extend({classTooltip:"jgrid-tooltip",tooltipSyncEnabled:!0,offsetX:0,offsetY:18,background:"#F5F5F5",border:"1px solid #868686",padding:"2px 10px",font:"14px Arial,Helvetica,sans-serif",color:"#333"},b.options);this.__init()}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.Grid");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.TooltipManager",
f);f.getInstance=function(b){return new f(b)};var e=f.prototype;e.__init=function(){this.grid.event.bind({onCreateCss:this._onCreateCss,onDestroy:this._destroy,mouseoutCanvas:this._mouseoutCanvas,mousemoveCanvas:this._mousemoveCanvas,mouseoverCanvas:this._mouseoverCanvas},this)};e._destroy=function(){i._destroy(this,{name:"TooltipManager",path:"tooltip",$:"_tooltip",property:"_ctnr",map:"_options"})};e._onCreateCss=function(){var b=this._options,a=[];a.push("#"+this.grid.mid+" ."+b.classTooltip+"{position:absolute;z-index:10;background:"+
b.background+";border:"+b.border+";padding:"+b.padding+";color:"+b.color+";font:"+b.font+"}");return a.join("")};e._mouseoutCanvas=function(){h.isNotNull(this._tooltip)&&(this._ctnr[0].removeChild(this._tooltip[0]),delete this._tooltip)};e._mousemoveCanvas=function(b){var a=this._options;a.tooltipSyncEnabled&&h.isNotNull(this._tooltip)&&this._tooltip.css({left:b.pageX+a.offsetX+"px",top:b.pageY+a.offsetY+"px"})};e._mouseoverCanvas=function(b,a){if(a.getColDef().tooltipEnabled&&h.isNull(this._tooltip)){var d=
this._options,c=document.createElement("div");c.innerHTML="<div class='"+d.classTooltip+"' style='left:"+(b.pageX+d.offsetX)+"px;top:"+(b.pageY+d.offsetY)+"px'>"+a.getValue()+"</div>";this._tooltip=$(c.firstChild);this._ctnr[0].appendChild(this._tooltip[0])}}})();jx.grid.EditManager={};jx.grid.Editor={};
(function(){function f(a){this.mid=a.mid;this.grid=a.grid;this.grid.editMgr=this;this._options=h._extend({classEdit:"jgrid-edit",classCellEditable:"jgrid-editable",classCellNotEditable:"jgrid-notEditable",editableBgEnabled:!1,notEditableBgEnabled:!1,editableBg:"#FFF",notEditableBg:"#F6F6F6",deleteEnabled:!1,editIconEnabled:!0,urlEditIcon:this.grid._options.imageUrl+"editable-small.png",classEditIcon:"edit-icon",editIconWidth:12,editIconPadding:3,basicBackground:"#FFF9D7",classSuccess:"edit-success",
successBackground:"#cdf7b6",classFailure:"edit-failure",failureBackground:"#ff0000"},a.options);this._beginEditKeys=e.which(["number","alphabet","del","backspace"]);this.__init()}function i(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}var h=goog.getObjectByName("jx.grid"),e=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("jx.grid.Grid");var b=goog.getObjectByName("jx.grid.Cell");goog.exportSymbol("jx.grid.EditManager",f);goog.exportSymbol("jx.grid.Editor",
i);f.getInstance=function(a){return new f(a)};var a=f.prototype;a.__init=function(){this.bindEvents()};a.bindEvents=function(){var a={onGetColCellClass:this._onGetColCellClass,keydownCanvas:this._keydownCanvas,onDestroy:this._destroy,dblclickCanvas:this._dblclickCanvas,onCreateDynamicCss:this.onCreateDynamicCss,"onBeforeNavigate onBeforeRefresh onBeforeSelect":this.commit,onBeforeFocusCanvas:this.notActive};e.isNull(this.grid.selMgr)?a.onCreateCss=this._onBeforeCreateSelCss:a.onBeforeCreateSelCss=
this._onBeforeCreateSelCss;if(this._options.deleteEnabled)a["keydownSel_"+e.keyMapKeydown.del]=this._deleteContents;if(this._options.editIconEnabled)for(var b=this.grid.colDefMgr.get(),g=b.length,k=0;k<g;k++)if(e.isNotNull(b[k].editor))a["onRenderHeader_"+b[k].key+"_prepend"]=this._onRenderHeader;this.grid.event.bind(a,this)};a._destroy=function(){this._deleteEditor();h._destroy(this,{name:"EditManager",path:"editMgr",map:"_beginEditKeys _options"})};a._onBeforeCreateSelCss=function(){var a="#"+this.grid.mid+
" .",b=this._options,g=[],k=this.grid.view._getRowInnerHeight();g.push(this.grid.view._getCellSelector()+"."+b.classEdit+"{background:"+b.basicBackground+"}");g.push(a+b.classEdit+" input{position:absolute;z-index:10;top:0;padding:0;border:0;margin:0;background:"+b.basicBackground+";height:"+k+"px;line-height:"+k+"px}");b.editableBgEnabled&&g.push(a+b.classCellEditable+"{background:"+b.editableBg+"}");b.notEditableBgEnabled&&g.push(a+b.classCellNotEditable+"{background:"+b.notEditableBg+"}");b.editIconEnabled&&
g.push(a+b.classEditIcon+"{float:left;position:absolute;left:0;top:0;padding:0 "+b.editIconPadding+"px;width:"+b.editIconWidth+"px;height:"+k+"px;background:url("+b.urlEditIcon+") no-repeat center transparent}");g.push(a+b.classSuccess+"{background:"+b.successBackground+"}");g.push(a+b.classFailure+"{background:"+b.failureBackground+"}");return g.join("")};a.onCreateDynamicCss=function(){for(var a=this.grid.view._getCellSelector(),b=this.grid.view._getPadding(),g=this.grid.colDefMgr.get(),k=0,j="";k<
g.length;k++)e.isNotNull(g[k].editor)&&(j+=a+".k_"+g[k].key+" .basic-editor{width:"+(g[k].width-2*b)+"px}");return j};a._onRenderHeader=function(a){a.push("<span class='"+this._options.classEditIcon+"'></span>")};a._onRenderCell=function(a,b,g,k,j){this.grid.dataMgr.isReal(g)&&j.push("<span class='"+this._options.classEditIcon+"' title='클릭하여 에디팅을 시작합니다' onclick='JGM.m.EditManager."+this.mid+'.beginEdit("'+g[this.grid.dataMgr.idKey]+'","'+k.key+"\")'></span>")};a.cancelMouseEvent=function(a){return!e.hasTagAndClass(a.target,
"DIV",this._options.classEditIcon)};a.beginEdit=function(a,b){this.begin(h.create("Cell",{grid:this.grid,datarow:this.grid.dataMgr.getById(a),colDef:this.grid.colDefMgr.getByKey(b)}))};a._dblclickCanvas=function(a,b){b.isEdited()||this.begin(b)};a._keydownCanvas=function(a){this.active()?a.which===e.keyMapKeydown.esc&&this.cancel():!a.ctrlKey&&!a.altKey&&e.isNotNull(this.grid.selMgr)&&(a.which===e.keyMapKeydown.del&&this._options.deleteEnabled?this._deleteContent(this.grid.selMgr.getCell()):this._beginEditKeys[a.which]?
this.begin(this.grid.selMgr.getCell()):a.which===e.keyMapKeydown.f2&&(a.preventDefault(),this.begin(this.grid.selMgr.getCell())))};a.active=function(){return!!this.editor};a.notActive=function(){return e.isNull(this.editor)};a._isEdited=function(a){return this.active()&&this.editor.cell&&this.editor.cell.equals(a)};a._onGetColCellClass=function(a){return e.isNotNull(a.editor)?this._options.classCellEditable:this._options.classCellNotEditable};b.prototype.isEdited=function(){return this.grid.editMgr._isEdited(this)};
b.prototype.setValue=function(a){var b=this.getDatarow(),g=this.getKey(),k;e.isNotNullAnd(b,g)&&(k=this.grid.dataMgr.updateByKey(b,g,a,{noSort:!0,noFilter:!0,noRerender:!0}),k===!0&&this.grid.view.rerenderRow(b));return k};a.isEditable=function(a){if(a){var b=a.getColDef();if(b&&b.editor)return(a=a.getDatarow())&&this.grid.dataMgr.isReal(a)}return!1};a.begin=function(a){this.active()&&this.commit();if(this.isEditable(a)){var b=a.getNode();if(b){var g=this.editor=a.getColDef().editor;g.cell=a;g.grid=
this.grid;g.before=b.innerHTML;b.innerHTML=g.edit(a.getValue());a.get$().addClass(this._options.classEdit);g.focus()}}};a.cancel=function(){if(this.active()){var a=this.editor.cell;if(a){var b=a.getNode();if(b)b.innerHTML=this.editor.before,a.get$().removeClass(this._options.classEdit)}this._deleteEditor();this.grid.view.focus()}};a._deleteEditor=function(){e.isNotNull(this.editor)&&(delete this.editor.grid,delete this.editor.cell,delete this.editor.before,delete this.editor)};a.commit=function(){if(!this._beingCommitted&&
this.active()){this._beingCommitted=!0;var a=this.editor.cell;if(a){var b=a.getNode();if(b)if(b=this.editor.value(b),b==null||b==a.getValue())this.cancel();else{var b=a.setValue(b),g,k=a.get$();b instanceof Error?(this.cancel(),g=this._options.classFailure):(this._deleteEditor(),this.grid.view.focus(),this.grid.printMessage("Successfully Updated."),g=this._options.classSuccess);k.addClass(g);setTimeout(function(){k.removeClass(g)},1E3)}}this._beingCommitted=!1}};a._deleteContent=function(a){if(!this.active()&&
this.isEditable(a)){var b=a.getColDef();a.getValue()!==b.defaultValue&&a.setValue(b.defaultValue)}};a._deleteContents=function(a,b,g){if(!this.active()){var a={},b={},k=[],j,f,h,i,p,l,m;a:for(j in g)if(g.hasOwnProperty(j)&&j!=="length")for(m in i=h=f=void 0,l=g[j],l)if(l.hasOwnProperty(m)&&!(m==="length"||b.hasOwnProperty(m))){p=l[m].cell;if(e.isNull(f)&&(f=p.getColDef(),h=f.defaultValue,i=f.key,e.isNull(f.editor)))continue a;p=e.isNotNull(a[m])?a[m].datarow:p.getDatarow();this.grid.dataMgr.isReal(p)?
h!==p[i]&&(e.isNull(a[m])&&(a[m]={datarow:p,change:{}},k.push(a[m])),a[m].change[i]=h):b[m]=!0}k.length!==0&&this.grid.dataMgr.updateList(k)}};i.getInstance=function(a){return new i(a)};b=i.prototype;b.edit=function(a){return"<input type='text' class='basic-editor' value='"+(a==null?"":e.getHTMLText(a).replace(/'/g,"&#39;"))+"' style='position:relative'/>"};b.focus=function(){var a=this.cell;if(a){var b=a.getNode();if(b&&(b=b.childNodes[0])){if(b.setActive)try{b.setActive()}catch(g){}b.focus();document.activeElement!==
b&&a.get$().children(":eq(0)").focus()}}};b.value=function(a){return a&&(a=a.childNodes[0])?a.value:null};b.path=function(){return"JGM.m.Editor."+this.mid};i.numberKeys=e.which(["number","del","backspace"]);i.isNumberKey=function(a){return this.numberKeys[a]?!0:!1};i.numberEdit=function(a){a=a.getValue();return"<input type='text' class='basic-editor' onkeydown='if (!jx.grid.Editor.isNumberKey(event.which)) return false;' value='"+e.ifNull(a,"")+"'/>"};i.floatKeys=e.which(["number",".","del","backspace"]);
i.isFloatKey=function(a){return this.floatKeys[a]?!0:!1};i.floatEdit=function(a){a=a.getValue();return"<input type='text' class='basic-editor' onkeydown='if (!jx.grid.Editor.isFloatKey(event.which)) return false;' value='"+e.ifNull(a,"")+"'/>"};i.alphabetKeys=e.which(["alphabet","del","backspace","space"]);i.isAlphabet=function(a){return this.alphabetKeys[a]?!0:!1};i.alphabetEdit=function(a){a=a.getValue();return"<input type='text' class='basic-editor' onkeydown='if (!jx.grid.Editor.isAlphabet(event.which)) return false;' value='"+
e.ifNull(a,"")+"'/>"}})();jx.grid.SearchManager={};
(function(){function f(a){this.mid=a.mid;this._adv=this._advButton=this._tag=this._masterInput=this._mask=null;this.grid=a.grid;this.grid.search=this;this._options=i._extend({background:"#f0f0f0",borderThickness:0,border:"solid #d6d6d6",inputBorder:"1px solid #A7A7A7",inputPadding:0,searchbarAlign:"center",searchbarMargin:3,searchbarWidth:"140px",searchbarHeight:20,tagsHeight:26,tagsPadding:2,tagsBorderRadius:3,resetButton:!1,advButtonColor:"#123272",advButtonFont:"bold 12px Arial,Helvetica,sans-serif",advButtonPadding:5,
advButtonBg:"",advButtonBgHover:"url("+this.grid._options.imageUrl+"more-options-bg-hover.png) repeat-x scroll center",advButtonBgActive:"url("+this.grid._options.imageUrl+"more-options-bg-active.png) repeat-x scroll center",advButtonBgOpened:"url("+this.grid._options.imageUrl+"more-options-bg-opened.png) repeat-x scroll center",advButtonBorderThickness:1,advButtonBorder:"solid transparent",advButtonBorderHover:"solid #a4a4a4",advButtonBorderActive:"solid #c5c5c5",advButtonBorderOpened:"solid #bfbfbf",
advButtonIconWidth:9,advButtonIconMargin:2,advButtonIconUrl:this.grid._options.imageUrl+"more-options.png",advButtonIconCloseUrl:this.grid._options.imageUrl+"more-options-close.png",tagPadding:2,tagBorder:"solid #93979D",tagBorderThickness:1,tagFont:"bold 13px Arial",tagColor:"#282853",tagBackground:"url("+this.grid._options.imageUrl+"tag-background.png) repeat-x scroll center",tagRemoveIconWidth:12,tagRemoveIconUrl:this.grid._options.imageUrl+"tag-close.png",tagRemoveIconHoverUrl:this.grid._options.imageUrl+
"tag-close-hover.png",advFont:"11px Arial",advInputWidth:30,classMask:"search-mask",classSearchbar:"search-bar",classAdvButtonName:"more-option-name",classAdvButton:"more-options",classAdvButtonIcon:"more-icon",classClearTags:"clear-tags",classTagbar:"search-tags",classTag:"search-tag",classTagName:"search-tag-name",classRemoveTag:"search-tag-remove",classAdvanced:"search-advanced",classOptionCol:"search-option-col",classOption:"search-option",classSearchIcon:"search-icon",searchIconUrl:this.grid._options.imageUrl+
"search-icon.png",searchIconWidth:15,searchIconHeight:15,keyMap:void 0,tagRemoveIconActiveUrl:this.grid._options.imageUrl+"tag-close-active.png",syncMaster:!1},a.options);this._filterMap={};this._tagMap={};this._nameMap={};this._codeMap={};this._global=[];this._globalMap={};this._keyToName={};this.__init()}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.Grid");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.SearchManager",
f);var e=f.prototype;e._onCreateCss=function(){var a="#"+this.grid.mid+" .",b=this._options,d=b.borderThickness+"px "+b.border,g="border-radius:"+b.tagsBorderRadius+"px;-moz-border-radius:"+b.tagsBorderRadius+"px",c=b.advButtonBorderThickness+"px "+b.advButtonBorder,j=b.advButtonBorderThickness+"px "+b.advButtonBorderHover,k=b.advButtonBorderThickness+"px "+b.advButtonBorderActive,e=b.advButtonBorderThickness+"px "+b.advButtonBorderOpened,f=b.tagsHeight-2*b.tagsPadding,h=f-2*b.advButtonBorderThickness,
r=f-2*b.tagBorderThickness,n=a+b.classMask,o=a+b.classSearchbar,l=a+b.classAdvButton,m=a+b.classRemoveTag,p=[];p.push(n+"{"+i._CONST._cssUnselectable+"overflow:hidden;float:left;background:"+b.background+"}");p.push(n+" button{margin:0;padding:0 3px}");p.push(n+" input{border:"+b.inputBorder+";padding:"+b.inputPadding+"}");p.push(o+"{float:left;width:"+b.searchbarWidth+";margin:"+b.searchbarMargin+"px 2px;height:"+b.searchbarHeight+"px;"+g+"}");p.push(a+b.classTagbar+"{float:left;cursor:default;height:"+
(b.tagsHeight-b.tagsPadding)+"px;padding:"+b.tagsPadding+"px 0 0 "+b.tagsPadding+"px;border-bottom:"+d+"}");p.push(l+"{float:left;margin-right:"+b.tagsPadding+"px;background:"+b.advButtonBg+";border:"+c+";padding:0 "+b.advButtonPadding+"px;"+g+"}");p.push(l+":hover{background:"+b.advButtonBgHover+";border:"+j+"}");p.push(l+".opened{background:"+b.advButtonBgOpened+";border:"+e+"}");p.push(l+":active{background:"+b.advButtonBgActive+";border:"+k+"}");p.push(a+b.classAdvButtonName+"{float:left;color:"+
b.advButtonColor+";font:"+b.advButtonFont+";line-height:"+h+"px}");p.push(a+b.classAdvButtonIcon+"{float:left;height:"+h+"px;margin-left:"+b.advButtonIconMargin+"px;background:url("+b.advButtonIconUrl+") no-repeat center;width:"+b.advButtonIconWidth+"px}");p.push(l+".opened ."+b.classAdvButtonIcon+"{background:url("+b.advButtonIconCloseUrl+") no-repeat center}");p.push(a+b.classTag+"{float:left;border:"+b.tagBorderThickness+"px "+b.tagBorder+";margin:0 "+b.tagsPadding+"px "+b.tagsPadding+"px 0;padding:0 "+
b.tagPadding+"px;background:"+b.tagBackground+";"+g+"}");p.push(a+b.classTagName+"{float:left;color:"+b.tagColor+";font:"+b.tagFont+";line-height:"+r+"px}");p.push(m+"{float:left;margin-left:"+b.tagPadding+"px;background:url("+b.tagRemoveIconUrl+") no-repeat center;width:"+b.tagRemoveIconWidth+"px;height:"+r+"px}");p.push(m+":hover{background:url("+b.tagRemoveIconHoverUrl+") no-repeat center}");p.push(m+":active{background:url("+b.tagRemoveIconActiveUrl+") no-repeat center}");p.push(a+b.classClearTags+
"{height:"+f+"px}");p.push(a+b.classAdvanced+"{cursor:default;font:"+b.advFont+";border-bottom:"+d+"}");p.push(a+b.classOptionCol+"{display:inline-block;vertical-align:top}");p.push(a+b.classOptionCol+" input{width:"+b.advInputWidth+"px;margin-right:2px;"+g+"}");p.push(a+b.classSearchIcon+"{background:url("+b.searchIconUrl+") no-repeat center;width:"+b.searchIconWidth+"px;height:"+b.searchIconHeight+"px}");return p.join("")};f.getInstance=function(a){return new f(a)};e.__init=function(){this.grid.event.bind({onRenderModules:this._onRenderModules,
onCreateCss:this._onCreateCss,onFilter:this._onFilter,onDestroy:this._destroy,onAfterRenderModules:this._onAfterRenderModules},this)};e._onRenderModules=function(){var a=this._options;this.grid.colDefMgr.get();var b=this.mid,d="jgrid-search-input-"+b,g=this._mask=$('<div class="'+a.classMask+'"><input type="text" id="'+d+'" class="'+a.classSearchbar+'" style="float:left;"/></div>');this._tag=$("<div class='"+a.classTagbar+"'>"+(a.resetButton?"<button type='button' class='"+a.classClearTags+"' onclick='JGM.m.SearchManager."+
b+"._removeAllOptions()'>초기화</button>":"")+"</div>").appendTo(g);var b=this.grid.menubar,c=this;b.addIcon(a.classSearchIcon,"데이터 검색을 합니다.",a.searchIconWidth,a.searchIconHeight,function(){g.toggle("fast")});g.hide();b.appendHtml(g);var j=this._masterInput=document.getElementById(d);$(j).keyup(function(a){a=a.which;a===h.keyMapKeydown.enter?c._parse(j.value):a===h.keyMapKeydown.esc&&c._removeAllOptions()})};e._onAfterRenderModules=function(){var a=this._filterMap,b,d,g,c,j=this._adv;for(d in a)if(a.hasOwnProperty(d))for(g in b=
a[d],b)if(b.hasOwnProperty(g)&&g!=="andor"&&g!=="parser"&&g!=="validator")(c=b[g]).input=j.find("#"+d+c.option.name)};e._destroy=function(){var a,b,d,g=this._globalMap,c=this._filterMap,j=this._tagMap;for(a in g)g.hasOwnProperty(a)&&(i._delete$(g[a],"tag"),i._deleteArray(g[a],"list"));for(a in c)if(c.hasOwnProperty(a)){g=c[a];for(b in g)g.hasOwnProperty(b)&&(b!=="andor"&&b!=="parser"&&b!=="validator"&&i._delete$(g[b],"input"),i._deleteMap(g,b));i._deleteMap(c,a)}for(a in j)if(j.hasOwnProperty(a)){c=
j[a];for(b in c)if(c.hasOwnProperty(b)){g=c[b];for(d in g)g.hasOwnProperty(d)&&(i._delete$(g[d],"tag"),i._deleteMap(g,d));i._deleteMap(c,b)}i._deleteMap(j,a)}i._destroy(this,{name:"SearchManager",path:"search",$:"_advButton _mask _tag _adv",array:"_global",map:"_globalMap _filterMap _tagMap _codeMap _nameMap _options _keyToName"})};e._onFilter=function(a,b){if(this._global.length===0&&h.isEmptyObj(this._codeMap))this.grid.event.trigger("onSearch",[!1],!0);else{this.grid.event.trigger("onSearch",[!0],
!0);var d,g=this._tagMap,c,j,k=a.length,e,f=this._filterMap,r=this.constructor.CONST.and,n,i=this._global.length>0,o,l;if(i){var p=this._global,m;e=this.grid.colDefMgr.get().filter(function(a){return!a.noSearch});var q=e.length,s=[];for(o=0;o<q;o++)s.push(e[o].key)}o=k-1;a:for(;o>=0;o--){k=a[o];if(i){e=p.slice();d=0;for(;e.length!==0&&d<q;d++)if((m=k[s[d]])!=null){h.isString(m)||(m=m.toString());for(l=e.length-1;l>=0;l--)m.indexOf(e[l])!==-1&&e.removeAt(l)}if(e.length!==0){a.removeAt(o);b.push(k);
continue a}}for(c in g)if(g.hasOwnProperty(c))if(l=g[c],d=f[c].andor,e=k[c],d===r)for(j in l){if(l.hasOwnProperty(j))for(n in d=l[j],d)if(d.hasOwnProperty(n)&&!d[n].fn(e)){a.removeAt(o);b.push(k);continue a}}else{for(j in l)if(l.hasOwnProperty(j))for(n in d=l[j],d)if(d.hasOwnProperty(n)&&d[n].fn(e))continue a;a.removeAt(o);b.push(k);continue a}}}};e._registerFilter=function(a,b,d,g,c){if(!this._filterMap.hasOwnProperty(a)){if(g==="number")g=this.constructor._numberFilter;else if(g==="string")g=this.constructor._stringFilter;
var j,k=g.length,e=0,f=this.mid,h=this._options.classOption,r,n,i,o;r=this._filterMap[a]={andor:this.constructor.CONST.and};n=this._tagMap[a]={};for(c.push("<table>");e<k;e++)j=g[e],o=j.name,o==="parser"?r.parser=j.fn:o==="validator"?r.validator=j.fn:(i=j.tag,r[i]={option:j},n[i]={},c.push("<tr title='"+j.comment(d,"입력값")+"'><td><div class='"+h+"'>"+d+" "+i+"</td><td><input id='"+a+o+"' key='"+a+"' tag='"+i+"' type='text'><button type='button' onclick=\"JGM.m.SearchManager."+f+"._registerOption('"+
a+"','"+b+"','"+i+"',this.previousSibling.value)\">등록</button></div></td></tr>"));c.push("</table>")}};e._parse=function(a){for(var b,d,g,c,j=h.split(a),k=j.length,e=2,f=!1,r=[],n=this._nameMap,i=this._filterMap,o=0;o<k;o++)if(a=j[o],a!=="")switch(e){case 0:i[b].hasOwnProperty(a)&&(g=a,e=1);break;case 1:c=a;e=2;break;case 2:a.charAt(0)==="@"?(a=a.substring(1),n.hasOwnProperty(a)?(h.isNotNullAnd(b,d,g,c)&&this._registerOption(b,d,g,c,!0)&&(f=!0),b=n[a],d=a,c=g=void 0,e=0):b==null?r.push(a):c+=" "+
a):b==null?r.push(a):c+=" "+a}h.isNotNullAnd(b,d,g,c)&&this._registerOption(b,d,g,c,!0)&&(f=!0);this._registerGlobal(r)&&(f=!0);this._syncMasterInput();f&&this.grid.dataMgr.refresh()};e._syncMasterInput=function(){if(this._options.syncMaster){var a=this._global.join(" "),b=this._tagMap,d=this._keyToName,g,c,j,k,e;for(g in b)if(b.hasOwnProperty(g))for(c in k=b[g],k)if(k.hasOwnProperty(c))for(j in e=k[c],e)e.hasOwnProperty(j)&&(a+=" @"+d[g]+" "+c+" "+j);this._masterInput.value=$.trim(a)}else this._masterInput.value=
""};e._registerGlobal=function(a){for(var b=0,d=a.length,g=this._global;b<d;b++)g.indexOf(a[b])!==-1?a.removeAt(b--):g.push(a[b]);if(a.length===0)return!1;b=this._options;this._globalMap[a[0]]={tag:$("<div class='"+b.classTag+"' title='"+a.join(", ")+" 를 포함하는'><div class='"+b.classTagName+"'>"+a.join(" ")+"</div><div class='"+b.classRemoveTag+"' title='필터 제거' onclick=\"JGM.m.SearchManager."+this.mid+"._removeGlobal('"+a[0]+"')\"></div></div>").appendTo(this._tag),list:a};return!0};e._removeGlobal=
function(a){var b=this._globalMap;if(b.hasOwnProperty(a)){var d=b[a];d.tag.remove();delete d.tag;this._global.removeList(d.list);d.list.length=0;delete d.list;delete b[a];this._syncMasterInput();this.grid.dataMgr.refresh()}};e._registerOption=function(a,b,d,g,c){var j=this._filterMap,k,e=this._codeMap;if(j.hasOwnProperty(a)&&(k=j[a]).hasOwnProperty(d)){j=k[d];if(g==null){var h=j.input,g=$.trim(h.val());h.val("")}else g=$.trim(g);if(g.length===0)return!1;k.parser!=null&&(g=k.parser(g));if(e.hasOwnProperty(a+
"@T"+d+"@B"+g))return!1;if(k.validator!=null&&!k.validator(g))return!1;j=j.option;k=k.andor}else return!1;h=this._tagMap[a];if(h[d].hasOwnProperty(g))return!1;var r,n,i,o,l=this._filterMap[a],p;for(i in h)if(h.hasOwnProperty(i))for(o in r=h[i],r)r.hasOwnProperty(o)&&(p=r[o],n=l.parser!=null?l.parser(o):o,f._checkDisable(j.type,p.option.type,k,g,n)&&(delete e[a+"@T"+p.option.tag+"@B"+n],p.tag.remove(),delete p.tag,delete p.option,delete p.fn,delete r[o]));e[a+"@T"+d+"@B"+g]=!0;this._createTag(a,j,
g,b);c||(this._syncMasterInput(),this.grid.dataMgr.refresh());return!0};e._removeOption=function(a,b,d){var g=this._tagMap,c,j;if(g.hasOwnProperty(a)&&(c=g[a]).hasOwnProperty(b)&&(j=c[b]).hasOwnProperty(d))g=j[d],g.tag.remove(),delete g.tag,delete g.option,delete g.fn,delete j[d],delete this._codeMap[a+"@T"+b+"@B"+d],this._syncMasterInput(),this.grid.dataMgr.refresh()};e._removeAllOptions=function(){var a,b=this._globalMap,d,g=this._tagMap,c,j,k;for(a in b)if(b.hasOwnProperty(a))d=b[a],d.tag.remove(),
delete d.tag,d.list.length=0,delete d.list,delete b[a];this._global.length=0;for(a in g)if(g.hasOwnProperty(a))for(c in b=g[a],b)if(b.hasOwnProperty(c))for(j in d=b[c],d)d.hasOwnProperty(j)&&(k=d[j],k.tag.remove(),delete k.tag,delete k.option,delete k.fn,delete d[j]);this._codeMap={};this._syncMasterInput();this.grid.dataMgr.refresh()};e._createTag=function(a,b,d,g){var c=this._options;return this._tagMap[a][b.tag][d]={tag:$("<div class='"+c.classTag+"' title='"+b.comment(g,d)+"'><div class='"+c.classTagName+
"'>@"+g+" "+b.tag+" "+d+"</div><div class='"+c.classRemoveTag+"' title='필터 제거' onclick=\"JGM.m.SearchManager."+this.mid+"._removeOption('"+a+"','"+b.tag+"','"+d+"')\"></div></div>").appendTo(this._tag),option:b,fn:b.fn(d)}};var b=f.CONST={lt:0,lte:1,eq:2,neq:3,gt:4,gte:5,and:6,or:7,T:8,F:9},e=b.lt,a=b.gt,d=b.eq,c=b.neq,g=b.and,k=b.or,j=b.T,b=b.F,r=f._comparator={},n=r[e]=function(a,b){return a<=b},o=r[a]=function(a,b){return a>=b},p=r[d]=function(a,b){return a===b},j=r[j]=function(){return!0},l=f._disableMap=
{},m=l[e]={},q=l[a]={},s=l[d]={},l=l[c]={};r[b]=function(){return!1};m[e]={};m[e][g]=j;m[e][k]=j;m[a]={};m[a][g]=n;m[a][k]=o;m[d]={};m[d][g]=j;m[d][k]=o;m[c]={};m[c][g]=n;m[c][k]=j;q[e]={};q[e][g]=o;q[e][k]=n;q[a]={};q[a][g]=j;q[a][k]=j;q[d]={};q[d][g]=j;q[d][k]=n;q[c]={};q[c][g]=o;q[c][k]=j;s[e]={};s[e][g]=j;s[e][k]=n;s[a]={};s[a][g]=j;s[a][k]=o;s[d]={};s[d][g]=j;s[d][k]=p;s[c]={};s[c][g]=j;s[c][k]=j;l[e]={};l[e][g]=o;l[e][k]=j;l[a]={};l[a][g]=n;l[a][k]=j;l[d]={};l[d][g]=j;l[d][k]=j;l[c]={};l[c][g]=
p;l[c][k]=j;f._checkDisable=function(a,b,d,g,c){try{return this._disableMap[a][b][d](g,c)}catch(j){return!1}};f._numberFilter=[{name:"gt",tag:">",type:a,comment:function(a,b){return a+" 이(가) "+b+"보다 큰"},fn:function(a){h.isString(a)&&(a=a.toFloat());return function(b){return b>a}}},{name:"gte",tag:">=",type:a,comment:function(a,b){return a+" 이(가) "+b+"보다 크거나 같은"},fn:function(a){h.isString(a)&&(a=a.toFloat());return function(b){return b>=a}}},{name:"lt",tag:"<",type:e,comment:function(a,b){return a+
" 이(가) "+b+"보다 작은"},fn:function(a){h.isString(a)&&(a=a.toFloat());return function(b){return b<a}}},{name:"lte",tag:"<=",type:e,comment:function(a,b){return a+" 이(가) "+b+"보다 작거나 같은"},fn:function(a){h.isString(a)&&(a=a.toFloat());return function(b){return b<=a}}},{name:"eq",tag:"=",type:d,comment:function(a,b){return a+" 이(가) "+b+"인"},fn:function(a){h.isString(a)&&(a=a.toFloat());return function(b){return b===a}}},{name:"neq",tag:"!=",type:c,comment:function(a,b){return a+" 이(가) "+b+"이(가) 아닌"},fn:function(a){h.isString(a)&&
(a=a.toFloat());return function(b){return b!==a}}},{name:"contains",tag:"*=",comment:function(a,b){return a+" 이(가) 숫자 "+b+"를 포함하는"},fn:function(a){a=h.isNumber(a)?a.toString():$.trim(a);return function(b){return b.toString().indexOf(a)!==-1}}},{name:"parser",fn:function(a){return a.toFloat()}},{name:"validator",fn:function(a){return!isNaN(a)}}];f._stringFilter=[{name:"to",tag:"<=",type:e,comment:function(a,b){return a+" 이(가) "+b+"보다 사전에서 이전인"},fn:function(a){a=$.trim(a).toLowerCase();return function(b){return b.toLowerCase()<=
a}}},{name:"from",tag:">=",type:a,comment:function(a,b){return a+" 이(가) "+b+"보다 사전에서 이후인"},fn:function(a){a=$.trim(a).toLowerCase();return function(b){return b.toLowerCase()>=a}}},{name:"equals",tag:"=",type:d,comment:function(a,b){return a+" 이(가) "+b+"와(과) 같은"},fn:function(a){a=$.trim(a).toLowerCase();return function(b){return b.toLowerCase()===a}}},{name:"notEquals",tag:"!=",type:c,comment:function(a,b){return a+" 이(가) "+b+"이(가) 아닌"},fn:function(a){a=$.trim(a).toLowerCase();return function(b){return b.toLowerCase()!==
a}}},{name:"startsWith",tag:"^=",comment:function(a,b){return a+" 이(가) "+b+"(으)로 시작하는"},fn:function(a){var a=$.trim(a).toLowerCase(),b=a.length;return function(d){return d.substr(0,b).toLowerCase()===a}}},{name:"endsWith",tag:"$=",comment:function(a,b){return a+" 이(가) "+b+"(으)로 끝나는"},fn:function(a){var a=$.trim(a).toLowerCase(),b=a.length;return function(d){return d.substr(d.length-b,d.length).toLowerCase()===a}}},{name:"contains",tag:"*=",comment:function(a,b){return a+" 이(가) "+b+"을(를) 포함하는"},fn:function(a){a=
$.trim(a).toLowerCase();return function(b){return b.toLowerCase().indexOf(a)!==-1}}},{name:"containsAny",tag:"|=",comment:function(a,b){return a+" 이(가) "+b+"들 중 하나 이상을 포함하는"},fn:function(a){var a=a.toLowerCase(),b=h.split(a),d=b.length;return d<=1?function(b){return b.toLowerCase().indexOf(a)!==-1}:function(a){for(var a=a.toLowerCase(),g=0;g<d;g++)if(a.indexOf(b[g])!==-1)return!0;return!1}}},{name:"containsAll",tag:"&=",comment:function(a,b){return a+" 이(가) "+b+"들 모두를 포함하는"},fn:function(a){var a=
a.toLowerCase(),b=h.split(a),d=b.length;return d<=1?function(b){return b.toLowerCase().indexOf(a)!==-1}:function(a){for(var a=a.toLowerCase(),g=0;g<d;g++)if(a.indexOf(b[g])===-1)return!1;return!0}}}]})();jx.grid.ViewportManager={};
(function(){function f(a){this.mid=a.mid;this._ctnr=a.container;this.grid=a.grid;this.grid.view=this;this._options=i._extend({attrRowIdx:"r",appendThreshold:3,renderThreshold:10,bufferSize:6,rowsPerPage:10,rowH:21,borderThickness:1,border:"solid #D0D7E5",padding:0,evenOddRows:!1,oddRowsBackground:"#F4F4F4",style:"",canvasStyle:"",rowStyle:"",cellStyle:"",classRow:"jgrid-row",classCell:"jgrid-cell",classView:"jgrid-viewport",classCanvas:"jgrid-canvas",focusBackground:"#FFF",focusOutline:"2px solid #f1ca7f",
autoHeight:!1,autoWidth:!1},a.options);this._padding=Number(this._getPadding());this._drag=!1;this._lastRowLen=this._lastScrollLeft=this._lastScrollTop=0;this._renderedRows={};this._lockedRows={};this._colLefts=[0];this._evtmgr=this.grid.event;this._datamgr=this.grid.dataMgr;this._colmgr=this.grid.colDefMgr;this._rowClass=this._options.classRow;this._cellClass=this._options.classCell;this._rowIdxAttr=this._options.attrRowIdx;this.__init()}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.grid.Grid"),
e=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");var b=goog.getObjectByName("jx.grid.Cell"),a={INPUT:!0,TEXTAREA:!0,LABEL:!0,FIELDSET:!0,LEGEND:!0,SELECT:!0,OPTGROUP:!0,OPTION:!0,BUTTON:!0},d={checkbox:!0,radio:!0};goog.exportSymbol("jx.grid.ViewportManager",f);f.getInstance=function(a){return new f(a)};var c=f.prototype;c.__init=function(){this._mask=$("<div class='"+this._options.classView+"' tabIndex='0' style='width:100%' onscroll='JGM.m.ViewportManager."+this.mid+
"._scroll()'>").appendTo(this._ctnr);this._canvas=$("<div class='"+this._options.classCanvas+"'>").appendTo(this._mask);this._canvasEl=this._canvas[0];this._mask.bind("selectstart.ui",function(a){return $(a.target).is("input, textarea")});this._setColLefts();this._setCanvasWidth(this._calCanvasWidth());this._lastRowLen=this._datamgr.datalist.length;this._evtmgr.bind({canvasFind:this._canvasFind,onCreateCss:this._onCreateCss,onCreateDynamicCss:this._onCreateDynamicCss,onDestroy:this._onDestroy,keydown:this._keydown,
keyup:this._keyup,keypress:this._keypress,mousein:this._mousein,mouseout:this._mouseout,mouseenter:this._mouseenter,mouseleave:this._mouseleave,mousemove:this._mousemove,mouseover:this._mouseover,mousedown:this._mousedown,mouseup:this._mouseup,click:this._click,dblclick:this._dblclick,resizeWidth:this._setWidth,"resizeWidth onResizeCol onResizeCanvasHeight":this._resizeWidth,onAfterRefresh:this.onAfterRefresh,onRenderModules:this._render,changeVisibleColumns:this._onReorderCols,onResizeCanvasWidth:this._scroll,
onUpdateDatarow:this.onUpdateDatarow,onUpdateDatalist:this.onUpdateDatalist,onRemoveDatarow:this.onRemoveDatarow,onRemoveDatalist:this.onRemoveDatalist,onIdChange:this.onIdChange,onIdListChange:this.onIdListChange,unsetDrag:this.unsetDrag},this)};c.unsetDrag=function(){this._drag=!1};c._onDestroy=function(){i._destroy(this,{name:"ViewportManager",path:"view",$:"_canvas _mask",property:"_ctnr",map:"_vars _lockedRows _renderedRows _options"})};c._onCreateCss=function(){var a="#"+this.grid.mid+" .",
b=this._options,d=a+this._cellClass,c=a+this._rowClass,e=this._getBorder()+"px "+b.border,f=this._colmgr.get(),h=f.length,i=0,m=[];m.push(a+b.classView+"{height:"+this._calHeight()+"px;outline:0;position:relative;white-space:nowrap;overflow:auto;line-height:"+b.rowH+"px;cursor:default;-moz-user-select:none;-webkit-user-select:none;"+b.style+";}");m.push(a+b.classView+":focus{background:"+b.focusBackground+";outline:"+b.focusOutline+"}");m.push(a+b.classCanvas+"{height:"+this._calCanvasHeight()+"px;"+
b.canvasStyle+";padding:0;border:0;margin:0;float:left;position:relative;white-space:nowrap;}");m.push(c+"{background:white;position:absolute;"+b.rowStyle+";padding:0;border:0;margin:0;float:left;}");m.push(d+"{height:"+b.rowH+"px;border-bottom:"+e+";display:-moz-inline-stack;display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;vertical-align:bottom;padding-left:"+this._getPadding()+"px;border-right:"+e+";"+b.cellStyle+";zoom:1;*display:inline;}");for(b.evenOddRows&&m.push(c+
".odd{background:"+b.oddRowsBackground+"}");i<h;i++)m.push(d+".k_"+f[i].key+"{"+f[i].style+"}");return m.join("")};c._onCreateDynamicCss=function(){for(var a="#"+this.grid.mid+" ."+this._cellClass,b=this._colmgr.get(),d="",c=b.length,e=0;e<c;e++)d+=a+".k_"+b[e].key+"{width:"+this._toStyleWidth(b[e].width)+"px}";return d};c.onUpdateDatarow=function(a){this.isRendered(a)&&this.rerenderRow(a)};c.onUpdateDatalist=function(a){for(var b,d=a.length,c=0;c<d;c++)b=a[c],this.isRendered(b)&&this.rerenderRow(b)};
c.onRemoveDatarow=function(a){this.destroyRow(a)};c.onRemoveDatalist=function(a){for(var b=a.length,d=0;d<b;d++)this.destroyRow(a[d])};c.onIdChange=function(a,b,d){this.isRowLockedById(b)&&(this._lockedRows[d]=this._lockedRows[b],delete this._lockedRows[b]);this.isRenderedById(b)&&((this._renderedRows[d]=this._renderedRows[b]).setAttribute("i",d),delete this._renderedRows[b])};c.onIdListChange=function(a,b,d){for(var c=a.length,e=0,f=this._lockedRows,h=this._renderedRows,i,m;e<c;e++)i=b[e],m=a[e][d],
f.hasOwnProperty(i)&&(f[m]=f[i],delete f[i]),h.hasOwnProperty(i)&&((h[m]=h[i]).setAttribute("i",m),delete h[i])};c._getCellSelector=function(){return"#"+this.grid.mid+" ."+this._cellClass};c._getRowSelector=function(){return"#"+this.grid.mid+" ."+this._rowClass};c.scrollTo=function(a,b){this.scrollToRow(a);this.scrollToCol(b)};c.scrollToRowLazy=function(a){var b=this.getScrollTop();return a==null?b:this._getLastSafeVisibleRow()<a?this.scrollToRow(this._getFirstRowForSafe(a)):this._getFirstSafeVisibleRow()>
a?this.scrollToRow(a):b};c.scrollToColLazy=function(a){var b=this.getScrollLeft();if(a==null)return b;if(this._getLastSafeVisibleCol()<a)return this.setScrollLeft(this.getScrollHForSafe(a));else if(this._getFirstSafeVisibleCol()>a)return this.scrollToCol(a);return b};c.scrollToLazy=function(a,b){this.scrollToRowLazy(a);this.scrollToColLazy(b)};c.scrollToRow=function(a){return a!=null?this.setScrollTop(this._getRowOuterHeight()*a):this.getScrollTop()};c.scrollToCol=function(a){return this.setScrollLeft(this.getColLeft(a))};
c._toStyleWidth=function(a){return i.quirk?a+this._colWidthPlus():a};c._getColInnerWidth=function(a){return this._colmgr.get(a).width};c._getColInnerWidthByKey=function(a){return this._colmgr.getByKey(a).width};c.getColWidth=function(a){return this._getColInnerWidth(a)+this._getPadding()};c.getColWidthByKey=function(a){return this._getColInnerWidthByKey(a)+this._getPadding()};c._getColOuterWidth=function(a){return this._getColInnerWidth(a)+this._colWidthPlus()};c._getColOuterWidthByKey=function(a){return this._getColInnerWidthByKey(a)+
this._colWidthPlus()};c._getPadding=function(){return this._padding||(this._padding=this._options.padding)};c._getBorder=function(){return this._border||(this._border=this._options.borderThickness)};c._colWidthPlus=function(){return this._columnWidthPlus||(this._columnWidthPlus=this._getPadding()+this._getBorder())};c._getRowOuterHeight=function(){return this._options.rowH+this._getBorder()};c._getRowInnerHeight=function(){return this._options.rowH};c._calHeight=function(){return this._options.autoHeight?
this._calCanvasHeight()+(this.grid.width()<this._calCanvasWidth()?this.grid._vars.scrollbarDim.h:0):this._getRowOuterHeight()*this._options.rowsPerPage};c.getHeight=function(){return this._mask[0].offsetHeight};c.getInnerHeight=function(){return this._mask[0].clientHeight};c._getWidth=function(){return this._mask[0].offsetWidth};c.getInnerWidth=function(){return this._mask[0].clientWidth};c._calCanvasHeight=function(){return this._getRowOuterHeight()*this._datamgr.datalist.length||1};c.getCanvasHeight=
function(){return this._canvasEl.clientHeight};c._setCanvasHeight=function(a){a=parseInt(a,10);if(isNaN(a)||a<1)a=1;var b=this.getCanvasHeight();if(a!=b)this._canvasEl.style.height=a+"px",this._evtmgr.trigger("onResizeCanvasHeight",[a,b],!0)};c._calCanvasWidth=function(){return this._colLefts[this._colmgr.length()]};c.getCanvasWidth=function(){return this._canvasEl.clientWidth};c._setCanvasWidth=function(a){typeof a!="number"&&(a=parseInt(a,10));if(isFinite(a)&&!(a<1)){var b=this.getCanvasWidth();
if(a!=b)this._canvasEl.style.width=a+"px",this._evtmgr.trigger("onResizeCanvasWidth",[a,b],!0)}};c.getColLeft=function(a){return this._colLefts[a]};c._getColLefts=function(){return this._colLefts};c._setColLefts=function(a,b){for(var a=a||0,d=this._colmgr.get(),c=this._colLefts[a],b=b||d.length;a<b;a++)c=this._colLefts[a+1]=c+this._getColOuterWidth(a);return this._colLefts};c._onReorderCols=function(){this._setColLefts();this._rerender()};c.setWidthByKey=function(a,b){var d=this._colmgr.getByKey(a),
b=e.bound(b,d.minW,d.maxW);if(b!==d.width){var c=this._evtmgr,f=this._colmgr,h=[a,b,d.width];d.width=b;this._setCanvasWidth(this._setColLefts(f.getIdxByKey(a))[f.length()]);this.grid._recreateDynamicCss();c.trigger("onResizeCol_"+a,h,!0);c.trigger("onResizeCol",h,!0)}};c._autoColWidth=function(a){for(var b=this._canvasFind(".k_"+a),d=Number.MIN_VALUE,c=b.length,e=0;e<c;e++)if(d<b[e].scrollWidth)d=b[e].scrollWidth;d-=this._getPadding();this.setWidthByKey(a,d)};c._setWidth=function(){};c.getScrollTop=
function(){return this._mask[0].scrollTop};c.getScrollLeft=function(){return this._mask[0].scrollLeft};c.setScrollTop=function(a){var b=this.getScrollTop();return a!=null&&b!=a?this._mask[0].scrollTop=a:b};c.setScrollLeft=function(a){var b=this.getScrollLeft();return a!=null&&b!=a?this._mask[0].scrollLeft=a:b};c._hasHScrollbar=function(){return this._mask[0].offsetHeight>this._mask[0].clientHeight};c._hasVScrollbar=function(){return this._mask[0].offsetWidth>this._mask[0].clientWidth};c._heightPlus=
function(){return this._mask[0].offsetHeight-this._mask[0].clientHeight};c._widthPlus=function(){return this._mask[0].offsetWidth-this._mask[0].clientWidth};c._getFirstVisibleRow=function(){return Math.floor(this.getScrollTop()/this._getRowOuterHeight())};c._getFirstSafeVisibleRow=function(){return Math.ceil(this.getScrollTop()/this._getRowOuterHeight())};c._getLastVisibleRow=function(){return Math.ceil((this.getScrollTop()+this._mask[0].clientHeight)/this._getRowOuterHeight())-1};c._getLastSafeVisibleRow=
function(){return Math.floor((this.getScrollTop()+this._mask[0].clientHeight)/this._getRowOuterHeight())-1};c._getFirstRowForSafe=function(a){return a-Math.floor(this._mask[0].clientHeight/this._getRowOuterHeight())+1};c._getFirstVisibleCol=function(){for(var a=this.getScrollLeft(),b=this._colLefts,d=0,c=b.length;d<c;d++){if(b[d]>a)return d-1;if(b[d]===a)return d}return c-2};c._getFirstSafeVisibleCol=function(){for(var a=this.getScrollLeft(),b=this._colLefts,d=0,c=b.length;d<c;d++)if(b[d]>=a)return d;
return c-2};c._getLastVisibleCol=function(){for(var a=this.getScrollLeft()+this._mask[0].clientWidth,b=this._colLefts,d=0,c=b.length;d<c;d++)if(b[d]>=a)return d-1;return c-2};c._getLastSafeVisibleCol=function(){for(var a=this.getScrollLeft()+this._mask[0].clientWidth,b=this._colLefts,d=0,c=b.length;d<c;d++)if(b[d]>a)return d-2;return c-2};c._getFirstColForSafe=function(a){var b=this._colLefts,d=b[a+1]-this._mask[0].clientWidth,c=a;if(d<=0)return 0;for(;c>=0;c--){if(c===a&&b[c]<=d||b[c]===d)return c;
if(b[c]<d)return c+1}return 0};c.getScrollHForSafe=function(a){var b=this._colLefts,d=b[a+1]-this._mask[0].clientWidth;return b[a]<=d?b[a]:d};c._getRenderRange=function(){if(this._options.autoHeight)return{start:0,end:this._datamgr.datalist.length-1};var a,b=this._datamgr.datalist.length-1;return{start:(a=this._getFirstVisibleRow()-this._options.bufferSize)<0?0:a,end:(a=this._getLastVisibleRow()+this._options.bufferSize)>b?b:a}};c._fitHeight=function(){this._mask[0].style.height=this.getCanvasHeight()+
this._heightPlus()+"px"};c._resizeWidth=function(){this._options.autoHeight&&this._fitHeight()};c.onAfterRefresh=function(a){a!==void 0&&a.noRerender===!0||this._rerender()};c._rerender=function(){var a=this.getScrollTop(),b=this.getScrollLeft();this._evtmgr.trigger("onBeforeRerender",!1,!0);this.unlockAllRows();this._removeRows();var d=this._datamgr.datalist.length;if(this._lastRowLen!==d)this._lastRowLen=d,this._setCanvasHeight(this._calCanvasHeight());this._render();this.setScrollTop(a);this.setScrollLeft(b);
this._evtmgr.trigger("onAfterRerender",!1,!0)};c.rerender=c._rerender;c._render=function(a){this._removeAndRenderRows(a)};c._renderShift=function(a){a=a||this._getRenderRange();this._removeRowsExcept(a);this._appendRows(a)};c._removeRows=function(a){var b=this._canvasEl,d=this._renderedRows,c=this._lockedRows,e;if(a)for(var f=a.start,a=a.end,h=this._datamgr;f<=a;f++){if(!c.hasOwnProperty(e=h.getIdByIdx(f))&&d.hasOwnProperty(e))b.removeChild(d[e]),delete d[e]}else if(this._lockExist())for(e in d)!c.hasOwnProperty(e)&&
d.hasOwnProperty(e)&&(b.removeChild(d[e]),delete d[e]);else this._renderedRows={},b.innerHTML=""};c._removeRowsExcept=function(a){var b=this._canvasEl,d=this._renderedRows,c=this._lockedRows,e;if(a){var f=a.start,a=a.end,h=this._datamgr,i;for(e in d)if(d.hasOwnProperty(e)&&!(c.hasOwnProperty(e)||f<=(i=h.getIdxById(e))&&i<=a))b.removeChild(d[e]),delete d[e]}else if(this._lockExist())for(e in d)d.hasOwnProperty(e)&&c.hasOwnProperty(e)===!1&&(b.removeChild(d[e]),delete d[e]);else this._renderedRows=
{},b.innerHTML=""};c.destroyRow=function(a){return this.destroyRowById(this._datamgr.getId(a))};c.destroyRowById=function(a){a!=null&&(this.unlockRowById(a),this._renderedRows.hasOwnProperty(a)&&(this._canvasEl.removeChild(this._renderedRows[a]),delete this._renderedRows[a]))};c.destroyRowByIdx=function(a){return this.destroyRowById(this._datamgr.getIdByIdx(a))};c._lockExist=function(){return e.isNotEmptyObj(this._lockedRows)};c.isRowLockedById=function(a){return a!=null?this._lockedRows.hasOwnProperty(a):
!1};c.isRowLocked=function(a){return this.isRowLockedById(this._datamgr.getId(a))};c.isRowLockedByIdx=function(a){return this.isRowLockedById(this._datamgr.getIdByIdx(a))};c.lockRowById=function(a){a!=null&&this._datamgr.hasById(a)&&(this._lockedRows[a]=!0)};c.lockRow=function(a){return this.lockRowById(this._datamgr.getId(a))};c.lockRowByIdx=function(a){return this.lockRowById(this._datamgr.getIdByIdx(a))};c.unlockRowById=function(a){this.isRowLockedById(a)&&delete this._lockedRows[a]};c.unlockRow=
function(a){return this.unlockRowById(this._datamgr.getId(a))};c.unlockRowByIdx=function(a){return this.unlockRowById(this._datamgr.getIdByIdx(a))};c.unlockAllRows=function(){this._lockedRows={}};c.rerenderRowById=function(a){if(this._datamgr.containsById(a)){var b=this._renderedRows,d=this._canvasEl,c=this._datamgr,f=c.idKey,h=c.getIdxById(a),c=c.getById(a),i=this._colmgr.get(),l=this._getColCellClasses(i).map(function(a){return"<div class='"+a+" "}),m=this._getRendererSettings(i),q=m[0],m=m[1],
s=this._getRowOuterHeight(),t="<div class='"+this._rowClass+" odd' i='",u="<div class='"+this._rowClass+"' i='",w="' "+this._rowIdxAttr+"='",v=[];b.hasOwnProperty(a)&&(d.removeChild(b[a]),this._evtmgr.trigger("onBeforeRenderRows",[[h]],!0),v.push((h%2?u:t)+c[f]+w+h+"' style='top:"+s*h+"px'>"),this._renderRow(v,h,c,i,l,q,m),b[a]=e.appendHTML(d,v.join(""))[0],this._evtmgr.trigger("onAppendRows",[[h]],!0))}};c._getRendererSettings=function(a){for(var a=a||this._colmgr.get(),b=0,d=a.length,c,e=[],f=[],
h;b<d;b++)c=a[b],(h=c.renderer)?(e.push(!!c.rendererInput),f.push(h)):(e.push(!1),f.push(!1));return[f,e]};c.rerenderRow=function(a){return this.rerenderRowById(this._datamgr.getId(a))};c.rerenderRowByIdx=function(a){return this.rerenderRowById(this._datamgr.getIdByIdx(a))};c.rerenderCellByIdAndKey=function(a,b){var d=this.getCellByIdAndKey(a,b);if(d){var c=this._datamgr,e=this._colmgr,f=c.getById(a),h=e.getByKey(b),c=c.getIdxById(a),e=e.getIdxByKey(b),i=h.renderer,m=[];this._renderCell(m,c,e,f,h,
i,i?h.rendererInput:!1);d.innerHTML=m.join("")}};c.rerenderCellByIdx=function(a,b){return this.rerenderCellByIdAndKey(this._datamgr.getIdByIdx(a),this._colmgr.getKeyByIdx(b))};c._appendRows=function(a){var b=this._evtmgr,d=[a],c=[],f=a.start,a=a.end,h=this._datamgr,i=h.datalist,l=h.idKey,m=this._colmgr.get(),q=this._getColCellClasses(m).map(function(a){return"<div class='"+a+" "}),h=this._renderedRows,s=this._getRowOuterHeight(),t=this._canvasEl,u="<div class='"+this._rowClass+" odd' i='",w="<div class='"+
this._rowClass+"' i='",v="' "+this._rowIdxAttr+"='",x=this._getRendererSettings(m),B=x[0],A=x[1],y,z,x=[];for(b.trigger("onBeforeRenderRows",d,!0);f<=a;f++)y=i[f],z=y[l],h.hasOwnProperty(z)||(c[c.length]=(f%2?w:u)+z+v+f+"' style='top:"+s*f+"px'>",this._renderRow(c,f,y,m,q,B,A),x.push(z));c=e.appendHTML(t,c.join(""));f=0;for(a=x.length;f<a;f++)h[x[f]]=c[f];b.trigger("onAppendRows",d,!0)};c._removeAndRenderRows=function(a){var a=a||this._getRenderRange(),b=this._evtmgr,d=[a],c=[],e=a.start,a=a.end,
f=this._datamgr,h=f.datalist,f=f.idKey,i=this._colmgr.get(),m=this._getColCellClasses(i).map(function(a){return"<div class='"+a+" "}),q=this._getRowOuterHeight(),s=this._canvasEl,t="<div class='"+this._rowClass+" odd' i='",u="<div class='"+this._rowClass+"' i='",w="' "+this._rowIdxAttr+"='",v=this._getRendererSettings(i),x=v[0],v=v[1],B,A,y=[],z={};for(b.trigger("onBeforeRenderRows",d,!0);e<=a;e++)B=h[e],A=B[f],c[c.length]=(e%2?u:t)+A+w+e+"' style='top:"+q*e+"px'>",this._renderRow(c,e,B,i,m,x,v),
y.push(A);s.innerHTML=c.join("");e=0;for(a=y.length;e<a;e++)z[y[e]]=s.childNodes[e];this._renderedRows=z;b.trigger("onAppendRows",d,!0)};c._renderColumn=function(a,d,c,f,h,i,p){for(var l=[],m,q=0,s=c.length,t,u,w,v=d.key,x,B=this.grid,A=this._evtmgr,y="onRenderCell_"+v,z=[null,a,u,d],C=[null,a,null,d,null];q<s;q++){t=c[q];u=f[t];w=u[v];m=[];C[0]=z[0]=t;C[2]=u;C[4]=m;x=A.trigger("onGetCellClass",z);m[m.length]=x?h+x.join(" ")+"'>":h+"'>";A.trigger(y+"_prepend",C,!0);if(typeof w!="string"||w.substring(0,
3)!=="J@H")i?m[m.length]=p?i(new b({grid:B,row:t,col:a,datarow:u,colDef:d})):i(w,t,a,u,d):w!=null&&(m[m.length]=e.getHTMLText(w));A.trigger(y+"_append",C,!0);m[m.length]="</div>";l[l.length]=m.join("")}return l};c._getColCellClass=function(a){var b=this._cellClass+" k_"+a.key;a.colClass&&(b+=" "+a.colClass);(a=this._evtmgr.trigger("onGetColCellClass",[a]))&&(b+=" "+a.join(" "));return b};c._getColCellClasses=function(a){var b=this;return(a||this._colmgr.get()).map(function(a){return b._getColCellClass(a)})};
c._renderRow=function(a,b,d,c,f,h,i){for(var l=0,m=c.length,q,s=[b,null,d,null],t=this._evtmgr,u;l<m;l++)q=c[l],s[1]=l,s[3]=q,u=t.trigger("onGetCellClass",s),a[a.length]=f[l],u&&(a[a.length]=u.join(" ")),u=d[q.key],a[a.length]=u==null||u===""?"'>":"' title='"+e.getHTMLText(u).replace(/'/g,"&#39;")+"'>",this._renderCell(a,b,l,d,q,h[l],i[l]),a[a.length]="</div>";a[a.length]="</div>";return a};c._renderCell=function(a,d,c,f,h,i,p){var l=h.key,m=f[l],q=[d,c,f,h,a],s=this._evtmgr,l="onRenderCell_"+l;s.trigger(l+
"_prepend",q,!0);if(typeof m!="string"||m.substring(0,3)!=="J@H")i?a[a.length]=p?arguments[5](new b({grid:this.grid,row:d,col:c,datarow:f,colDef:h})):arguments[5](m,d,c,f,h):m==null||m===""||(a[a.length]=e.getHTMLText(m));s.trigger(l+"_append",q,!0)};b.prototype.rerender=function(){return this.grid.view.rerenderCellByIdAndKey(this.getId(),this.getKey())};b.prototype.scrollTo=function(){this.grid.view.scrollTo(this.getRowIdx(),this.getColIdx())};c._keydown=function(a){e.contains(this._mask[0],document.activeElement,
this._ctnr[0])&&(this._evtmgr.trigger("keydownCanvas_"+a.which,[a],!0),this._evtmgr.trigger("keydownCanvas",[a],!0))};c._keyup=function(a){e.contains(this._mask[0],document.activeElement,this._ctnr[0])&&(this._evtmgr.trigger("keyupCanvas_"+a.which,[a],!0),this._evtmgr.trigger("keyupCanvas",[a],!0))};c._keypress=function(a){e.contains(this._mask[0],document.activeElement,this._ctnr[0])&&(this._evtmgr.trigger("keypressCanvas_"+a.which,[a],!0),this._evtmgr.trigger("keypressCanvas",[a],!0))};c._mousein=
function(a){this._drag?this._triggerMouseEvent(a,"draginCanvas,mouseinCanvas",h.V_MOUSEIN):this._triggerMouseEvent(a,"mouseinCanvas",h.V_MOUSEIN)};c._mouseout=function(a){this._drag?this._triggerMouseEvent(a,"dragoutCanvas,mouseoutCanvas",h.V_MOUSEOUT):this._triggerMouseEvent(a,"mouseoutCanvas",h.V_MOUSEOUT)};c._mouseenter=function(a){this._drag?this._triggerMouseEvent(a,"dragenterCanvas,mouseenterCanvas",h.V_MOUSEENTER):this._triggerMouseEvent(a,"mouseenterCanvas",h.V_MOUSEENTER)};c._mouseleave=
function(a){this._drag?this._triggerMouseEvent(a,"dragleaveCanvas,mouseleaveCanvas",h.V_MOUSELEAVE):this._triggerMouseEvent(a,"mouseleaveCanvas",h.V_MOUSELEAVE)};c._mousemove=function(a){this._drag?this._triggerMouseEvent(a,"dragmoveCanvas,mousemoveCanvas",h.V_MOUSEMOVE):this._triggerMouseEvent(a,"mousemoveCanvas",h.V_MOUSEMOVE)};c._mouseover=function(a){this._drag?this._triggerMouseEvent(a,"dragoverCanvas,mouseoverCanvas",h.V_MOUSEOVER):this._triggerMouseEvent(a,"mouseoverCanvas",h.V_MOUSEOVER)};
c._mousedown=function(a){if(this._triggerMouseEvent(a,"mousedownCanvas",h.V_MOUSEDOWN))this._drag=!0};c._mouseup=function(a){this._drag=!1;this._triggerMouseEvent(a,"mouseupCanvas",h.V_MOUSEUP)};c._click=function(a){this._triggerMouseEvent(a,"clickCanvas",h.V_CLICK)&&this.focus(a)};c._dblclick=function(a){this._triggerMouseEvent(a,"dblclickCanvas",h.V_DBLCLICK)};c._triggerMouseEvent=function(c,e){var j=c.target;if(j){var f=j.tagName,j=j.type&&j.type.toLowerCase();if(d[j]||!a[f])if(f=this._getClosestCell(c.target)){var j=
new b({grid:this.grid,node:f}),f=j.getKey(),j=[c,j],h=this._evtmgr;if(e.indexOf(",")>-1)for(var i=e.split(","),p=0,l=i.length,m;p<l;p++)m=i[p],h.trigger(m+"_"+f,j,!0),h.trigger(m,j,!0);else h.trigger(e+"_"+f,j,!0),h.trigger(e,j,!0);return!0}}return!1};c._scroll=function(){var a=this.getScrollTop(),b=a-this._lastScrollTop,d=this.getScrollLeft(),c=d-this._lastScrollLeft;if(b!==0||c!==0){var e=this._evtmgr,b=Math.abs(b/this._getRowOuterHeight());e.trigger("onScrollViewport",!1,!0);if(c)this._lastScrollLeft=
d,e.trigger("onScrollViewportH",[d],!0);d=this.renderElapsed;d==null&&(d=50);d>500&&(d=500);if(b>=this._options.appendThreshold){if(this.scrollHandlerId)window.clearTimeout(this.scrollHandlerId),this.scrollHandlerId=null;var f=this;this.scrollHandlerId=window.setTimeout(function(){var b=(new Date).getTime();f._lastScrollTop=a;f._removeAndRenderRows();e.trigger("onScrollViewportV",!1,!0);f.renderElapsed=(new Date).getTime()-b},d)}}};c.focus=function(a){a&&this._evtmgr.triggerInvalid("onBeforeFocusCanvas",
[a])};c.isRenderedById=function(a){return a!=null?this._renderedRows.hasOwnProperty(a):!1};c.isRendered=function(a){return this.isRenderedById(this._datamgr.getId(a))};c.isRenderedByIdx=function(a){return this.isRenderedById(this._datamgr.getIdByIdx(a))};c.getRowById=function(a){if(this.isRenderedById(a))return this._renderedRows[a]};c.getRow=function(a){return this.getRowById(this._datamgr.getId(a))};c.getRowByIdx=function(a){return this.getRowById(this._datamgr.getIdByIdx(a))};c.getRenderedRowById=
function(a){if(this.isRenderedById(a))return this._renderedRows[a]};c.getRenderedRow=function(a){return this.getRenderedRowById(this._datamgr.getId(a))};c.getRenderedRowByIdx=function(a){return this.getRenderedRowById(this._datamgr.getIdByIdx(a))};c.getRenderedRows=function(){return e.toArray(this._renderedRows)};c.getCell=function(a,b){if(b!=null){var d=this.getRowByIdx(a);if(d)return d.childNodes[b]}};c.getCellByIdAndKey=function(a,b){var d=this._colmgr.getIdxByKey(b);if(d!=null){var c=this.getRowById(a);
if(c)return c.childNodes[d]}};c.getRenderedCell=function(a,b){if(b!=null){var d=this.getRenderedRowByIdx(a);if(d)return d.childNodes[b]}};c.getRenderedCellByIdAndKey=function(a,b){var d=this._colmgr.getIdxByKey(b);if(d!=null){var c=this.getRenderedRowById(a);if(c)return c.childNodes[d]}};c._getClosestCell=function(a){return e.closestWithTag(a,"DIV",this._cellClass,this._canvasEl)};c._getClosestRow=function(a){return e.closestWithTag(a,"DIV",this._rowClass,this._canvasEl)};c._getClosestRowIdx=function(a){return this._datamgr.getIdxByNode(this._getClosestRow(a))};
c._canvasFind=function(a){return this._canvas.find(a)};f._renderer=function(a){return a==null?"":a}})();jx.grid.ColumnManager={};
(function(){function f(a){this.mid=a.mid;this.grid=a.grid;this.grid.colDefMgr=this;this._options=c._extend({colDef:{type:"string",key:void 0,name:"",colClass:void 0,defaultValue:void 0,inputOnCreate:void 0,style:"",headerStyle:"",width:80,minW:0,maxW:void 0,editor:void 0,sorter:void 0,hidden:!1,sumRenderer:void 0,tooltipEnabled:!1,resizable:!1,renderer:void 0,rendererInput:!1,noTitle:!1,noName:!1,title:void 0,noSearch:!1,filter:void 0,parser:void 0,validator:void 0,nullOnCreate:!1,notNull:!1,printFormat:void 0,
saveFormat:void 0},saveInitialColDefs:!1},a.options);this._colDefs=[];this._filtered=[];this._keyToDef={};this._keyToIdx={};this._parsers={};this._sorters={};this._validators={};this._nullOnCreates={};this._groupsByName=this._groups=null;this.__init(a);if(this._options.saveInitialColDefs)this._initialColDefs=$.extend(!0,[],this._colDefs)}function i(a){if(a)switch(a=a.toLowerCase(),a){case "bool":case "boolean":return"boolean";case "int":case "integer":case "long":case "short":return"int";case "float":case "double":case "number":case "num":case "numeric":return"float";
case "str":case "string":case "text":return"string";case "date":case "datetime":case "time":case "timestamp":return"date"}return null}function h(a){if(typeof a!="boolean"){if(!a)return!1;switch(a.toString().toLowerCase()){case "0":case "n":case "no":case "false":case "f":case "off":case "disable":case "disabled":case "null":case "undefined":case "nil":case "fail":case "not":return!1}return!0}return a}function e(a){return typeof a!="string"?a==null?"":a.toString():a}function b(a){return new Date(Date.parse(a))}
function a(a,b){switch(typeof a){case "undefined":return Number.MAX_VALUE;case "boolean":return a?1:0;case "number":return a;case "string":return a[b]();default:if(a==null)return Number.MAX_VALUE}a=a.valueOf();switch(typeof a){case "undefined":return Number.MAX_VALUE;case "boolean":return a?1:0;case "number":return a;case "string":return a[b]();default:return a==null?Number.MAX_VALUE:a.toString()[b]()}}function d(a){switch(typeof a){case "undefined":return Number.MAX_VALUE;case "boolean":return a?
1:0;case "number":return a}return a==null?Number.MAX_VALUE:h(a)?1:0}var c=goog.getObjectByName("jx.grid"),g=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("jx.grid.Grid");goog.getObjectByName("jx.grid.Column");goog.getObjectByName("jx.grid.ViewportManager");goog.exportSymbol("jx.grid.ColumnManager",f);f.getInstance=function(a){return new f(a)};var k=f.prototype;k.__init=function(a){this.grid.event.bind("onDestroy",this._destroy,this);this.set(a.colDefs)};
k._destroy=function(){c._destroy(this,{name:"ColumnManager",path:"colDefMgr",property:"_colDefs",map:"_keyToIdx _keyToDef _options",array:"_filtered"})};k.getAll=function(){return this._colDefs};k.empty=function(){this._colDefs=[];this._filtered.length=0;this._keyToIdx={};this._keyToDef={};this._parsers={};this._sorters={};this._validators={};this._nullOnCreates={};this._groupsByName=this._groups=null};k.getInitialColDefs=function(){return this._initialColDefs};k.set=function(a){a=a||[];if(this._colDefs===
a)return a;this.empty();this.eventChangeVisible();var b=0,d=a.length,c,g,e=a.some(function(a){return a.parent!=null});if(e)var f=this._groups=[],k=this._groupsByName={};for(;b<d;b++){c=a[b];g=c.key;try{if(this.hasKey(g,!0))throw Error("duplicate column key, key = "+g);}catch(h){throw this.empty(),h;}e&&(g=c.parent==null?c.key:c.parent,k.hasOwnProperty(g)||f.push(k[g]=[]),k[g].push(c));this._extend(c)}if(e){b=0;d=f.length;for(a=[];b<d;b++){k=f[b];c=0;for(e=k.length;c<e;c++)a.push(k[c])}}this._colDefs=
a;this._filter();this.eventChangeVisible();return a};k.reorganizeGroups=function(){if(this.hasGroups()){for(var a=this._colDefs,b=0,d=a.length,c,g=this._groups=[],e=this._groupsByName={},f;b<d;b++)c=a[b],f=c.parent==null?c.key:c.parent,e.hasOwnProperty(f)||g.push(e[f]=[]),e[f].push(c);b=0;d=g.length;for(f=[];b<d;b++){e=g[b];a=0;for(c=e.length;a<c;a++)f.push(e[a])}this._colDefs=f}};k.hasGroups=function(){return!!this._groups};k.getGroups=function(){return this._groups};k.getGroupByName=function(a){if(a!=
null&&this._groupsByName&&this._groupsByName.hasOwnProperty(a))return this._groupsByName[a]};k.getGroupByGroupIdx=function(a){return this._groups[a]};k.getGroupIndexByKey=function(a){var b=this._groups;if(b)for(var d=0,c=b.length,g,e,f;d<c;d++){g=b[d];e=0;for(f=g.length;e<f;e++)if(g[e].key==a)return d}return null};k.getSorter=function(a){if(a==null)return this._sorters;if(this.hasKey(a,!0)){var b=this._sorters;return b.hasOwnProperty(a)?b[a]:null}throw Error("column key not found! key="+a);};k.getValidator=
function(a){if(a==null)return this._validators;if(this.hasKey(a,!0)){var b=this._validators;return b.hasOwnProperty(a)?b[a]:null}throw Error("column key not found! key="+a);};k.getParser=function(a){if(a==null)return this._parsers;if(this.hasKey(a,!0)){var b=this._parsers;return b.hasOwnProperty(a)?b[a]:null}throw Error("column key not found! key="+a);};k.getNullOnCreate=function(a){if(a==null)return this._nullOnCreates;if(this.hasKey(a,!0))return this._nullOnCreates.hasOwnProperty(a);throw Error("column key not found! key="+
a);};k.push=function(a){return this.addAt(this._filtered.length,a)};k.addAt=function(a,b){var d=b.key,c=this._colDefs;if(this.hasKey(d,!0))throw Error("duplicate column key, key = "+d);if(a<0||a>c.length)throw Error("index out of bound, i = "+a);c.addAt(a,this._extend(b));this.reorganizeGroups();this._filter();this.eventChangeVisible();return c.length};k._extend=function(a){if(a&&!a._extended){a._extended=!0;var d={},c,g;$.extend(!0,d,this._options.colDef);$.extend(!0,d,a);$.extend(!0,a,d);g=a.type=
i(a.type);d=a.key.toString();this._keyToDef[d]=a;if(c=a.sorter){typeof c=="string"?c=i(c):g&&(c=g);if(c=f.sorter(c,d))c.key=d,this._sorters[d]=c;a.sorter=c}if(c=a.parser){if(g&&typeof c!="function"){switch(g){case "boolean":c=h;break;case "int":c=function(a){return parseInt(a,10)};break;case "float":c=parseFloat;break;case "string":c=e;break;case "date":c=b;break;default:c=null}a.parser=c}this._parsers[d]=c}a.inputOnCreate=!!a.inputOnCreate;a.hidden=!!a.hidden;a.tooltipEnabled=!!a.tooltipEnabled;
a.resizable=!!a.resizable;a.rendererInput=!!a.rendererInput;a.noTitle=!!a.noTitle;a.noName=!!a.noName;a.noSearch=!!a.noSearch;a.nullOnCreate=!!a.nullOnCreate;if(g=a.validator)this._validators[d]=g;a.nullOnCreate&&(this._nullOnCreates[d]=!0)}return a};k.setVisible=function(a,b){var d=this.getByKey(a,!0);if(!d)throw Error("column key not found! key="+a);b=!!b;if(!d.hidden!==b)d.hidden=!b,this._filter(),this.eventChangeVisible();return d};k.show=function(a){return this.setVisible(a,!0)};k.hide=function(a){return this.setVisible(a,
!1)};k._filter=function(){this._filtered=this._colDefs.filter(function(a){return!a.hidden});this._reidx();return this._filtered};k._reidx=function(a){for(var a=a||0,b=this._filtered,d=b.length,c=this._keyToIdx={};a<d;a++)c[b[a].key]=a;return c};k.get=function(a){if(a==null)return this._filtered;var b=this._filtered;if(a<0||a>=b.length)throw Error("index out of bound, i = "+a);return this._filtered[a]};k.checkKey=function(a,b){if(a==null){if(b)throw Error("column key is null");return!1}typeof a!="string"&&
(a=a.toString());if(!a&&b)throw Error("column key is empty");return!0};k.mapKeys=function(a){var b=this;return a.map(function(a){var d=b.getByKey(a,!0);if(!d)throw Error("column key not found! key="+a);return d})};k.getByKey=function(a,b){return this.hasKey(a,b)?this._keyToDef[a]:null};k.hasKey=function(a,b){return this.checkKey(a,b)?this._keyToDef.hasOwnProperty(a):!1};k.length=function(){return this._filtered.length};k.getIdxByKey=function(a){return this._keyToIdx.hasOwnProperty(a)?this._keyToIdx[a]:
-1};k.getIdx=function(a){return g.isNotNull(a)&&this._keyToIdx.hasOwnProperty(a.key)?this._keyToIdx[a.key]:-1};k.sortByKey=function(a){var b=this._filtered,d=this._keyToIdx={};b.length=0;this.grid.event.trigger("onReorderCols",[this.mapKeys(a).forEach(function(a,c){a.hidden||(b.push(a),d[a.key]=c)})],!0);this.eventChangeVisible();return b};k.eventChangeVisible=function(){this.grid.event.trigger("changeVisibleColumns",[this._filtered])};k.getKeys=function(){return this._filtered.map(function(a){return a.key})};
f.sorter=function(b,c,g){g={on:!!g,key:c};switch(b){case "boolean":return g.comparator=function(a,b){return d(a[c])-d(b[c])},g;case "string":return g.lexi=c,g;case "int":return g.comparator=function(b,d){return a(b[c],"toInt")-a(d[c],"toInt")},g;case "float":return g.comparator=function(b,d){return a(b[c],"toFloat")-a(d[c],"toFloat")},g;case "date":return g.comparator=function(b,d){return a(b[c],"toInt")-a(d[c],"toInt")},g}return null}})();jx.grid.ColumnHeader={};
(function(){function f(a){e.call(this,a)}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util"),e=goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("jx.grid.Grid");var b=h.element;goog.exportSymbol("jx.grid.ColumnHeader",f);goog.inherits(f,e);f.getInstance=function(a){return new f(a)};var a=f.prototype;a._init=function(a){var d;this.grid.header=this;this._map={};this._resizeMap={};this._sorters=[];this._sortersMap={};this._resizeKey=this._resizeInitX=this._resizeHandleInitX=
this._resizeInitWidth=this._resizeInitColWidth=this._resizeGuide=this._resizeHandleOffset=null;var c=this._options,a=this._mask=$(b("div",{"class":c.classHeaderMask})).prependTo(this._ctnr=a.container);if(this.getColMgr().hasGroups())this._doubleHead=$(b("div",{"class":c.classHeader})).appendTo(a);d=this._head=$(b("div",{"class":c.classHeader})).appendTo(a),c=d;f._disableSel(c)};a._bindEvents=function(){var a,b=this.getColumns(),g=b.length,e=0;for(a={onRenderModules:this._onRenderModules,onAfterRenderModules:this._onAfterRenderModules,
mousedown:this._mousedown,mouseup:this._mouseup,dragmove:this._dragmove,onScrollViewportH:this._onScrollViewportH,onScrollViewportV:this._onScrollViewportV,onChangeSorter:this._onChangeSorter,click:this._click,onResizeCol:this._setWidthByKey};e<g;e++)if(b[e].sorter)a["clickHeader_"+b[e].key]=this._sort;this.bindGridEvent(a,this)};a._defaultOptions=function(a){a=a._options.imageUrl;return{reorderEnabled:!1,reorderSyncEnabled:!0,background:"url("+a+"column-headers-bg.png) repeat-x scroll center",backgroundHover:"url("+
a+"column-headers-over-bg.png) repeat-x scroll center",backgroundPlaceholder:"#646464",sortBackground:a+"sort.png",sortRight:4,sortWidth:7,sortBackgroundAsc:a+"sort-asc.png",sortBackgroundDesc:a+"sort-desc.png",headerMoreButton:a+"header-more-button.gif",font:"15px Arial,Helvetica,sans-serif",height:21,borderThickness:1,border:"solid #909192",classHeaderMask:"jgrid-header-mask",classHeader:"jgrid-header",classColHeader:"jgrid-colheader",classColHeaderActive:"jgrid-colheader-active",classColHeaderPlaceholder:"jgrid-colheader-placeholder",
classInteractive:"interactive",classColHeaderTitle:"jgrid-colheader-title",classColHeaderSorted:"jgrid-colheader-sorted",classSort:"jgrid-sort",classSortAsc:"jgrid-sort-asc",classSortDesc:"jgrid-sort-desc",classSortOrder:"jgrid-sort-order",classResizeHandle:"jgrid-resize-handle",resizeHandleWidth:5,style:"",headerStyle:"",scrollerLeft:1E4,scrollerWidth:1E5,classResizeGuide:"resize-guide",resizeGuideWidth:1,resizeBackground:"black;filter:alpha(opacity=40);opacity:0.4",syncResize:!1,resizeHandleBackground:"black;filter:alpha(opacity=10);opacity:0.10"}};
a._beforeDispose=function(){this._head.sortable&&this._head.sortable("destroy");this._destroyResizeHandles();i._destroy(this,{name:"ColumnHeader",path:"header",$:"_resizeGuide _mask _head",property:"_ctnr _resizeMap",map:"_map _options _sortersMap",array:"_sorters"});this.dispose()};a._destroyResizeHandles=function(){var a=this._resizeMap,b;for(b in a)a.hasOwnProperty(b)&&(a[b].remove(),delete a[b]);delete this._resizeKey;delete this._resizeInitX;delete this._resizeHandleInitX;delete this._resizeInitWidth;
delete this._resizeInitColWidth};a._beforeCreateCss=function(a){var b="#"+this.grid.mid+" .",g=this._options,e=this._getBorder()+"px "+g.border,f=this.getColumns(),h=f.length,i=0,o="."+g.classColHeader,p=g.scrollerLeft,l=g.height+"px",m=g.classColHeaderActive,q={};q["."+g.classHeaderMask]={position:"relative",overflow:"hidden",width:"100%",font:g.font,background:g.background,"border-bottom":e,_append:g.style};q["."+g.classHeader]={position:"relative",overflow:"hidden","white-space":"nowrap",cursor:"default",
background:g.background,left:-p+"px","float":"left",width:g.scrollerWidth+"px","line-height":l};q[o]={position:"relative",overflow:"hidden","float":"left","text-overflow":"ellipsis","text-align":"center","vertical-align":"middle",height:l,left:p-this.getView().getScrollLeft()+"px","border-right":e,_append:g.headerStyle};q[o+"."+g.classInteractive+":hover, "+b+m]={cursor:"pointer",background:g.backgroundHover};q["."+m]={"border-left":e};q[o+"."+g.classColHeaderPlaceholder]={background:g.backgroundPlaceholder+
"!important"};q[".jgrid-header-text"]={"vertical-align":"middle"};q[".jgrid-header-more"]={position:"absolute",cursor:"pointer",height:"100%",width:"14px",right:0,top:0};q[".jgrid-header-more:hover"]={"border-left":"1px solid black",background:"url("+g.headerMoreButton+") no-repeat left center"};q["."+g.classSort]={position:"absolute",height:"100%",top:(g.sortTop||0)+"px",width:g.sortWidth+"px",background:"url("+g.sortBackground+") no-repeat center transparent"};q["."+g.classSortAsc]={background:"url("+
g.sortBackgroundAsc+") no-repeat center transparent"};q["."+g.classSortDesc]={background:"url("+g.sortBackgroundDesc+") no-repeat center transparent"};q["."+g.classSortOrder]={position:"absolute","font-size":g.sortWidth+"px",top:"0px",height:"100%",width:g.sortWidth+10+"px"};q["."+g.classResizeHandle]={"z-index":10,background:g.resizeHandleBackground,cursor:"e-resize",position:"absolute",top:(g.resizeHandleTop||0)+"px",height:"100%",width:g.resizeHandleWidth+"px"};for(q["."+g.classResizeGuide]={"z-index":10,
position:"absolute",background:g.resizeBackground,width:g.resizeGuideWidth+"px"};i<h;i++)f[i].headerStyle&&(q[o+"#"+this.mid+"h"+f[i].key]={_append:f[i].headerStyle});this.toCssStyles(a.css,q)};a._widthPlus=a._getBorder=function(){return this._border||(this._border=this._options.borderThickness)};a._onScrollViewportH=function(a){a=-this._options.scrollerLeft-a;this._head[0].style.left=a+"px";if(this._doubleHead)this._doubleHead[0].style.left=a+"px"};a._renderHeaders=function(){var a=this.getColumns(),
c=a.length,g=0,e,f=[],i=this.getColMgr();if(i.hasGroups()){var n=this._options,i=i.getGroups(),o=0,p=i.length,l,m,q,s=[],t=0,u=this.getView(),w,v=this._widthPlus();for(n.reorderEnabled=!1;o<p;o++){l=i[o];m=l[0].parent==null?"":l[0].parent;t=q=0;for(w=l.length;t<w;t++)l[t].hidden||(q+=u._getColOuterWidthByKey(l[t].key));s.push(b("div",{"class":n.classColHeader,title:m,style:{width:this._toStyleWidth(q-v)+"px"}},null,h.LEAVE_OPENED));s.push(b("span",{"class":n.classColHeaderTitle},m));s.push("</div>")}this._doubleHead[0].innerHTML=
s.join("")}for(;g<c;g++)(e=a[g]).hidden||this._render(f,e,g);this._head[0].innerHTML=f.join("");this.triggerGridEvent("onRenderHeadersComplete",!1,!0)};a._onRenderModules=function(){this._renderHeaders()};a.rerender=function(a){if(a){var a=this.getColMgr().getAll(),b=a.length,g=this._options.classColHeaderTitle,e;for(e=0;e<b;e++){var f=a[e],i=this.getParentHeader(f.key);if(i){var n=f.parent==null?"":f.parent;i.title=n;i=h.child(i,0);i.innerHTML="";i.appendChild(document.createTextNode(n))}if(!f.hidden&&
(n=f.key,n=f.noName?"":f.name||n,i=this.get(f.key)))if(i=i.children("."+g))f.noTitle?i.removeAttr("title"):i.attr("title",f.title||n),i.text(n)}}else this._renderHeaders(),this._map={},this._onChangeSorter(this._sorters,this._sorters),!this.getColMgr().hasGroups()&&this._options.reorderEnabled&&this._initReorder(),this._initResizeHandles()};a._onAfterRenderModules=function(){var a=this._options;!this.getColMgr().hasGroups()&&a.reorderEnabled&&this._initReorder();this._initResizeHandles();this._resizeGuide=
$(b("div",{"class":a.classResizeGuide})).appendTo(this.getView()._mask).hide();this._resizeGuide[0].style.top="0px";this._resizeGuide[0].style.height="0px"};a._render=function(a,c,g){var e=this._options,f=c.key,i=c.noName?"":c.name||f,n="onRenderHeader_"+f,o=[a],p=e.classColHeader;if(e.reorderEnabled||c.sorter)p+=" "+e.classInteractive;g={id:this.mid+"h"+f,"class":p,colKey:f,style:{width:this._toStyleWidth(this.fromViewWidth(g))+"px"}};if(!c.noTitle)g.title=c.title||i;a.push(b("div",g,null,h.LEAVE_OPENED));
this.triggerGridEvent(n+"_prepend",o,!0);a.push(b("span",{"class":e.classColHeaderTitle},i));this.triggerGridEvent(n+"_append",o,!0);c.sorter&&(a.push(b("span",{"class":e.classSort})),a.push(b("span",{"class":e.classSortOrder})));a.push("</div>")};f._disableSel=function(a){Util$.safe$(a).attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})};a.getParentHeader=function(a){var b=this.getColMgr();return b.hasGroups()&&(a=b.getGroupIndexByKey(a),this._doubleHead&&
a!==null)?h.child(this._doubleHead[0],a):null};a.get=function(a){if(this._map.hasOwnProperty(a))return this._map[a];var b=document.getElementById(this.mid+"h"+a);return!b?$([]):this._map[a]=$(b)};a._updateIndicator=function(a,b,g){var a=this.get(a),e=this._options,f=a.find("."+e.classSort),h=a.find("."+e.classSortOrder),i=e.classColHeaderSorted,o=e.classSortAsc,e=e.classSortDesc;b===0?(a.removeClass(i),f.removeClass(o+" "+e),h.text("")):(a.addClass(i),b===1?f.addClass(o).removeClass(e):b===2&&f.addClass(e).removeClass(o),
h.text(String(g+1)))};a._closest=function(a){return Util$.safe$(a).closest("div."+this._options.classColHeader,this._head)};a._getDef=function(a){return this.getColMgr().getByKey(a.attr("colKey"))};a._sort=function(a,b,g){var b=g.key,g=g.sorter,e=this._sortersMap,f=this._sorters;this.triggerGridEvent("onBeforeColSort_"+b,!1,!0);this.triggerGridEvent("onBeforeColSort",!1,!0);a.ctrlKey?(e[b]?g=e[b]:(f.push(g),e[b]=g),g.desc=g.desc===!1?!0:!1,this.getDataMgr().refresh({sorters:f.slice()})):a.altKey?
(e[b]&&(delete e[b],f.remove(g)),this.getDataMgr().refresh({sorters:f.slice()})):(this._sortersMap={},this._sorters=[g],this._sortersMap[b]=g,g.desc=g.desc===!1?!0:!1,this.getDataMgr().refresh({sorter:g}));this.getView()._scroll()};a._onChangeSorter=function(a,b){var g=a.length,e=b.length,f;for(f=0;f<g;f++)a[f]&&this._updateIndicator(a[f].key,0,0);for(f=0;f<e;f++)b[f]&&this._updateIndicator(b[f].key,b[f].desc?2:1,f)};a._initReorder=function(){var a=this,b=this._options,g=this.getColMgr(),e=this._head,
f=this.mid.length+1,h=function(a,b){for(var d=$(e).sortable("toArray"),c=d.length,h,i=0;i<c;i++)h=d[i],d[i]=h===""?b.item.attr("id").substring(f):h.substring(f);g.sortByKey(d)};e.sortable({items:"."+b.classColHeader,axis:"x",forcePlaceholderSize:!0,placeholder:b.classColHeaderPlaceholder+" "+b.classColHeader,tolerance:"pointer",start:function(g,e){e.item.addClass(a._options.classColHeaderActive);$("#"+a.grid.mid+" ."+b.classColHeaderPlaceholder).width(e.item.width())},stop:function(b,c){c.item.removeClass(a._options.classColHeaderActive);
c.item.css("top","");c.item.css("left","");a._syncResizeHandles()},update:h});b.reorderSyncEnabled&&e.sortable("option","change",h)};a._getDx=function(a,b){var g=a.clientX-this._resizeInitX,e=b.minW,f=h.ifNull(b.maxW,Number.MAX_VALUE),i=this._resizeInitWidth;i+g<e&&(g=e-i);i+g>f&&(g=f-i);return g};a._click=function(a){var b=this._closest(a.target);if(b.length!==0){var g=this._getDef(b),e=g.key,a=[a,b,g];this.getEventMgr().triggerInvalid("clickHeaderValid_"+e,a)||(this.triggerGridEvent("clickHeader_"+
e,a,!0),this.triggerGridEvent("clickHeader",a,!0))}};a._mousedown=function(a){var b=this._options;if(h.hasTagAndClass(a.target,"DIV",b.classResizeHandle)){var g=this._resizeKey=a.target.getAttribute("key");this._resizeInitWidth=parseInt(this.get(g)[0].style.width,10);this._resizeInitColWidth=this.getColMgr().getByKey(g).width;this._resizeInitX=a.clientX;this._resizeHandleInitX=this._resizeMap[g][0].offsetLeft;this._resizeGuide[0].style.left=Math.floor(this._resizeHandleInitX+(b.resizeHandleWidth-
b.resizeGuideWidth)/2-b.scrollerLeft)+"px";this._resizeGuide[0].style.height=this.getView().getInnerHeight()+"px";this._resizeGuide.show()}else if(b=this._closest(a.target),b.length){var e=this._getDef(b),g=e.key,a=[a,b,e];this.triggerGridEvent("mousedownHeader",a,!0);this.triggerGridEvent("mousedownHeader_"+g,a,!0)}};a._dragmove=function(a){var b=this._resizeKey;if(b!=null&&(a=this._getDx(a,this.getColMgr().getByKey(b)),!(Math.abs(a)<1))){var g=this._options;this.get(b)[0].style.width=this._resizeInitWidth+
a+"px";this._moveResizeHandles(this._resizeHandleInitX+a-this._resizeMap[b][0].offsetLeft,this.getColMgr().getIdxByKey(b));this._resizeGuide[0].style.left=Math.floor(this._resizeHandleInitX+a+(g.resizeHandleWidth-g.resizeGuideWidth)/2-g.scrollerLeft)+"px";g.syncResize&&this.getView().setWidthByKey(b,this._resizeInitColWidth+a)}};a._mouseup=function(a){var b=this._resizeKey;if(b!=null)this._resizeGuide.hide(),this._resizeGuide[0].style.height="0px",a=this._getDx(a,this.getColMgr().getByKey(b)),Math.abs(a)>=
1&&this.getView().setWidthByKey(b,this._resizeInitColWidth+a),delete this._resizeKey,delete this._resizeInitX,delete this._resizeHandleInitX,delete this._resizeInitWidth,delete this._resizeInitColWidth};a._toStyleWidth=function(a){return i.quirk?a+this._widthPlus():a};a.setHeaderWidthFromViewWidth=function(a,b){return this.get(a)[0].style.width=this._toStyleWidth(b+this.getView()._colWidthPlus()-this._widthPlus())+"px"};a.fromViewWidth=function(a){return this.getView()._getColOuterWidth(a)-this._widthPlus()};
a._setWidthByKey=function(a,b){this.setHeaderWidthFromViewWidth(a,b);if(this._doubleHead){for(var g=this.getColMgr(),e=this.getView(),f=g.getGroupIndexByKey(a),g=g.getGroupByGroupIdx(f),h=0,i=g.length,o=0;h<i;h++)g[h].hidden||(o+=e._getColOuterWidthByKey(g[h].key));this._doubleHead[0].childNodes[f].style.width=this._toStyleWidth(o-this._widthPlus())+"px"}this._syncResizeHandles(this.getColMgr().getIdxByKey(a));this.getView()._scroll()};a._syncResizeHandles=function(a){for(var a=a||0,b=this.getView()._getColLefts(),
g=this.getColumns(),e=g.length,f=this._resizeMap,h;a<e;a++)if(h=g[a].key,f.hasOwnProperty(h))f[h][0].style.left=b[a+1]+this._resizeHandleOffset+"px"};a._moveResizeHandles=function(a,b){for(var b=b||0,g=this.getColumns(),e=g.length,f=this._resizeMap,h;b<e;b++)if(h=g[b].key,f.hasOwnProperty(h))h=f[h][0],h.style.left=h.offsetLeft+a+"px"};a._onScrollViewportV=function(){this._resizeGuide[0].style.top=this.getView().getScrollTop()+"px"};a._initResizeHandles=function(){for(var a=this.getColumns(),b=a.length,
g=this.getView(),e=g.mid,g=g._getColLefts(),f=this._options,h=this._resizeMap,i,o=0,p=this._resizeHandleOffset=Math.floor(f.scrollerLeft-f.resizeHandleWidth/2),l=f.classResizeHandle,m=this._head;o<b;o++)if(f=a[o],f.resizable)i=f.key,h[i]=$("<div class='"+l+"' key='"+i+"' ondblclick='JGM.m.ViewportManager."+e+'._autoColWidth("'+i+"\")' style='left:"+(p+g[o+1])+"px' title='"+f.name+" 컬럼의 폭을 조절합니다.'>").appendTo(m)}})();jx.grid.MenuBar={};
(function(){function f(a){e.call(this,a);this.grid.menubar=this;this.columnWidths={}}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.Grid");var e=goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.MenuBar",f);goog.inherits(f,e);f.getInstance=function(a){return new f(a)};var b=f.prototype;b._defaultOptions=function(){var a=this.grid._options.imageUrl;return{background:"url("+a+"menubar-bg.png) repeat-x scroll center",borderThickness:1,
border:"solid #b6bac0",height:27,classMenuBar:"menubar",classIcon:"menu-icon",classColumnToggleIcon:"jgrid-column-toggle-icon",columnIconUrl:a+"data-creator-icon.png",columnIconWidth:15,columnIconHeight:15,iconBorderThickness:1,iconBorder:"solid transparent",iconBorderHover:"solid #d4d4d4",iconBorderActive:"solid #9a9a9a",iconMargin:2,iconBackground:"",iconBackgroundHover:"url("+a+"menu-icon-hover.png) repeat-x scroll center",iconBackgroundActive:"url("+a+"menu-icon-active.png) repeat-x scroll center",
iconHeight:21,iconWidth:21,iconBorderRadius:4,iconBorderFocus:"solid #5f5f5f"}};b._init=function(a){var b=this._options;this._ctnr=a.container;this._menubar=$("<div class='"+b.classMenuBar+"'></div>").prependTo(this._ctnr);if(this.grid._options.columnHideEnabled){for(var a=h.element,c=h.input,g=h.SAFE,e=this.getColumns(),f=0,i=e.length,n="",o=this.mid,p,l,m;f<i;f++)p=e[f],l=p.key,m=o+"-toggle-column-"+l,n+=a("label",{"for":m},a("li",null,c("checkbox",{id:m,checked:!0,onclick:"JGM.m.MenuBar."+o+".toggleColumn('"+
l+"', this.checked, this)"})+p.name,g),g);var q=this.ul=$(a("ul",{"class":"jgrid-column-toggle-box"},n,g)).appendTo(this.grid._ctnr);q.css({top:11,left:34});q.hide();this.columnIcon=this.addIcon(b.classColumnToggleIcon,"현재 보여지는 열을 숨기거나 숨겨진 열을 보이도록 합니다.",b.columnIconWidth,b.columnIconHeight,function(){q.toggle()})}};b.mousedown=function(a){this.columnIcon&&!h.contains(this.columnIcon[0],a.target)&&!h.contains(this.ul[0],a.target)&&(this.ul.hide(),this.columnIcon.hasClass("active")&&this.columnIcon.toggleClass("active"))};
b.toggleColumn=function(a,b,c){columnWidths=this.columnWidths;b?(this.getView().setWidthByKey(a,this.columnWidths[a]),$(c.parentNode).removeClass("unchecked")):(this.columnWidths[a]=this.getColMgr().getByKey(a).width,this.getView().setWidthByKey(a,0),$(c.parentNode).addClass("unchecked"))};b._bindEvents=function(){this.grid.event.bind({onCreateCss:this._onCreateCss,onDestroy:this._destroy,mousedown:this.mousedown},this)};b._destroy=function(){i._destroy(this,{name:"MenuBar",path:"menubar",$:"_menubar",
property:"_ctnr",map:"_options"})};b._onCreateCss=function(){var a="#"+this.grid.mid+" .",b=this._options,c=[];c.push(a+b.classMenuBar+"{"+i._CONST._cssUnselectable+"position:relative;overflow:hidden;width:100%;background:"+b.background+";border-bottom:"+(b.borderThickness+"px "+b.border)+";height:"+b.height+"px}");c.push(a+b.classIcon+"{float:left;height:"+b.iconHeight+"px;width:"+b.iconWidth+"px;border:"+b.iconBorderThickness+"px "+b.iconBorder+";margin:"+b.iconMargin+"px 0 0 "+b.iconMargin+"px;background:"+
b.iconBackground+";border-radius:"+b.iconBorderRadius+"px;-moz-border-radius:"+b.iconBorderRadius+"px}");c.push(a+b.classIcon+":hover,"+a+b.classIcon+":focus{background:"+b.iconBackgroundHover+";border:"+b.iconBorderThickness+"px "+b.iconBorderHover+"}");c.push(a+b.classIcon+":active,"+a+b.classIcon+".active{cursor:default;background:"+b.iconBackgroundActive+";border:"+b.iconBorderThickness+"px "+b.iconBorderActive+"}");c.push(a+b.classIcon+".active:focus{border:"+b.iconBorderThickness+"px "+b.iconBorderFocus+
"}");c.push(a+b.classColumnToggleIcon+"{background:url("+b.columnIconUrl+") no-repeat center;width:"+b.columnIconWidth+"px;height:"+b.columnIconHeight+"px}");c.push(".jgrid-column-toggle-box{position:absolute;top:0;left:0;z-index:100;list-style-type:none;margin:0;padding:0;border:1px solid #888;background:#eee}");c.push(".jgrid-column-toggle-box li{cursor:pointer;padding:1px 4px 1px 0px}");c.push(".jgrid-column-toggle-box li.unchecked{background:#ccc}");return c.join("")};b.addIcon=function(a,b,c,
g,e){function f(a){e&&e();i.toggleClass("active");a.preventDefault()}var i=$("<div class='"+this._options.classIcon+"' tabIndex='0' title='"+b+"'><div class='"+a+"' style='margin-top:"+(this._options.iconHeight-g)/2+"px;margin-left:"+(this._options.iconWidth-c)/2+"px'></div></div>").appendTo(this._menubar),n=h.keyMapKeydown.enter,o=h.keyMapKeydown.space;i.click(f).keydown(function(a){var b=a.which;(b===n||b===o)&&f(a)});return i};b.appendHtml=function(a){return $(a).appendTo(this._menubar)};b.append$=
function(a){return a.appendTo(this._menubar)}})();jx.grid.CheckManager={};
(function(){function f(a){function b(){var a=this._options,d=this._isRadio=a.isRadio=!!a.isRadio;this._hasMaster=a.master=!d&&!!a.master;this._col=a.colDef;this._key=this._col.key;this._cssClass=a.classCheck;this._cssClassMaster=a.classMasterCheck;this._name=a.name||d&&"radio"+this.mid||null}this.addEventListener("afteroption",b);e.call(this,a);this.removeEventListener("afteroption",b)}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util"),e=goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.CheckManager",
f);goog.inherits(f,e);f.getInstance=function(a){return new f(a)};var b=f.prototype;b._init=function(){this._map={};this.disabledmap={};this._count=0;this._disabled=!1;var a,b=i._CONST;a=this.getColMgr();a.getByKey(this._col.key)||a.addAt(this._options.colIdx,this._col);if(!b._checkboxWidth)a=h.calCheckSize(),b._checkboxWidth=a.checkboxW,b._checkboxHeight=a.checkboxH,b._radioWidth=a.radioW,b._radioHeight=a.radioH};b._bindEvents=function(){var a=this._col.key,b;b={onAfterSetDatalist:this.uncheckAll,
onAfterRerender:this._updateMaster,onIdChange:this._onIdChange,onIdListChange:this._onIdListChange,onRemoveDatarow:this._onRemoveDatarow,onRemoveDatalist:this._onRemoveDatalist,onSearch:this._onSearch};b["onRenderCell_"+a+"_prepend"]=this._onRenderCell;b["keydownColSel_"+a+"_"+h.keyMapKeydown.space]=this._keydownColSel;if(this._hasMaster)b["onRenderHeader_"+a+"_prepend"]=this._onRenderHeader,b.onRenderHeadersComplete=this._getMaster;this.bindGridEvent(b,this)};b._onSearch=function(a){a?this.disableMaster():
this.enableMaster()};b._defaultOptions=function(){return{colDef:{key:"checkbox",width:20,name:" ",noTitle:!0,resizable:!1,sorter:null,filter:null,noSearch:!0,editor:null,inputOnCreate:!1},colIdx:0,name:void 0,classCheck:"checkmg",classMasterCheck:"checkm",master:!0,isRadio:!1}};b._beforeCreateCss=function(a){var b,c,g=a.css;this._isRadio?(a=i._CONST._radioWidth||13,b=i._CONST._radioHeight||13):(a=i._CONST._checkboxWidth||13,b=i._CONST._checkboxHeight||13);c="*overflow:hidden;padding:0;width:"+a+"px;height:"+
b+"px;";g.push(this.getView()._getCellSelector()+" ."+this._cssClass+"[mid='"+this.mid+"']{"+c+"margin:"+(this.getView()._getRowInnerHeight()-b)/2+"px 0 0 "+(this._col.width-this.getView()._getPadding()-a)/2+"px}#"+this.mid+"h{"+c+"margin:"+(this.getHeader()._options.height-b)/2+"px 0 0 0}")};b.getKey=function(){return this._key};b.checkList=function(a,b){if(!b)a=this.getDataMgr().mapList(a).mapped;for(var c=0,g=a.length;c<g;c++)this.check(a[c],!0)};b.setCheckList=function(a,b){this.uncheckAll();
this.checkList(a,b)};b.getCheckList=function(){return h.toArray(this._map)};b.getDisableds=function(){return h.toArray(this.disabledmap)};b.toggleCheckAll=function(){return this.isCheckedAll()?this.uncheckAll():this.checkAll()};b.clickMaster=function(a){var b=this.getAllData(),c=this.getDataList(),a=!!a;if(b.length===c.length)a?this.checkAll():this.uncheckAll();else if(a){f._check(this.getCheckboxes());for(var b=c.length,g=this.getIdKey(),e,j=0;j<b;j++)e=c[j],this._add(e,e[g])&&this.triggerGridEvent("onCheckChange",
[e,!0],!0)}else{f._uncheck(this.getCheckboxes());b=c.length;g=this.getIdKey();for(j=0;j<b;j++)e=c[j],this._remove(e,e[g])&&this.triggerGridEvent("onCheckChange",[e,!1],!0)}this.triggerGridEvent("onClickMasterCheck",[a],!0)};b.checkAll=function(){this._hasMaster&&f._check(this._master);f._check(this.getCheckboxes());for(var a=this.getAllData(),b=a.length,c=this.getIdKey(),g=this._map,e=0;e<b;e++)g[a[e][c]]=a[e];this._count=b;this.triggerGridEvent("onCheckAll",[],!0)};b.uncheckAll=function(){this._hasMaster&&
f._uncheck(this._master);f._uncheck(this.getCheckboxes());this._map={};this._count=0;this.triggerGridEvent("onUncheckAll",[],!0)};b.toggleCheck=function(a,b){b||(a=this.getDataMgr().map(a));this.isChecked(a,!0)&&!this._isRadio?this.uncheck(a,!0):this.check(a,!0)};b.toggleDisable=function(a,b){b||(a=this.getDataMgr().map(a));this.isDisabled(a,!0)?this.enable(a,!0):this.disable(a,!0)};b.toggleById=function(a){this.toggleCheck(this.getDataMgr().getById(a),!0)};b.check=function(a,b){b||(a=this.getDataMgr().map(a));
this._add(a)&&(f._check(this.getCheckbox(a)),this._updateMaster(),this.triggerGridEvent("onCheckChange",[a,!0],!0))};b.uncheck=function(a,b){b||(a=this.getDataMgr().map(a));this._remove(a)&&(f._uncheck(this.getCheckbox(a)),this._hasMaster&&f._uncheck(this._master),this.triggerGridEvent("onCheckChange",[a,!1],!0))};b.disable=function(a,b){var c=this.getDataMgr();b||(a=c.map(a));var c=c.getId(a),g=this.disabledmap;g.hasOwnProperty(c)||(g[c]=a,f.disableNode(this.getCheckbox(a)),this.triggerGridEvent("onDisableCheck",
[a],!0))};b.enable=function(a,b){var c=this.getDataMgr();b||(a=c.map(a));var c=c.getId(a),g=this.disabledmap;g.hasOwnProperty(c)&&(delete g[c],f.enableNode(this.getCheckbox(a)),this.triggerGridEvent("onEnableCheck",[a],!0))};b._updateMaster=function(){this._hasMaster&&f._setCheck(this._master,this.isCheckedAll())};b._add=function(a,b){b=b||a[this.getIdKey()];if(this._map.hasOwnProperty(b))return!1;if(this._isRadio)this._map={},this._count=0;this._map[b]=a;this._count++;return!0};b._remove=function(a,
b){var b=b||a[this.getIdKey()],c=this._map;if(!c.hasOwnProperty(b))return!1;delete c[b];this._count--;return!0};b.isChecked=function(a,b){var c=this.getDataMgr();b||(a=c.map(a));return this._map.hasOwnProperty(c.getId(a))};b.isDisabled=function(a,b){var c=this.getDataMgr();b||(a=c.map(a));return this.disabledmap.hasOwnProperty(c.getId(a))};b.splitChecked=function(a,b){if(!b)a=this.getDataMgr().mapList(a).mapped;for(var c=[],g=[],e=0,f=a.length,h=this.getIdKey(),i,o=this._map;e<f;e++)o.hasOwnProperty((i=
a[e])[h])?c.push(i):g.push(i);return{checked:c,unchecked:g}};b.isCheckedAll=function(){var a=this._count;if(a){var b=this.getAllData().length;if(a===b)return!0;var a=this.getDataList(),c=a.length;if(c!==b){for(b=0;b<c;b++)if(!this.isChecked(a[b],!0))return!1;return!0}}return!1};b.removeChecked=function(){return this.getDataMgr().removeList(this.getCheckList())};b._getMaster=function(){this._master=$(document.getElementById(this.mid+"h"))};b._getChecks=function(a){for(var b=a.length,c=[],g=0,e=this.getColMgr().getIdxByKey(this._key);g<
b;g++)c.push(a[g].childNodes[e].childNodes[0]);return c};b.getCheckboxes=function(){return this._getChecks(this.getView().getRenderedRows())};b.getCheckboxById=function(a){if(a=this.getView().getRowById(a))return a.childNodes[this.getColMgr().getIdxByKey(this._key)].childNodes[0]};b.getCheckbox=function(a){return this.getCheckboxById(this.getDataMgr().getId(a))};b.getCheckboxByIdx=function(a){return this.getCheckboxById(this.getDataMgr().getIdByIdx(a))};b._onRemoveDatarow=function(a){this.uncheck(a,
!0);this.enable(a,!0)};b._onRemoveDatalist=function(a){for(var b=0,c=a.length;b<c;b++)this.uncheck(a[b],!0),this.enable(a[b],!0)};b._onIdChange=function(a,b,c){var g=this._map,e=this.disabledmap;g.hasOwnProperty(b)&&(delete g[b],g[c]=a);e.hasOwnProperty(b)&&(delete e[b],e[c]=a)};b._onIdListChange=function(a,b,c){for(var g=0,e=a.length,f=this._map,h=this.disabledmap,i,o;g<e;g++)i=a[g],o=b[g],f.hasOwnProperty(o)&&(delete f[o],f[i[c]]=i),h.hasOwnProperty(o)&&(delete h[o],h[i[c]]=i)};b._keydownColSel=
function(a,b,c){a.preventDefault();if(b&&c){var a=this.isChecked(c.getDatarow(),!0),g,c=this.getDataList();if(this._isRadio)for(g in b){if(b.hasOwnProperty(g)&&g!=="length"){this.check(c[g],!0);break}}else for(g in b)b.hasOwnProperty(g)&&g!=="length"&&(a?this.uncheck(c[g],!0):this.check(c[g],!0))}};b._onRenderHeader=function(a){a.push("<input id='"+this.mid+"h' type='checkbox' tabIndex='-1' onclick='JGM.m.CheckManager."+this.mid+".clickMaster(this.checked);' class='"+this._cssClass+" "+this._cssClassMaster+
"' mid='"+this.mid+"'");this.isCheckedAll()&&a.push(" checked='checked'");this._disabled&&a.push(" disabled='disabled'");a.push("/>")};b._onRenderCell=function(a,b,c,g,e){e.push("<input tabIndex='-1' onclick=\"JGM.m.CheckManager."+this.mid+".toggleById('"+c[this.getIdKey()]+"')\" type='"+(this._isRadio?"radio":"checkbox")+"' class='"+this._cssClass+"' mid='"+this.mid+"'");this._name&&e.push(" name='"+this._name+"'");this.isChecked(c,!0)&&e.push(" checked='checked'");(this._disabled||this.isDisabled(c,
!0))&&e.push(" disabled='disabled'");e.push("/>")};b.disableAll=function(){if(!this._disabled)this._disabled=!0,this._hasMaster&&this._master.attr("disabled","disabled"),$(this.getCheckboxes()).attr("disabled","disabled")};b.enableAll=function(){if(this._disabled)this._disabled=!1,this._hasMaster&&this._master.removeAttr("disabled"),$(this.getCheckboxes()).removeAttr("disabled")};b.disableMaster=function(){this._hasMaster&&this._master.attr("disabled","disabled")};b.enableMaster=function(){this._hasMaster&&
this._master.removeAttr("disabled")};f._check=function(a){a&&Util$.safe$(a).attr("checked","checked")};f._uncheck=function(a){a&&Util$.safe$(a).removeAttr("checked")};f.disableNode=function(a){a&&Util$.safe$(a).attr("disabled","disabled")};f.enableNode=function(a){a&&Util$.safe$(a).removeAttr("disabled")};f._setCheck=function(a,b){b?f._check(a):f._uncheck(a)}})();jx.grid.PrintManager={};
(function(){function f(b){this.mid=b.mid;this._ctnr=Util$.safe$(b.container);this.grid=b.grid;this._options=i._extend({title:"Print Preview",font:"15px arial,sans-serif",headerFontColor:"#27413E",headerBackgroundColor:"#DCDEDE",tableBorderColor:"#6E7174",headerBorderColor:"#909192",cellBorderColor:"#D0D7E5",winOptions:{name:"Print Preview",width:800,height:600,directories:"no",location:"no",menubar:"no",status:"no",toolbar:"no"}},b.options);this.__init()}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");
goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.PrintManager",f);f.getInstance=function(b){return new f(b)};var e=f.prototype;e.__init=function(){var b=this;this._ctnr[0].innerHTML="<button type='button'>Print</button>";this._ctnr.click(function(){b.print()})};e.print=function(){var b=this.getPrintHtml(this.grid.colDefMgr.get(),this.grid.dataMgr.datalist),a=h.open(this._options.winOptions);a.document.write(b);a.document.close()};e.getPrintHtml=function(b,a){var d=this._options,
c=d.tableBorderColor,g=d.headerBorderColor,e=d.cellBorderColor,f=[],h=b.length,i=h-1,o=a.length,p=o-1,l=0,m;f.push("<html><head>");f.push("<title>"+d.title+"</title>");f.push("</head><body onload='window.print();'>");f.push("<table width='100%' cellspacing='0' cellpadding='0'><tbody><tr><td align='left'>");f.push("<table width='100%' cellspacing='0' cellpadding='2' style='border-collapse:collapse'>");f.push("<tbody style='font:"+d.font+";'>");for(f.push("<tr style='background-color:"+d.headerBackgroundColor+
";color:"+d.headerFontColor+";text-align:center'>");l<h;l++)f.push("<td style='border:solid 1px "+g+";'>"+b[l].name+"</td>");f.push("</tr>");for(l=0;l<o;l++){d=a[l];f.push("<tr>");if(l===0)for(m=0;m<h;m++)m===0?f.push("<td style='border:solid 1px "+e+";border-top:solid 1px "+g+";border-left:solid 1px "+c+"'>"+d[b[m].key]+"</td>"):m===i?f.push("<td style='border:solid 1px "+e+";border-top:solid 1px "+g+";border-right:solid 1px "+c+"'>"+d[b[m].key]+"</td>"):f.push("<td style='border:solid 1px "+e+";border-top:solid 1px "+
g+"'>"+d[b[m].key]+"</td>");else if(l<p)for(m=0;m<h;m++)m===0?f.push("<td style='border:solid 1px "+e+";border-left:solid 1px "+c+"'>"+d[b[m].key]+"</td>"):m===i?f.push("<td style='border:solid 1px "+e+";border-right:solid 1px "+c+"'>"+d[b[m].key]+"</td>"):f.push("<td style='border:solid 1px "+e+"'>"+d[b[m].key]+"</td>");else for(m=0;m<h;m++)m===0?f.push("<td style='border:solid 1px "+e+";border-bottom:solid 1px "+c+";border-left:solid 1px "+c+"'>"+d[b[m].key]+"</td>"):m===i?f.push("<td style='border:solid 1px "+
e+";border-bottom:solid 1px "+c+";border-right:solid 1px "+c+"'>"+d[b[m].key]+"</td>"):f.push("<td style='border:solid 1px "+e+";border-bottom:solid 1px "+c+"'>"+d[b[m].key]+"</td>");f.push("</tr>")}f.push("</tbody></table></td></tr></tbody></table></body></html>");return f.join("")}})();jx.grid.Footer={};
(function(){function f(a){this.mid=a.mid;this._ctnr=a.container;this.grid=a.grid;this.grid.footer=this;this._options=i._extend({classCell:"footer-cell",background:"#F1F5FB",border:"0px solid #CCD9EA",color:"#000",fontSize:"13px",fontWeight:"normal",cellHeight:25,cellPadding:40,countTemplate:"현재 <span name='shownCount'></span> 건 / 총 <span name='totalCount'></span> 건",titleColor:"#5A6779",titleFontSize:"12px",titleFontWeight:"normal",contentColor:"#1E395B",contentFontSize:"12px",contentFontWeight:"normal",classFooter:"jgrid-footer",
classTitle:"footer-title",classContent:"footer-content",style:"",cellStyle:"",titleStyle:"",contentStyle:"",sumAlign:"right"},a.options);this._sumMap={};this.__init()}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("jx.grid.Grid");var e=h.element;goog.exportSymbol("jx.grid.Footer",f);f.getInstance=function(a){return new f(a)};var b=f.prototype;b.__init=function(){this._hasSum=this.grid.colDefMgr.get().some(function(a){return!!a.sumRenderer});
var a=this._mask=$(e("div",{"class":"classSliderMask"})).appendTo(this._ctnr);if(this._hasSum)this._slider=$(e("div",{"class":"classSlider"})).appendTo(a);this._foot=$("<div class='"+this._options.classFooter+"'>").appendTo(this._ctnr);this.getNextCell().html(this._options.countTemplate);this._updateTotalCount();this._updateShownCount();this.renderCells();this._initSumCells();this.bindEvents()};b.bindEvents=function(){this.grid.event.bind({onCreateCss:this._onCreateCss,onDestroy:this._destroy,onDataChange:[this._updateTotalCount,
this._updateSums],onAfterRefresh:this._updateShownCount,onResizeCol:this.setSumWidthFromViewWidth,changeVisibleColumns:this._onReorderCols,onScrollViewportH:this._onScrollViewportH},this)};b._onReorderCols=function(){if(this._hasSum)for(var a=this.grid.colDefMgr.get(),b=0,c=a.length;b<c;b++)this._slider[0].appendChild(this.getSumCell(a[b].key))};b.setSumWidthFromViewWidth=function(a,b){var c=this.getSumCell(a);if(c)return c.style.width=this._toStyleWidth(b+this.grid.view._colWidthPlus()-this._widthPlus())+
"px"};b._widthPlus=b._getBorder=function(){return this._border||(this._border=1)};b._toStyleWidth=function(a){return i.quirk?a+this._widthPlus():a};b._onScrollViewportH=function(a){if(this._hasSum)this._slider[0].style.left=-1E4-a+"px"};b.renderCells=function(){if(this._hasSum){for(var a=this.grid.colDefMgr.get(),b=0,c=a.length,g=this.grid.view,f=[],j=this._widthPlus();b<c;b++)f.push(e("div",{"class":"classSliderCell",id:this.mid+"_sum_"+a[b].key,style:{width:this._toStyleWidth(g._getColOuterWidth(b)-
j)+"px"}}));this._slider[0].innerHTML=f.join("")}};b.getSumCell=function(a){return document.getElementById(this.mid+"_sum_"+a)};b.setCellValue=function(a,b){var c=this.getSumCell(a);if(c)c.innerHTML=b};b._destroy=function(){var a,b=this._sumMap;for(a in b)b.hasOwnProperty(a)&&b[a]&&b[a].remove&&b[a].remove();this._mask&&(this._mask.remove(),delete this._mask);this._slider&&(this._slider.remove(),delete this._slider);i._destroy(this,{name:"Footer",path:"footer",$:"_foot",property:"_ctnr",map:"_sumMap _options"})};
b._onCreateCss=function(){var a=this._options,b="#"+this.grid.mid+" ."+a.classFooter,c=[];c.push(b+"{float:left;cursor:default;width:100%;"+i._CONST._cssUnselectable+"background:"+a.background+";border-top:"+a.border+";border-collapse:collapse;color:"+a.color+";font-size:"+a.fontSize+";font-weight:"+a.fontWeight+";padding-left:8px;"+a.style+"}");c.push(b+" ."+a.classCell+"{float:left;white-space:nowrap;line-height:"+a.cellHeight+"px;padding-right:"+a.cellPadding+"px;"+a.cellStyle+"}");c.push(b+" ."+
a.classTitle+"{text-align:right;color:"+a.titleColor+";font-size:"+a.titleFontSize+";font-weight:"+a.titleFontWeight+";"+a.titleStyle+"}");c.push(b+" ."+a.classContent+"{color:"+a.contentColor+";font-size:"+a.contentFontSize+";font-weight:"+a.contentFontWeight+";"+a.contentStyle+"}");var b={},g="#"+this.grid.mid;b[g+" .classSliderMask"]={position:"relative",overflow:"hidden",width:"100%","border-bottom":"1px solid #ddd"};b[g+" .classSlider"]={position:"relative",overflow:"hidden","white-space":"nowrap",
cursor:"default",background:"#f0f0f0",left:"-10000px",width:"100000px","line-height":"21px"};b[g+" .classSliderCell"]={position:"relative",overflow:"hidden","float":"left","text-overflow":"ellipsis","text-align":a.sumAlign,"vertical-align":"middle",height:"21px",left:1E4-this.grid.view.getScrollLeft()+"px","border-right":"1px solid #ddd"};var e,f;for(e in b)if(b.hasOwnProperty(e)){a=b[e];c.push(e+"{");for(f in a)c.push(f+":"+a[f]+";");c.push("}")}return c.join("")};b._updateTotalCount=function(){this._foot.find("[name=totalCount]")[0].innerHTML=
this.grid.dataMgr.getReal().length};b._updateShownCount=function(){this._foot.find("[name=shownCount]")[0].innerHTML=this.grid.dataMgr.filterReal(this.grid.dataMgr.datalist).length};b._initSumCells=function(){if(this._hasSum)for(var a=this.grid.dataMgr.getReal(),b=this.grid.colDefMgr.get(),c=b.length,g,e,j,i,n,o=f._calSum,p=this._sumMap,l,m=0;m<c;m++)if(g=b[m],e=g.sumRenderer){j=g.key;i=g.name;p[j]=!0;switch(typeof e){case "function":n=o(a,j,!0);l=e(i,n.sum,n.min,n.max);break;case "string":n=o(a,
j);g=e.toLowerCase();if(g==="krw"||e==="\\")l=h.formatNumber(n);else if(g==="usd"||e==="$")l=h.formatNumber(n,2,"$ ");break;default:n=o(a,j),l=g.renderer?g.renderer(n):n}this.setCellValue(j,l)}};b._updateSums=function(){if(this._hasSum){var a=this.grid.dataMgr.getReal(),b,c=this._sumMap,g=this.grid.colDefMgr,e,j,i,n,o=f._calSum,p;for(b in c)if(c.hasOwnProperty(b)){e=g.getByKey(b);i=e.name;j=e.sumRenderer;switch(typeof j){case "function":n=o(a,b,!0);p=j(i,n.sum,n.min,n.max);break;case "string":n=o(a,
b);e=j.toLowerCase();if(e==="krw"||j==="\\")p=h.formatNumber(n);else if(e==="usd"||j==="$")p=h.formatNumber(n,2,"$ ");break;default:n=o(a,b),p=e.renderer?e.renderer(n):n}this.setCellValue(b,p)}}};b.updateSums=b._updateSums;b.getNextCell=function(){return $("<div class='"+this._options.classCell+"'/>").appendTo(this._foot)};b._sumRenderer=function(a,b){return"<span class='"+this._options.classTitle+"'>"+a+" 합계: </span><span class='"+this._options.classContent+"'>"+b+"</span>"};f._calSum=function(a,
b,c){if(c){for(var c=0,e,f=a.length,j=0,h=Number.MAX_VALUE,i=Number.MIN_VALUE;j<f;j++){if(typeof(e=a[j][b])==="string")e=e.toFloat();h>e&&(h=e);i<e&&(i=e);c+=isNaN(e)?0:e}return{sum:c,min:h,max:i}}else{c=0;f=a.length;for(j=0;j<f;j++){if(typeof(e=a[j][b])==="string")e=e.toFloat();c+=isNaN(e)?0:e}return c}}})();jx.grid.SelectionManager={};
(function(){function f(a){this.mid=a.mid;this.grid=a.grid;this.grid.selMgr=this;this._options=i._extend({rowSelKey:this.grid.dataMgr.idKey,bgColorSelection:"#DCEBFE",bgColorLast:"#f1ca7f",bgColorRange:"#D9D9D9",classSelection:"jgrid-selection",classLast:"selection-last",classRange:"selection-range",multiSelectEnabled:!1,classRowSelected:"rowSelected",highlightRowEnabled:!0,bgColorRowSelected:"#d8dfea"},a.options);this._consts={_UP:1,_DOWN:2,_LEFT:3,_RIGHT:4,_PGDN:5,_PGUP:6,_HOME:7,_END:8,_NAVKEYS:{}};
this._consts._NAVKEYS=h.which(["enter","tab","arrow","pgdn","pgup","home","end"]);this._rows={length:0};this._cols={length:0};this.__init()}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("jx.grid.Grid");var e=goog.getObjectByName("jx.grid.Cell");goog.exportSymbol("jx.grid.SelectionManager",f);f.getInstance=function(a){return new f(a)};var b=f.prototype;b.__init=function(){this.bindEvents()};b.bindEvents=function(){this.grid.event.bind({onAfterSetDatalist:this.empty,
onGetCellClass:this._onGetCellClass,onCreateCss:this._onCreateCss,onDestroy:this._destroy,keydownCanvas:this._keydownCanvas,dragoverCanvas:this._dragoverCanvas,mousedownCanvas:this._mousedownCanvas,onBeforeRerender:this._onBeforeRerender,onAfterRerender:this.onAfterRerender,onBeforeDataChange:this.onBeforeDataChange},this)};b._destroy=function(){i._deleteMap(this._consts,"_NAVKEYS");var a,b=this._rows,c=this._cols;for(a in b)b.hasOwnProperty(a)&&a!=="length"&&i._deleteMap(b,a);for(a in c)c.hasOwnProperty(a)&&
a!=="length"&&i._deleteMap(c,a);i._destroy(this,{name:"SelectionManager",path:"selMgr",map:"_rows _cols _range _last _consts _options"})};b._onCreateCss=function(){var a=this.grid.event.trigger("onBeforeCreateSelCss"),b="#"+this.grid.mid+" .",c=this._options,a=a||[];c.highlightRowEnabled===!0&&a.push(b+c.classRowSelected+" div{background:"+c.bgColorRowSelected+"}");c.multiSelectEnabled===!0&&(a.push(b+c.classSelection+"{background:"+c.bgColorSelection+"}"),a.push(b+c.classRange+"{background:"+c.bgColorRange+
"}"));a.push("#"+this.grid.mid+" div."+c.classLast+"{background:"+c.bgColorLast+"}");return a.join("\n")};b._onGetCellClass=function(a,b,c,e){var f="",h=this._last,i=this._range,n=this._rows,o=this._options;h&&h.getDatarow()===c&&h.getColDef()===e&&(f+=o.classLast);o.multiSelectEnabled===!0&&(i&&i.getDatarow()===c&&i.getColDef()===e&&(f+=" "+o.classRange),n.hasOwnProperty(a)&&n[a].hasOwnProperty(b)&&(f+=" "+o.classSelection));return f};b._mousedownCanvas=function(a,b){if(!this._last||!this._last.equals(b))this.grid.event.trigger("onBeforeSelect",
[a,b],!0),this._options.multiSelectEnabled===!1?this.selectCell(b):a.shiftKey&&this._last&&this._range?this.selectRange(b):a.ctrlKey?b.getKey()===this._options.rowSelKey?this.addRow(b):this.addCell(b):this.selectCell(b)};b._dragoverCanvas=function(a,b){this._options.multiSelectEnabled===!1?this.selectCell(b):this._last&&this._range&&this.selectRange(b)};b._keydownCanvas=function(a){var b=this._last,c=a.which,e=this.grid.event;if(this._consts._NAVKEYS[c]){if(!e.triggerInvalid("onBeforeNavigate",[a])){var f;
a.preventDefault();switch(c){case h.keyMapKeydown.tab:f=a.shiftKey?this._idxToCell(this._consts._LEFT,b):this._idxToCell(this._consts._RIGHT,b);this.selectCell(f);break;case h.keyMapKeydown.enter:f=a.shiftKey?this._idxToCell(this._consts._UP,b):this._idxToCell(this._consts._DOWN,b);this.selectCell(f);break;case h.keyMapKeydown.up:this._options.multiSelectEnabled&&a.shiftKey?(f=this._idxToCell(this._consts._UP,this._range),this.selectRange(f)):(f=this._idxToCell(this._consts._UP,b),this.selectCell(f));
break;case h.keyMapKeydown.down:this._options.multiSelectEnabled&&a.shiftKey?(f=this._idxToCell(this._consts._DOWN,this._range),this.selectRange(f)):(f=this._idxToCell(this._consts._DOWN,b),this.selectCell(f));break;case h.keyMapKeydown.left:this._options.multiSelectEnabled&&a.shiftKey?(f=this._idxToCell(this._consts._LEFT,this._range),this.selectRange(f)):(f=this._idxToCell(this._consts._LEFT,b),this.selectCell(f));break;case h.keyMapKeydown.right:this._options.multiSelectEnabled&&a.shiftKey?(f=
this._idxToCell(this._consts._RIGHT,this._range),this.selectRange(f)):(f=this._idxToCell(this._consts._RIGHT,b),this.selectCell(f));break;case h.keyMapKeydown.pgup:this._options.multiSelectEnabled&&a.shiftKey?(f=this._idxToCell(this._consts._PGUP,this._range),this.selectRange(f)):(f=this._idxToCell(this._consts._PGUP,b),this.selectCell(f));break;case h.keyMapKeydown.pgdn:this._options.multiSelectEnabled&&a.shiftKey?(f=this._idxToCell(this._consts._PGDN,this._range),this.selectRange(f)):(f=this._idxToCell(this._consts._PGDN,
b),this.selectCell(f));break;case h.keyMapKeydown.space:f=a.shiftKey?this._idxToCell(this._consts._PGUP,b):this._idxToCell(this._consts._PGDN,b);this.selectCell(f);break;case h.keyMapKeydown.home:this._options.multiSelectEnabled&&a.shiftKey?(f=this._idxToCell(this._consts._HOME,this._range),this.selectRange(f)):(f=this._idxToCell(this._consts._HOME,b),this.selectCell(f));break;case h.keyMapKeydown.end:this._options.multiSelectEnabled&&a.shiftKey?(f=this._idxToCell(this._consts._END,this._range),this.selectRange(f)):
(f=this._idxToCell(this._consts._END,b),this.selectCell(f))}e.trigger("onAfterNavigate",[f],!0)}}else{if(this._cols.length===1){var j,i=this.grid.colDefMgr,n,o=this._cols;f=[a,null,b];for(n in o)if(o.hasOwnProperty(n)&&n!=="length")j=i.get(n).key,j="keydownColSel_"+j,f[1]=o[n],e.trigger(j+"_"+c,f,!0),e.trigger(j,f,!0)}if(this._rows.length===1){var p;n=this._rows;f=[a,null,b];for(p in n)n.hasOwnProperty(p)&&p!=="length"&&(f[1]=n[p],e.trigger("keydownRowSel_"+c,f,!0),e.trigger("keydownRowSel",f,!0))}f=
[a,this._rows,this._cols];e.trigger("keydownSel_"+c,f,!0);e.trigger("keydownSel",f,!0)}};b.getCell=function(){return this._last||null};b._isSelected=function(a){return a&&this._last&&this._last.equals(a)};e.prototype.isSelected=function(){return this.grid.selMgr._isSelected(this)};b._getCellIdxToNavigate=function(a,b,c){switch(a){case this._consts._RIGHT:c<this.grid.colDefMgr.length()-1&&c++;break;case this._consts._LEFT:c>0&&c--;break;case this._consts._DOWN:b<this.grid.dataMgr.datalist.length-1&&
b++;break;case this._consts._UP:b>0&&b--;break;case this._consts._PGDN:b+=this.grid.view._options.rowsPerPage;b>this.grid.dataMgr.datalist.length-1&&(b=this.grid.dataMgr.datalist.length-1);break;case this._consts._PGUP:b-=this.grid.view._options.rowsPerPage;b<0&&(b=0);break;case this._consts._HOME:b=0;break;case this._consts._END:b=this.grid.dataMgr.datalist.length-1}return[b,c]};b._idxToCell=function(a,b){var c=this._getCellIdxToNavigate(a,b.getRowIdx(),b.getColIdx());return i.create("Cell",{grid:this.grid,
row:c[0],col:c[1]})};b.selectRow=function(a){var b=a.getRowIdx(),c=a.getColIdx();this._setRange(b,c,a);this._setLast(b,c,a);this._setSelMap(this._getRowMap(b,c,a))};b.selectCell=function(a,b){this.grid.event.trigger("onBeforeSelectCell",[a],!0);if(this._options.multiSelectEnabled&&a.getKey()===this._options.rowSelKey)this.selectRow(a);else{var c=a.getRowIdx(),e=a.getColIdx();this._setRange(c,e,a,b);this._setLast(c,e,a);this._setSelMap(this._getCellMap(c,e,a))}this.grid.event.trigger("onAfterSelectCell",
[a],!0)};b.onBeforeDataChange=function(){};b._onBeforeRerender=function(){if(this._last)this.toSelect=this._last;this.empty()};b.onAfterRerender=function(){this.toSelect&&(this.selectCell(this.toSelect,!0),this.grid.view.scrollToRowLazy(this.toSelect.getRowIdx()))};b.addRow=function(a){var b=a.getRowIdx(),c=a.getColIdx();this._setRange(b,c,a);this._setLast(b,c,a);this._addSelMap(this._getRowMap(b,c,a))};b.addCell=function(a){var b=a.getRowIdx(),c=a.getColIdx();this._setRange(b,c,a);this._setLast(b,
c,a);this._addSelMap(this._getCellMap(b,c,a))};b.selectRange=function(a){var b=a.getRowIdx(),c=a.getColIdx(),e=this._last.getRowIdx(),f=this._last.getColIdx(),h=e<b?e:b,e=e<b?b:e,i;this._setRange(b,c,a);a.getKey()===this._options.rowSelKey?(i=0,f=this.grid.colDefMgr.length()-1):(i=f<c?f:c,f=f<c?c:f);this._setSelMap(this._getRangeMap(h,i,e,f,b,c,a));return{minRow:h,minCol:i,maxRow:e,maxCol:f}};b._setLast=function(a,b,c){var b=this._last,e;b&&(e=b.getRowIdx(),a!==e&&this._range&&e!==this._range.getRowIdx()&&
this.grid.view.unlockRowById(b.getId()),b.get$().removeClass(this._options.classLast),this._options.highlightRowEnabled===!0&&$(b.getRowNode()).removeClass(this._options.classRowSelected),c||delete this._last);if(c)(this._last=c).get$().addClass(this._options.classLast),this._options.highlightRowEnabled===!0&&$(c.getRowNode()).addClass(this._options.classRowSelected),this.grid.view.lockRowByIdx(a)};b._setRange=function(a,b,c,e){var f=this._range;if(f){var h=f.getRowIdx();if(a===h&&b===f.getColIdx())return;
a!==h&&this._last&&h!==this._last.getRowIdx()&&this.grid.view.unlockRowById(f.getId());f.get$().removeClass(this._options.classRange);c||delete this._range}if(c)(this._range=c).get$().addClass(this._options.classRange),c=this.grid.view,c.lockRowByIdx(a),e||c.scrollToLazy(a,b)};b._addSelMap=function(a){var b=this._rows,c,g,f,h;for(f in a)if(a.hasOwnProperty(f)&&(g=a[f],b.hasOwnProperty(f)))for(h in c=b[f],g)g.hasOwnProperty(h)&&c.hasOwnProperty(h)&&(g[h]instanceof e&&(c[h]=g[h]),delete g[h]);this.addOrRemoveCss({},
!0);this._addToMaps(a)};b._setSelMap=function(a){var b=this._rows,c,g,f,h,i={};for(f in b)if(b.hasOwnProperty(f)&&f!=="length")if(c=b[f],a.hasOwnProperty(f))for(h in g=a[f],c)c.hasOwnProperty(h)&&h!=="length"&&(g.hasOwnProperty(h)?(g[h]instanceof e&&(c[h]=g[h]),delete g[h]):(i.hasOwnProperty(f)||(i[f]={}),i[f][h]=!0));else for(h in g=i[f]={},c)c.hasOwnProperty(h)&&h!=="length"&&(g[h]=!0);this._removeFromMaps(i);this.addOrRemoveCss({},!1);this._addSelMap(a)};b.addOrRemoveCss=function(a,b){var c=[],
g,f,h,i=this.grid.view;for(g in a)if(a.hasOwnProperty(g))for(f in h=a[g],h)h.hasOwnProperty(f)&&(h[f]instanceof e?c.push(h[f].getNode()):c.push(i.getCell(g,f)));c=c.filter(function(a){return a});b?$(c).addClass(this._options.classSelection):$(c).removeClass(this._options.classSelection)};b._addToMaps=function(a){var b,c,e,f=this._rows,h=this._cols,i;for(b in a)if(a.hasOwnProperty(b))for(c in i=a[b],i)i.hasOwnProperty(c)&&(e=(e=i[c])?!0:e,f.hasOwnProperty(b)?f[b].length++:(f[b]={length:1},f.length++),
f[b][c]=e,h.hasOwnProperty(c)?h[c].length++:(h[c]={length:1},h.length++),h[c][b]=e)};b._removeFromMaps=function(a){var b,c,e=this._rows,f=this._cols,h;for(b in a)if(a.hasOwnProperty(b))for(c in h=a[b],h)h.hasOwnProperty(c)&&(--e[b].length===0?(delete e[b],e.length--):delete e[b][c],--f[c].length===0?(delete f[c],f.length--):delete f[c][b])};b._getCellMap=function(a,b,c){var e={};e[a]={};e[a][b]=c;return e};b._getRowMap=function(a,b,c){var e={},f=this.grid.colDefMgr.length(),h=0;for(e[a]={};h<f;h++)e[a][h]=
!0;e[a][b]=c;return e};b._getRangeMap=function(a,b,c,e,f,h,i){for(var n={},o;a<=c;a++){n[a]={};for(o=b;o<=e;o++)n[a][o]=!0}n[f][h]=i;return n};b.empty=function(){this._setLast();this._setRange();this._setSelMap({})}})();jx.grid.DataCreator={};
(function(){function f(b){this.mid=b.mid;this._ctnr=b.container;this.grid=b.grid;this.grid.creator=this;this._options=i._extend({background:"#dfdfdf",borderThickness:0,border:"solid #D6D6D6",inputBorder:"solid #A7A7A7",inputBorderThickness:1,inputHeight:18,inputMargin:8,nameMargin:2,font:"12px Arial,Helvetica,sans-serif",height:28,padding:3,classCreatorIcon:"creator-icon",creatorIconUrl:this.grid._options.imageUrl+"data-creator-icon.png",creatorIconWidth:13,creatorIconHeight:13,classCreator:"data-creator",
classColName:"data-creator-name",inputBorderRadius:3},b.options);this._inputMap={};this.__init()}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.Grid");goog.getObjectByName("jx.grid.BaseModule");goog.exportSymbol("jx.grid.DataCreator",f);f.getInstance=function(b){return new f(b)};var e=f.prototype;e.__init=function(){this._creator=$("<div class='"+this._options.classCreator+"'>").appendTo(this._ctnr);this.bindEvents()};e.bindEvents=function(){this.grid.event.bind({onRenderModules:this._onRenderModules,
onCreateCss:this._onCreateCss,onDestroy:this._destroy},this)};e._onCreateCss=function(){var b="#"+this.grid.mid+" .",a=this._options,d=[];d.push(b+a.classCreator+"{"+i._CONST._cssUnselectable+"float:left;width:100%;padding-left:8px;background:"+a.background+";border-top:"+(a.borderThickness+"px "+a.border)+";font:"+a.font+"}");d.push(b+a.classCreator+" button{float:left;margin:"+a.padding+"px "+a.padding+"px 0 0;height:"+(a.height-2*a.padding)+"px}");d.push(b+a.classCreator+" input{float:left;padding:0;margin-top:"+
(a.height-a.inputHeight-2*a.inputBorderThickness)/2+"px;height:"+a.inputHeight+"px;border:"+a.inputBorderThickness+"px "+a.inputBorder+";border-radius:"+a.inputBorderRadius+"px;-moz-border-radius:"+a.inputBorderRadius+"px}");d.push(b+a.classCol+"{float:left;overflow:hidden;white-space:nowrap;line-height:"+a.height+"px;margin-right:"+a.inputMargin+"px}");d.push(b+a.classColName+"{float:left;margin-right:"+a.nameMargin+"px}");d.push(b+a.classCreatorIcon+"{background:url("+a.creatorIconUrl+") no-repeat center;width:"+
a.creatorIconWidth+"px;height:"+a.creatorIconHeight+"px}");return d.join("")};e._onRenderModules=function(){for(var b=[],a=this.grid.colDefMgr.getAll(),d=a.length,c,e=this._options,f=e.classCol,i=e.classColName,r=this,n=this._creator,o=this._inputMap,p=0,l=function(a){a.which===h.keyMapKeydown.enter&&r._addData()};p<d;p++)c=a[p],c.inputOnCreate===!0&&b.push("<div key='"+c.key+"' class='"+f+"'><div class='"+i+"'>"+c.name+"</div><input type='text' value='"+h.ifNull(c.defaultValue,"")+"' style='width:"+
c.width+"px'/></div>");n[0].innerHTML=b.join("")+"<button type='button' onclick='JGM.m.DataCreator."+this.mid+"._addData()'>등록</button><button type='button' onclick='JGM.m.DataCreator."+this.mid+"._reset()'>초기화</button>";for(p=0;p<d;p++)c=a[p],c.inputOnCreate===!0&&(o[c.key]=n.find("div[key='"+c.key+"'] input").keyup(l));this.grid.menubar!=null&&(this.grid.menubar.addIcon(e.classCreatorIcon,"데이터 로우를 추가합니다.",e.creatorIconWidth,e.creatorIconHeight,function(){n.toggle("fast")}),n.hide())};e._addData=
function(){var b,a=this._inputMap,d=this.grid.colDefMgr,c={},e=d.getAll(),f=e.length,h=0;for(b in a)a.hasOwnProperty(b)&&d.getByKey(b);for(;h<f;h++)d=e[h],b=d.key,a.hasOwnProperty(b)?c[b]=a[b][0].value:d.defaultValue!==void 0&&(c[b]=d.defaultValue);this.grid.event.trigger("onAfterDataCreate",[c],!0);this.grid.dataMgr.add(c,{isNew:!0})};e._reset=function(){var b,a=this.grid.colDefMgr,d,c=this._inputMap;for(b in c)if(c.hasOwnProperty(b)&&(d=a.getByKey(b),d.defaultValue!==void 0))c[b][0].value=d.defaultValue};
e._destroy=function(){var b,a=this._inputMap;for(b in a)a.hasOwnProperty(b)&&i._delete$(a,b);i._destroy(this,{name:"DataCreator",path:"creator",$:"_creator",map:"_inputMap _options"})}})();jx.struct={};jx.struct.TreeNode={};jx.struct.Tree={};var TreeNode={},Tree={};
(function(){function f(b){this.tree=b.tree;this.data=b.data;this.nodeId=b.nodeId;this.childrenMap={};this.children=[]}function i(b){this.list=b.list;this._options=JGM._extend({nodeKey:"nodeId",parentKey:"parentId"},b.options);this.map={};this.root=new f({tree:this});this.infants={}}var h=goog.getObjectByName("jx.util");goog.exportSymbol("jx.struct.TreeNode",f);goog.exportSymbol("jx.struct.Tree",i);goog.exportSymbol("TreeNode",f);goog.exportSymbol("Tree",i);f.getInstance=function(b){return new f(b)};
var e=f.prototype;e.destroy=function(){this.detach();delete this.tree;delete this.data;delete this.nodeId;delete this.childrenMap;delete this.children};e.destroyCompletely=function(){this.detachCompletely();delete this.tree;delete this.data;delete this.nodeId;delete this.childrenMap;delete this.children};e.destroyDown=function(){h.isNotNull(this.parent)&&this.parent.removeChild(this);this.traverse({post:!0,fn:function(){this.destroy()}})};e.detach=function(){delete this.parent;delete this.level;this.children.length=
0;this.childrenMap={}};e.detachCompletely=function(){h.isNotNull(this.parent)&&this.parent.removeChild(this);this.removeAllChildren();delete this.parent;delete this.level};e.detachDown=function(){h.isNotNull(this.parent)&&this.parent.removeChild(this);this.traverse({post:!0,fn:function(){this.detach()}})};e.isRoot=function(){return h.isNull(this.parent)};e.getRoot=function(){};e.isLeaf=function(){return this.children.length===0};e.setParent=function(b){if(this.parent!==b)h.isNotNull(this.parent)&&
this.parent.removeChild(this),this.parent=b,delete this.level,h.isNotNull(b)&&b.addChild(this)};e.hasChild=function(b){return this.childrenMap.hasOwnProperty(b.nodeId)};e.addChild=function(b){this.hasChild(b)||(this.children.push(b),this.childrenMap[b.nodeId]=this.children.length-1,b.setParent(this))};e.addChildAt=function(b,a){var d;if(this.hasChild(a)){d=this.childrenMap[a.nodeId];if(d===b)return;this.children.removeAt(d)}this.children.addAt(b,a);h.isNotNull(d)&&d<b?this.resetChildIdx(d):this.resetChildIdx(b);
a.setParent(this)};e.removeChild=function(b){if(this.hasChild(b)){var a=this.childrenMap[b.nodeId];this.children.removeAt(a);delete this.childrenMap[b.nodeId];this.resetChildIdx(a);delete b.parent;delete b.level}};e.removeChildAt=function(b){var a=this.children[b];this.children.removeAt(b);delete this.childrenMap[a.nodeId];this.resetChildIdx(b);delete a.parent;delete a.level};e.resetChildIdx=function(b){h.isNull(b)&&(b=0);for(var a=this.children,d=a.length,c=this.childrenMap;b<d;b++)c[a[b].nodeId]=
b};e.removeAllChildren=function(){for(var b=0,a=this.children,d=a.length;b<d;b++)delete a[b].parent,delete a[b].level;a.length=0;this.childrenMap={}};e.getSiblings=function(){if(this.isRoot())return[];var b=this.parent.children.slice();b.removeAt(this.parent.getChildIdx(this));return b};e.getChildIdx=function(b){return this.childrenMap[b.nodeId]};e.getIdx=function(){return this.isRoot()?-1:this.parent.getChildIdx(this)};e.getPath=function(){return this.traverse({res:[],up:!0,post:!0,fn:function(b){this.isRoot()||
b.res.push(this.getIdx())}}).res};e.getAncestors=function(){var b={res:[],up:!0,post:!0,fn:function(a){a.res.push(this)}};this.traverse(b);b.res.pop();return b.res};e.getDescendents=function(){var b={res:[],fn:function(a){a.res.push(this)}};this.traverse(b);b.res.shift();return b.res};e.getLevel=function(){return this.isRoot()?this.level=-1:this.level=this.parent.getLevel()+1};e.find=function(b){return this.traverse({fn:function(a){if(this.data===b)a.res=this,a.stop=!0}}).res};e.traverse=function(b,
a){if(b.stop)return b;if(b.up)this.isRoot()?this.callFn(b):b.post?(this.parent.traverse(b),this.callFn(b)):(this.callFn(b),this.parent.traverse(b));else{var d=0,c=this.children,e=c.length;if(b.post){for(;d<e;d++)c[d].traverse(b,d);this.callFn(b,a)}else if(this.callFn(b,a),b.propagate===!1)delete b.propagate;else for(;!b.stop&&d<e;d++)c[d].traverse(b,d)}return b};e.traverseChildren=function(b){for(var a=0,d=this.children,c=d.length;a<c;a++)d[a].traverse(b,a)};e.traverseParent=function(b){h.isNotNull(this.parent)&&
this.parent.traverse(b)};e.callFn=function(b,a){if(!b.stop)h.isNull(b.target)?h.callFn(this,b.fn,b,a):(b.node=this,h.callFn(b.target,b.fn,b,a))};i.getInstance=function(b){return new i(b)};e=i.prototype;e.__init=function(){this.makeTree()};e.destroy=function(){this.root.destroyDown();this.map={};this.emptyInfants();delete this.list;delete this._options;delete this.map;delete this.root;delete this.infants;delete this.mid};e.detach=function(){this.root.detachDown();this.emptyInfants()};e.emptyInfants=
function(){var b,a=this.infants;for(b in a)if(a.hasOwnProperty(b))a[b].length=0;this.infants={}};e.reattach=function(b){this.detach();if(h.isNull(b))b=this.list;for(var a=this._options.nodeKey,d=this.map,c=b.length,e=0;e<c;e++)this.attachNode(d[b[e][a]])};e.makeTree=function(b){if(h.isNull(b))b=this.list;for(var a=0,d=b.length;a<d;a++)this.createNode(b[a])};e.hasNode=function(b){return h.isNotNull(b)&&this.map.hasOwnProperty(b[this._options.nodeKey])};e.getNode=function(b){return this.map[b[this._options.nodeKey]]};
e.getNodeByNodeId=function(b){return this.map[b]};e.createNode=function(b){if(!this.hasNode()){var a=b[this._options.nodeKey],b=new f({tree:this,data:b,nodeId:a});this.map[a]=b;this.attachNode(b);return b}};e.adoptInfants=function(b,a){if(this.infants.hasOwnProperty(a)){for(var d=this.infants[a],c=0,e=d.length;c<e;c++)b.addChild(d[c]);d.length=0;delete this.infants[a]}};e.attachNode=function(b){var a=b.nodeId,d=b.data[this._options.parentKey];this.adoptInfants(b,a);if(h.isNull(d)||d==a)return this.root.addChild(b),
!0;if(this.map.hasOwnProperty(d))return this.map[d].addChild(b),!0;this.addToInfants(b,d);return!1};e.changeNodeId=function(b,a,d){if(a!==d)delete this.map[a],this.map[d]=b,this.removeChildren(b),b.nodeId=b.data[this._options.nodeKey]=d,h.isNotNull(b.parent)&&(b.parent.childrenMap[d]=b.parent.childrenMap[a],delete b.parent.childrenMap[a]),this.adoptInfants(b,d)};e.changeParentId=function(b,a,d){a!==d&&(h.isNull(b.parent)&&this.removeFromInfants(b,a),a=this.map[d],b.setParent(a),b.data[this._options.parentKey]=
d,h.isNull(a)&&this.addToInfants(b,d))};e.destroyNodeByData=function(b){this.destroyNode(this.getNode(b))};e.destroyNode=function(b){this.removeChildren(b);this.removeFromInfants(b);this.removeFromMap(b);b.destroyCompletely()};e.removeFromMap=function(b){delete this.map[b.nodeId]};e.addToInfants=function(b,a){this.infants.hasOwnProperty(a)||(this.infants[a]=[]);this.infants[a].push(b)};e.removeFromInfants=function(b,a){h.isNull(a)&&(a=b.data[this._options.parentKey]);this.infants.hasOwnProperty(a)&&
(this.infants[a].remove(b),this.infants[a].length===0&&delete this.infants[a])};e.removeChildren=function(b){b.children.length!==0&&(this.infants.hasOwnProperty(b.nodeId)||(this.infants[b.nodeId]=[]),this.infants[b.nodeId].pushList(b.children),b.removeAllChildren())};e.sortList=function(b){h.isNull(b)?b=[]:b.length=0;this.root.traverseChildren({fn:function(){b.push(this.data)}})}})();jx.grid.Collapser={};
(function(){function f(a){this.mid=a.mid;this.grid=a.grid;this.grid.collapser=this;this._options=i._extend({key:void 0,colDef:{key:"collapser",width:120,name:" ",noSearch:!0},colIdx:0,urlCollapsed:this.grid._options.imageUrl+"collapsed.png",urlCollapsedHover:this.grid._options.imageUrl+"collapsed-hover.png",urlExpanded:this.grid._options.imageUrl+"expanded.png",urlExpandedHover:this.grid._options.imageUrl+"expanded-hover.png",width:6,padding:5,classCollapser:"jgrid-collapser",classCollapsed:"collapsed",
classExpanded:"expanded",classIndent:"indent",classMasterCollapser:"master",indentSize:12,beginCollapsed:!1,CheckManager:void 0,Tree:void 0,TreeCheckMode:!0},a.options);if(this._options.CheckManager)this.checkMgr=i.create("CheckManager",{grid:this.grid,options:this._options.CheckManager}),delete this._options.CheckManager,h.isNull(this._options.key)&&this._options.colIdx++;this._tree=new e({list:this.grid.dataMgr.all,options:this._options.Tree});this._treeCheckMode=this._options.TreeCheckMode}var i=
goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("jx.grid.Grid");var e=goog.getObjectByName("jx.struct.Tree");goog.exportSymbol("jx.grid.Collapser",f);f.getInstance=function(a){return new f(a)};var b=f.prototype;b.__init=function(){h.isNull(this._options.key)&&this.grid.colDefMgr.addAt(this._options.colIdx,this._options.colDef);this._makeTree();this._filterRefresh();this.key=h.isNull(this._options.key)?this._options.colDef.key:
this._options.key;this.bindEvents()};b.bindEvents=function(){var a=this.key,b;b={onAfterFilter:this._onAfterFilter,onCreateCss:this._onCreateCss,onDestroy:this._destroy,onAfterSetDatalist:this._onAfterSetDatalist,onAddDatarow:this._onAddDatarow,onAddDatalist:this._onAddDatalist,onUpdateDatarow:this._onUpdateDatarow,onUpdateDatalist:this._onUpdateDatalist,onRemoveDatarow:this._onRemoveDatarow,onRemoveDatalist:this._onRemoveDatalist,onRenderHeadersComplete:this._getMaster};b["onRenderHeader_"+a+"_prepend"]=
this._onRenderHeader;b["clickHeaderValid_"+a]=this._clickHeaderValid;b["onRenderCell_"+a+"_prepend"]=this._onRenderCell;b["dblclickCanvas_"+a]=this._dblclickCanvas;b["keydownColSel_"+a+"_"+h.keyMapKeydown.space]=this._keydownColSel;if(h.isNotNull(this.checkMgr))b.onCheckChange=this._onCheckChange;this.grid.event.bind(b,this)};b._destroy=function(){i._destroy(this,{name:"Collapser",path:"collapser",module:"_tree",$:"_master",property:"checkMgr",map:"_options"})};b._onCreateCss=function(){var a="#"+
this.grid.mid+" .",b=this._options,c=a+this.grid.view._options.classRow+" .",e=a+b.classCollapser,f=e+"."+b.classExpanded,i=e+"."+b.classCollapsed,r=this.grid.view._getRowInnerHeight(),n=[],o=this.grid.header;n.push(a+b.classIndent+"{height:"+r+"px;float:left;}");n.push(e+"{width:"+b.width+"px;float:left;padding:0 "+b.padding+"px}");n.push(c+b.classCollapser+"{height:"+r+"px}");n.push(f+"{background:url("+b.urlExpanded+") no-repeat center transparent}");n.push(f+":hover{background:url("+b.urlExpandedHover+
") no-repeat center transparent}");n.push(i+"{background:url("+b.urlCollapsed+") no-repeat center transparent}");n.push(i+":hover{background:url("+b.urlCollapsedHover+") no-repeat center transparent}");h.isNotNull(o)&&n.push(a+o._options.classColHeader+" ."+b.classCollapser+"{height:"+o._options.height+"px}");return n.join("")};b._onAfterSetDatalist=function(){this._tree.destroy();this._tree=new e({list:this.grid.dataMgr.all,options:this._options.Tree});this._makeTree()};b._onAddDatarow=function(a){a=
this._tree.createNode(a);a._collapsed=this._options.beginCollapsed;a._shown=h.isNotNull(a.parent)&&(a.parent===a.tree.root||a.parent._shown&&!a.parent._collapsed)?!0:!1;h.isNotNull(a.parent)&&a.parent.children.length===1&&this.grid.view.rerenderCellByIdAndKey(this.grid.dataMgr.getId(a.parent.data),this.key);a._collapsed===!0||a._shown===!1?a.traverseChildren({fn:function(){this._shown=!1}}):a.traverseChildren({fn:function(a){h.isNotNull(this.parent)&&(this.parent===this.tree.root||this.parent._shown&&
!this.parent._collapsed)?this._shown=!0:(a.propagate=!1,this.traverse({fn:function(){this._shown=!1}}))}});this.grid.event.trigger("onCollapserTreeChange",!1,!0)};b._onAddDatalist=function(a){for(var b=0,c=a.length,e=this._tree,f=e.root,i=this._options.beginCollapsed,r=this.key,n=this.grid.view,o=this.grid.dataMgr,p,l=[],m;b<c;b++)p=e.createNode(a[b]),p._collapsed=i,h.isNotNull(p.parent)&&p.parent.children.length===1&&l.push(p.parent.data);if(n!==void 0){b=0;for(c=l.length;b<c;b++)n.rerenderCellByIdAndKey(o.getId(l[b]),
r)}f.traverseChildren({fn:function(a){m=this.parent;h.isNotNull(m)&&(m===f||m._shown&&!m._collapsed)?this._shown=!0:(a.propagate=!1,this.traverse({fn:function(){this._shown=!1}}))}});this.grid.event.trigger("onCollapserTreeChange",!1,!0)};b._onUpdateDatarow=function(a,b,c){var e=this._tree,f=e._options.nodeKey,i=e._options.parentKey,r;b.hasOwnProperty(f)&&(r=e.getNodeByNodeId(c[f]),e.changeNodeId(r,c[f],b[f]),this.grid.event.trigger("onCollapserTreeChange",!1,!0));b.hasOwnProperty(i)&&(h.isNull(r)&&
(r=e.getNode(a)),e.changeParentId(r,c[i],b[i]),this.grid.event.trigger("onCollapserTreeChange",!1,!0))};b._onUpdateDatalist=function(a,b,c){for(var b=this._tree,e=b._options.nodeKey,f=b._options.parentKey,i,r,n,o=[],p=[],l=0,m=a.length;l<m;l++)i=c[l],r=a[l],n=void 0,i.hasOwnProperty(e)&&(h.isNull(n)&&(n=b.getNodeByNodeId(i[e])),o.push({node:n,before:i[e],newId:r[e]})),i.hasOwnProperty(f)&&(h.isNull(n)&&(n=b.getNode(r)),p.push({node:n,before:i[f],newId:r[f]}));a=o.length;c=p.length;if(a+c!==0){if(a+
c>10)b.reattach();else{for(l=0;l<a;l++)e=o[l],b.changeNodeId(e.node,e.before,e.newId);for(l=0;l<c;l++)e=p[l],b.changeParentId(e.node,e.before,e.newId)}this.grid.event.trigger("onCollapserTreeChange",!1,!0)}};b._onRemoveDatarow=function(a){this._tree.destroyNodeByData(a);this.grid.event.trigger("onCollapserTreeChange",!1,!0)};b._onRemoveDatalist=function(a){for(var b=0,c=a.length,e=this._tree;b<c;b++)e.destroyNodeByData(a[b]);this.grid.event.trigger("onCollapserTreeChange",!1,!0)};b._onAfterFilter=
function(a,b){var c=this._tree;if(b.length>0){var e=this.grid.dataMgr,f=a.length,i=e._idToIdx,r=e.idKey,n,o=0,p=function(c){h.isNotNull(this.parent)?(n=this.parent.data,h.isNotNull(n)&&!e.has(n)&&(a.push(n),b.remove(n),i[n[r]]=-1)):c.stop=!0};e._reidx();for(c.reattach();o<f;o++)c.getNode(a[o]).traverse({up:!0,fn:p});c.reattach(a);c.sortList(a);this.grid.event.trigger("onCollapserTreeChange",!1,!0)}else c.reattach(a),this.grid.event.trigger("onCollapserTreeChange",!1,!0),this._filter(a,b)};b._filter=
function(a,b){a.length=0;this._tree.root.traverseChildren({fn:function(){this._shown?a.push(this.data):b.push(this.data)}})};b.setTreeCheckMode=function(a){this._treeCheckMode=!!a};b.getTreeCheckMode=function(){return this._treeCheckMode};b.toggleById=function(a){if(h.isNotNull(a))return this.toggleCollapse(this._tree.getNode(this.grid.dataMgr.getById(a)))};b.toggle=function(a){return this.toggleById(this.grid.dataMgr.getId(a))};b.toggleByIdx=function(a){return this.toggleById(this.grid.dataMgr.getIdByIdx(a))};
b._clickHeaderValid=function(a){if(h.hasTagAndClass(a.target,"DIV",this._options.classCollapser))return!1};b._dblclickCanvas=function(a,b){h.hasTagAndClass(a.target,"DIV",this._options.classCollapser)||this.toggleCollapse(this._tree.getNode(b.getDatarow()))};b._keydownColSel=function(a,b,c){a.preventDefault();if(h.isNotNullAnd(b,c)){var a=this._tree,c=a.getNode(c.getDatarow())._collapsed,e=this.grid.dataMgr.datalist,f,i;for(i in b)b.hasOwnProperty(i)&&i!=="length"&&(f=a.getNode(e[i]),c?this.expand(f):
this.collapse(f));this._filterRefresh()}};b._makeTree=function(){var a=this._tree,b,c;a.__init();c=a.map;a=a.root;if(this._options.beginCollapsed){for(b in c)if(c.hasOwnProperty(b))c[b]._collapsed=!0,c[b]._shown=!1;c=a.children;var e=c.length;for(b=0;b<e;b++)c[b]._shown=!0;a._collapsed=!0}else{for(b in c)if(c.hasOwnProperty(b))c[b]._collapsed=!1,c[b]._shown=!0;a._collapsed=!1}this.grid.event.trigger("onCollapserTreeChange",!1,!0)};b._onRenderHeader=function(a){a.push("<div id='"+this.mid+"h' onmousedown='JGM.m.Collapser."+
this.mid+".toggleMaster();' class='"+this._options.classCollapser+" "+this._options.classMasterCollapser);this._tree.root._collapsed?a.push(" "+this._options.classCollapsed):a.push(" "+this._options.classExpanded);a.push("'></div>")};b._onRenderCell=function(a,b,c,e,f){a=this._tree.getNode(c);if(h.isNull(a))return null;c=this.grid.dataMgr.getId(c);b=this._options;f.push("<div class='"+b.classIndent+"' style='width:"+b.indentSize*a.getLevel()+"px;'></div><div ");a.isLeaf()?f.push("class='"+b.classCollapser):
(f.push('onmousedown="JGM.m.Collapser.'+this.mid+".toggleById('"+c+"');\" class='"+b.classCollapser),a._collapsed?f.push(" "+b.classCollapsed):f.push(" "+b.classExpanded));f.push("'></div>")};b.getLevel=function(a){a=this._tree.getNode(a);return h.isNull(a)?null:a.getLevel()};b.collapse=function(a,b){if(!(a._collapsed===!0||a.isLeaf())){a._collapsed=!0;a.traverseChildren({fn:function(a){this._shown=!1;this._collapsed&&(a.propagate=!1)}});var c=this._getCollapser(a.data);c.length>0&&this._setClass(c,
!0);if(!b&&a.parent===this._tree.root&&this._tree.root._collapsed===!1)this._setClass(this._master,this._tree.root._collapsed=!0)}};b.expand=function(a,b){if(!(a._collapsed===!1||a.isLeaf())){a._collapsed=!1;a.traverseChildren({fn:function(a){this._shown=!0;this._collapsed&&(a.propagate=!1)}});var c=this._getCollapser(a.data),e=this._tree;c.length>0&&this._setClass(c,!1);if(!b&&a.parent===e.root){for(var c=e.root.children,f=c.length,h=0;h<f;h++)if(c[h]._collapsed)return;this._setClass(this._master,
e.root._collapsed=!1)}}};b._setClass=function(a,b){if(!h.isNull(a)){var c=this._options;b?a.addClass(c.classCollapsed).removeClass(c.classExpanded):a.addClass(c.classExpanded).removeClass(c.classCollapsed)}};b.toggleMaster=function(){var a=this._tree.root,b=a.children,c=b.length,e=0;if(a._collapsed){for(;e<c;e++)this.expand(b[e],!0);this._setClass(this._master,a._collapsed=!1)}else{for(;e<c;e++)this.collapse(b[e],!0);this._setClass(this._master,a._collapsed=!0)}this._filterRefresh()};b.toggleCollapse=
function(a){a=a._collapsed?this.expand(a):this.collapse(a);this._filterRefresh();return a};b._onCheckChange=function(a,b){if(this._treeCheckMode){var c=this._tree.getNode(a),e=this.checkMgr,f=[],j;b?(c.traverseChildren({fn:function(a){e.isChecked(this.data)?a.propagate=!1:(e._add(this.data),h.isNotNull(j=e.getCheckbox(this.data))&&f.push(j))}}),c.traverseParent({up:!0,fn:function(a){h.isNull(this.data)||e.isChecked(this.data)?a.stop=!0:(e._add(this.data),h.isNotNull(j=e.getCheckbox(this.data))&&f.push(j))}}),
i.CheckManager._check($(f)),e._updateMaster()):(c.traverseChildren({fn:function(a){e.isChecked(this.data)?(e._remove(this.data),h.isNotNull(j=e.getCheckbox(this.data))&&f.push(j)):a.propagate=!1}}),c.traverseParent({up:!0,fn:function(a){if(h.isNull(this.data)||!e.isChecked(this.data))a.stop=!0;else{for(var b=0,c=this.children,d=c.length;b<d;b++)if(e.isChecked(c[b].data)){a.stop=!0;return}e._remove(this.data);h.isNotNull(j=e.getCheckbox(this.data))&&f.push(j)}}}),i.CheckManager._uncheck($(f)))}};b._filterRefresh=
function(){this._filter(this.grid.dataMgr.datalist,this.grid.dataMgr.failed);this.grid.dataMgr._finish()};b._getCollapser=function(a){if(h.isNull(a))return $([]);a=h.findFirstByTagAndClass(this.grid.view.getCell(this.grid.dataMgr.getIdx(a),this.grid.colDefMgr.getIdxByKey(this.key)),"DIV",this._options.classCollapser);return a===void 0?$([]):$(a)};b._getMaster=function(){this._master=$(document.getElementById(this.mid+"h"))}})();jx.grid.ColumnGroup={};
(function(){function f(b){this.mid=b.mid;this.grid=b.grid;this.grid.colGroup=this;this._options=i._extend({key:void 0,padColKeys:[],sumColKeys:[],prefix:"합계: ",Collapser:{indentSize:0}},b.options);this._options.Collapser.key=this._options.key;this._parentMap={};this.__init()}var i=goog.getObjectByName("jx.grid"),h=goog.getObjectByName("jx.util");goog.getObjectByName("jx.grid.BaseModule");goog.getObjectByName("jx.grid.Grid");goog.getObjectByName("jx.grid.Collapser");goog.exportSymbol("jx.grid.ColumnGroup",f);
f.getInstance=function(b){return new f(b)};var e=f.prototype;e.__init=function(){var b=this.grid,a=b.dataMgr,d=this._options;this.bindEvents();b=this.collapser=i.create("Collapser",{grid:b,options:d.Collapser});delete d.Collapser;this._processData(a.all);b.__init();a.refresh()};e.bindEvents=function(){var b;b={onBeforeSetDatalist:this._removeAll,"onAfterSetDatalist onAddDatalist":this._processData,onAddDatarow:this._onAddDatarow,onUpdateDatarow:this._onUpdateDatarow,onUpdateDatalist:this._onUpdateDatalist,
onRemoveDatarow:this._onRemoveDatarow,onRemoveDatalist:this._onRemoveDatalist,onDestroy:this._destroy};if(this._options.sumColKeys.length!==0){var a=this.mid,d=this.grid.dataMgr._consts._notReal,c=0,e,f=this._options.sumColKeys,h=this._options.prefix,i=f.length;for(e=function(b,c,e,f,g){e[d]===a&&g.push(h)};c<i;c++)b["onRenderCell_"+f[c]+"_prepend"]=e;b.onCollapserTreeChange=this._onCollapserTreeChange}this.grid.event.bind(b,this)};e._destroy=function(){i._destroy(this,{name:"ColumnGroup",path:"colGroup",
property:"collapser",map:"_parentMap _options"})};e._processData=function(b){for(var a=b.length,d=this._options.key,c=this._options.padColKeys,e=this.grid.dataMgr,f=e._consts._notReal,i=e.idKey,r=this.collapser,n=r._tree._options.nodeKey,o=r._tree._options.parentKey,p=[],l=0;l<a;l++)this._addData(b[l],d,i,f,n,o,c,p);p.length!==0&&(e.all.pushList(p),e.makeCompositeKeyList(p,!0),e.addListToIdMap(p),h.isNotNull(r)&&r._onAddDatalist(p));return p};e._addData=function(b,a,d,c,e,f,h,i){var n=b[a],o=this._parentMap;
o.hasOwnProperty(n)||(a=this._makeParent(b,a,d,n,c,e,h),i.push(a),o[n]=a);b[e]=b[d];b[f]=this.mid+n};e._makeParent=function(b,a,d,c,e,f,h){var i={},n=0,o=h.length;i[e]=this.mid;i[f]=this.mid+c;i[a]=c;for(i[d]=(this.grid.colDefMgr.getByKey(a).name||a)+": "+c;n<o;n++)i[h[n]]=b[h[n]];return i};e._isParent=function(b){return b[this.grid.dataMgr._consts._notReal]===this.mid};e._removeAll=function(){this._parentMap={}};e._onAddDatarow=function(b){var a=[],d=this._options,c=this.grid.dataMgr,e=this.collapser,
f=e._tree._options;this._addData(b,d.key,c.idKey,c._consts._notReal,f.nodeKey,f.parentKey,d.padColKeys,a);a.length!==0&&(b=a[0],c.all.push(b),c.makeCompositeKey(b,!0),c.addToIdMap(b),e._onAddDatarow(b))};e._onUpdateDatarow=function(b,a,d){if(a.hasOwnProperty(this._options.key)){var c=this._options.key,a=a[c],d=d[c],e=this.mid,c=this.collapser,f=c._tree,h=f._options.parentKey,i={},n={},o=this._parentMap;o.hasOwnProperty(a)||this._onAddDatarow(b);i[h]=e+a;n[h]=e+d;c._onUpdateDatarow(b,i,n);b=f.getNode(o[d]);
b.children.length===0&&(this.grid.dataMgr.all.remove(b.data),delete o[d],c._onRemoveDatarow(b.data))}};e._onUpdateDatalist=function(b,a,d){var c=this._options.key,e=this.mid,f=this.collapser,h=f._tree,i=h._options.parentKey,n,o={};n={};for(var p=[],l=[],m=[],q=0,s=b.length;q<s;q++)n=a[q],n.hasOwnProperty(c)&&(o={},o[i]=e+n[c],p.push(o),n={},n[i]=e+d[q][c],l.push(n),m.push(b[q]));if(m.length!==0){b=this._parentMap;a=[];this._processData(m);f._onUpdateDatalist(m,p,l);q=0;for(s=l.length;q<s;q++)p=l[q][i],
b.hasOwnProperty(p)&&(m=h.getNode(b[p]),m.children.length===0&&(delete b[p],a.push(m.data)));a.length!==0&&(f._onRemoveDatalist(a),this.grid.dataMgr.all.removeList(a))}};e._onRemoveDatarow=function(b){this._isParent(b)?delete this._parentMap[b[this._options.key]]:(b=this.collapser._tree.getNode(b).parent,b.children.length===1&&this.grid.dataMgr.remove(b.data))};e._onRemoveDatalist=function(b){for(var a=0,d=b.length;a<d;a++)this._onRemoveDatarow(b[a])};e._onCollapserTreeChange=function(){for(var b=
{},a=this._options.sumColKeys,d=a.length,c=0,e=this.grid.dataMgr._consts._notReal,f=this.mid,h,i,n;c<d;c++)b[a[c]]=0;this.collapser._tree.root.traverseChildren({post:!0,fn:function(){h=this.data;c=0;if(h[e]===f)for(;c<d;c++)i=a[c],h[i]=b[i],b[i]=0;else if(!h.hasOwnProperty(e))for(;c<d;c++){if(typeof(n=h[a[c]])==="string")n=n.toFloat();b[a[c]]+=isNaN(n)?0:n}}})}})();})();
